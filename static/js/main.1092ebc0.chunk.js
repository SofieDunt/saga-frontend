(this["webpackJsonpsaga-frontend"]=this["webpackJsonpsaga-frontend"]||[]).push([[0],{45:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var c,r,i,o=n(1),s=n.n(o),a=n(36),u=n.n(a),j=(n(45),n(10)),d=n(3),l=n(4),b=n(18),h=n(9),O=n(37),x=n(32),m=n.n(x),p=n(38);!function(e){e[e.STORY=0]="STORY",e[e.WORK=1]="WORK"}(c||(c={})),function(e){e.SIMPLE="SIMPLE",e.CONSEQUENTIAL="CONSEQUENTIAL",e.DEPENDENT="DEPENDENT"}(r||(r={})),function(e){e.ADD="ADD",e.SET="SET"}(i||(i={}));var f,g,S,v,C,y,E,A,k,I,N,D,T,w,P,L,W,F,R,_,M,q,Y,B,U,z,Q,V,K,H,G,J,X="",Z="",$=["A Magical Adventure","A Sci-Fi Adventure","A Nonfiction Adventure"],ee=["A Magical Adventure","A Sci-Fi Adventure","A Nonfiction Adventure"],te={name:"",statuses:[{name:"points",value:0}],choices:[{id:0,options:[{id:0,decision:0}]},{id:1,options:[{id:0,decision:1},{id:1,decision:2},{id:2,decision:3}]},{id:2,options:[{id:0,decision:4}]},{id:3,options:[]}],decisions:[{id:0,type:r.SIMPLE,description:"Next",threshold:0,outcome1Id:1,outcome2Id:0},{id:1,type:r.SIMPLE,description:"Iceland",threshold:0,outcome1Id:2,outcome2Id:0},{id:2,type:r.SIMPLE,description:"Venice",threshold:0,outcome1Id:2,outcome2Id:0},{id:3,type:r.SIMPLE,description:"Disneyland",threshold:0,outcome1Id:2,outcome2Id:0},{id:4,type:r.SIMPLE,description:"Next",threshold:0,outcome1Id:3,outcome2Id:0}],choice:0},ne=te,ce=te,re=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.reject({message:"This is not supported in the demo."}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){return Z="",Promise.resolve()},oe={getCurrentStoryName:function(){return Promise.resolve(X)},getCurrentChoice:function(){var e="";switch(ne.choice){case 0:e="This is a sample interactive story demo! Here you can see how players read their options and make decisions.";break;case 1:e="Try making a decision! Where will you go for vacation?";break;case 2:e="Nice decision! That's all for this demo!";break;case 3:e="Game over, no choices left."}return Promise.resolve(e)},getCurrentStory:function(){var e={name:X,statuses:ne.statuses,choices:ne.choices,decisions:ne.decisions,choice:ne.choice};return Promise.resolve(e)},getAllStoryNames:function(){return Promise.resolve($)},exportStory:function(e,t){return Promise.reject({message:"This is not supported in the demo."})},exportStoryInProgress:function(e,t){return Promise.reject({message:"This is not supported in the demo."})},importStory:function(e){return re()},next:function(){return Promise.reject({message:"This is not supported in the demo."})},choose:function(e){return ne={name:ne.name,statuses:ne.statuses,choices:ne.choices,decisions:ne.decisions,choice:ne.decisions[e].outcome1Id},Promise.resolve()},loadStory:function(e){return X=e,Promise.resolve()},restart:function(){return ne=te,Promise.resolve()},quitStory:function(){return ie()},removeStory:function(e){return $.splice($.indexOf(e),1),Promise.resolve()},getAllWorkNames:function(){return Promise.resolve(ee)},getCurrentWorkName:function(){return Promise.resolve(Z)},getCurrentWork:function(){var e={name:Z,statuses:ce.statuses,choices:ce.choices,decisions:ce.decisions,choice:ce.choice};return Promise.resolve(e)},getCurrentWorkStoryName:function(){return""!==Z?Promise.resolve(ce.name):Promise.reject({message:"No loaded story."})},getCurrentStatuses:function(){return""!==Z?Promise.resolve(ce.statuses):Promise.reject({message:"No loaded story."})},getInitialChoice:function(){return""!==Z?Promise.resolve(ce.choice):Promise.reject({message:"No loaded story."})},getCurrentChoices:function(){return""!==Z?Promise.resolve(ce.choices):Promise.reject({message:"No loaded story."})},getCurrentDecisions:function(){return""!==Z?Promise.resolve(ce.decisions):Promise.reject({message:"No loaded story."})},exportWork:function(e){return Promise.reject({message:"This is not supported in the demo."})},importWork:function(e){return Promise.reject({message:"This is not supported in the demo."})},exportToPlayer:function(){return Promise.reject({message:"This is not supported in the demo."})},loadWork:function(e){return Z=e,Promise.resolve()},quitWork:function(){return ie()},removeWork:function(e){return ee.splice(ee.indexOf(e),1),Promise.resolve()},renameWork:function(e,t){return Promise.reject({message:"This is not supported in the demo."})},startNewWork:function(e){return Promise.reject({message:"This is not supported in the demo."})},setName:function(e){return e.length<1||(Z=e,ce={name:e,statuses:ce.statuses,choices:ce.choices,decisions:ce.decisions,choice:ce.choice}),Promise.resolve()},addStatus:function(e,t){var n,c=[],r=!1,i=Object(O.a)(ce.statuses);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.name===e?(c.push({name:e,value:t}),r=!0):c.push(o)}}catch(s){i.e(s)}finally{i.f()}return r?(ce={name:ce.name,statuses:c,choices:ce.choices,decisions:ce.decisions,choice:ce.choice},Promise.resolve()):(ce={name:ce.name,statuses:[].concat(Object(j.a)(ce.statuses),[{name:e,value:t}]),choices:ce.choices,decisions:ce.decisions,choice:ce.choice},Promise.resolve())},removeStatus:function(e){return Promise.reject({message:"This is not supported in the demo."})},addChoice:function(){return ce={name:ce.name,statuses:ce.statuses,choices:[].concat(Object(j.a)(ce.choices),[{id:ce.choices.length,options:[]}]),decisions:ce.decisions,choice:ce.choice},Promise.resolve()},setInitial:function(e){return ce={name:ce.name,statuses:ce.statuses,choices:[].concat(Object(j.a)(ce.choices),[{id:ce.choices.length,options:[]}]),decisions:ce.decisions,choice:e},Promise.resolve()},addSimpleDecision:function(e){return Promise.reject({message:"This is not supported in the demo."})},addConsequentialDecision:function(e){return Promise.reject({message:"This is not supported in the demo."})},addSimpleDependent:function(e){return Promise.reject({message:"This is not supported in the demo."})},addConsequentialDependent:function(e){return Promise.reject({message:"This is not supported in the demo."})},removeOption:function(e,t){return Promise.reject({message:"This is not supported in the demo."})},removeChoice:function(e){return Promise.reject({message:"This is not supported in the demo."})}},se=n(2),ae=n(5),ue="#4FC1E9",je="#00A8B5",de="#5978ab",le="#ff7373",be="#FFF",he="#000",Oe="#00171f",xe="0 5px 5px 0",me=ae.a.div(f||(f=Object(l.a)(["\n  height: 90vh;\n  padding: 20px 40px 100px;\n  overflow-y: auto;\n  box-sizing: border-box;\n\n  @media only screen and (max-width: 813px) {\n    padding: 20px 20px 60px;\n  }\n"]))),pe=Object(ae.a)(me)(g||(g=Object(l.a)(["\n  background: linear-gradient(45deg, "," 60%, #003042);\n  color: ",";\n"])),Oe,be),fe=Object(ae.a)(se.d)(S||(S=Object(l.a)(["\n  padding-top: 20px;\n  font-size: 48px;\n  font-weight: bold;\n  padding-bottom: 20px;\n"]))),ge=Object(ae.a)(se.d)(v||(v=Object(l.a)(["\n  display: inline-block;\n"]))),Se=Object(ae.a)(se.d)(C||(C=Object(l.a)(["\n  font-weight: bold;\n"]))),ve=Object(ae.a)(se.d)(y||(y=Object(l.a)(["\n  font-size: 24px;\n  font-weight: bold;\n  padding: 15px 0 5px;\n"]))),Ce=Object(ae.a)(se.d)(E||(E=Object(l.a)(["\n  font-size: 25px;\n  padding: 0 20px;\n\n  @media only screen and (max-width: 813px) {\n    font-size: 20px;\n  }\n"]))),ye=ae.a.div(A||(A=Object(l.a)(["\n  width: 60vw;\n  min-height: 200px;\n  color: ",";\n  padding: 50px;\n  text-align: left;\n  line-height: 20px;\n"])),he),Ee=Object(ae.a)(se.a)(k||(k=Object(l.a)(["\n  text-align: left;\n  font-size: 52px;\n  font-weight: bold;\n  margin-top: 30px;\n  margin-bottom: 50px;\n"]))),Ae=Object(ae.a)(se.a)(I||(I=Object(l.a)(["\n  text-align: center;\n  width: 100%;\n  font-size: 20px;\n  padding-top: 30px;\n"]))),ke=Object(ae.a)(se.a)(N||(N=Object(l.a)(["\n  margin: 0 10px;\n\n  @media only screen and (max-width: 813px) {\n    margin: 0;\n  }\n"]))),Ie=Object(ae.a)(se.a)(D||(D=Object(l.a)(["\n  margin-left: 10px;\n\n  @media only screen and (max-width: 813px) {\n    margin: 10px 0 0 0;\n  }\n"]))),Ne=Object(ae.a)(se.c)(T||(T=Object(l.a)(["\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  background: ",";\n  padding: 10px 20px;\n  width: 100%;\n  justify-content: flex-end;\n\n  @media only screen and (max-width: 813px) {\n    padding: 5px;\n  }\n"])),Oe),De=Object(ae.a)(se.c)(w||(w=Object(l.a)(["\n  position: absolute;\n  bottom: 20px;\n  right: 20px;\n"]))),Te=Object(ae.a)(se.b)(P||(P=Object(l.a)(["\n  background: ",";\n"])),ue),we=Object(ae.a)(se.b)(L||(L=Object(l.a)(["\n  background: ",";\n"])),je),Pe=n(6),Le=n(0),We=function(e){var t=e.name,n=e.onSuccess,r=e.exportType,i=Object(o.useState)(!1),s=Object(d.a)(i,2),a=s[0],u=s[1],j=Object(o.useState)(""),l=Object(d.a)(j,2),b=l[0],h=l[1],O=Object(o.useState)(),x=Object(d.a)(O,2),m=x[0],p=x[1],f=Object(o.useState)(!0),g=Object(d.a)(f,2),S=g[0],v=g[1],C=r===c.STORY;Object(o.useEffect)((function(){p("".concat(t,".txt"))}),[t]);var y=function(e){E("Could not export: "+e.message)},E=function(e){h(e),u(!0)};return Object(Le.jsxs)(se.a,{children:[Object(Le.jsxs)(se.d,{mb:20,children:["Exporting: ",t]}),Object(Le.jsx)(Pe.c,{children:"Path to export to"}),Object(Le.jsx)(Pe.b,{name:"path",defaultValue:m,placeholder:"".concat(t,".txt"),mb:20,onChange:function(e){return p(e.target.value)}}),C&&Object(Le.jsxs)(Pe.c,{mb:20,children:[Object(Le.jsx)(Pe.a,{id:"original",name:"original",onChange:function(){return v((function(e){return!e}))}}),"Export With Saved Progress"]}),Object(Le.jsx)(se.b,{bg:ue,onClick:C?function(){m?S?oe.exportStory(m,t).then(n,y):oe.exportStoryInProgress(m,t).then(n,y):E("Export path is required.")}:function(){m?oe.exportWork(m).then(n,y):E("Export path is required.")},children:"Submit"}),a&&Object(Le.jsx)(se.d,{color:le,children:b})]})},Fe=function(e){var t=e.onSuccess,n=e.importType,r=Object(o.useState)(!1),i=Object(d.a)(r,2),s=i[0],a=i[1],u=Object(o.useState)(""),j=Object(d.a)(u,2),l=j[0],b=j[1],h=Object(o.useState)(),O=Object(d.a)(h,2),x=O[0],m=O[1],p=function(e){b(e),a(!0)};return Object(Le.jsxs)(ye,{children:[Object(Le.jsx)(ve,{mb:20,children:"Import a story!"}),Object(Le.jsx)(Pe.c,{children:"Path of story file:"}),Object(Le.jsx)(Pe.b,{name:"path",placeholder:"./your-story.txt",mb:20,onChange:function(e){return m(e.target.value)}}),Object(Le.jsx)(se.b,{bg:ue,onClick:function(){if(x){var e;switch(n){case c.STORY:e=oe.importStory(x);break;case c.WORK:e=oe.importWork(x)}e.then(t,(function(e){return p("Could not import: "+e.message)}))}else p("File path is required.")},children:"Submit"}),s&&Object(Le.jsx)(se.d,{color:le,children:l})]})},Re=Object(ae.a)(se.b)(W||(W=Object(l.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  color: ",";\n  opacity: 0.5;\n  width: 100vw;\n  height: 100vh;\n"])),he),_e=ae.a.div(F||(F=Object(l.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: ",";\n  border: 2px solid ","20;\n  border-radius: 20;\n  max-height: 95vh;\n  max-width: 95vw;\n  overflow-y: auto;\n"])),be,he),Me=Object(ae.a)(se.b)(R||(R=Object(l.a)(["\n  background: ",";\n  position: absolute;\n  right: 0;\n"])),be),qe=Object(ae.a)(se.d)(_||(_=Object(l.a)(["\n  color: ",";\n  font-size: 25px;\n  padding: 5px;\n"])),he),Ye=function(e){var t=e.visible,n=e.onClose,c=e.children;return Object(Le.jsx)(Le.Fragment,{children:t&&Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(Re,{onClick:n}),Object(Le.jsxs)(_e,{children:[Object(Le.jsx)(Me,{onClick:n,children:Object(Le.jsx)(qe,{children:"X"})}),c]})]})})},Be=Object(ae.a)(se.a)(M||(M=Object(l.a)(["\n  padding: 20px;\n  min-width: ",";\n  border: 2px solid ",";\n  border-radius: 5px;\n  margin-right: 20px;\n  margin-bottom: 10px;\n  box-shadow: 2px 3px 5px ",";\n"])),(function(e){return e.minWidth?e.minWidth:"200px"}),je,Oe),Ue=Object(ae.a)(se.d)(q||(q=Object(l.a)(["\n  font-size: 19px;\n  font-weight: bold;\n  padding-top: 5px;\n  padding-bottom: 15px;\n"]))),ze=function(e){var t=e.title,n=e.minWidth,c=e.children;return Object(Le.jsxs)(Be,{minWidth:n,children:[Object(Le.jsx)(Ue,{children:t}),c]})},Qe=function(e){var t=e.onClick,n=e.text,c=e.margin;return Object(Le.jsx)(Le.Fragment,{children:Object(Le.jsx)(se.b,{onClick:t,bg:de,margin:c||"0",children:Object(Le.jsx)(se.d,{color:be,children:n})})})},Ve=function(e){var t=e.message,n=Object(o.useState)([]),r=Object(d.a)(n,2),i=r[0],s=r[1],a=Object(o.useState)(!1),u=Object(d.a)(a,2),j=u[0],l=u[1],b=Object(o.useState)(!1),O=Object(d.a)(b,2),x=O[0],m=O[1],p=Object(o.useState)(),f=Object(d.a)(p,2),g=f[0],S=f[1],v=Object(o.useState)(!1),C=Object(d.a)(v,2),y=C[0],E=C[1],A=Object(h.f)();Object(o.useEffect)((function(){oe.getAllStoryNames().then((function(e){return s(e)}),(function(e){return window.alert(e.message)}))}));var k=function(){oe.getAllStoryNames().then((function(e){return s(e)}),t.errorAlert)};return Object(Le.jsxs)(me,{children:[Object(Le.jsx)(Ee,{children:Object(Le.jsx)(se.d,{children:"Play stories in your library!"})}),Object(Le.jsxs)(se.c,{flexWrap:"wrap",children:[i.map((function(e){return Object(Le.jsx)(ze,{title:e,children:function(){switch(j){case!1:return Object(Le.jsxs)(se.c,{mb:"5px",children:[Object(Le.jsx)(se.b,{onClick:function(){return n=e,void oe.loadStory(n).then((function(){return A.push(Rt.PLAYER_PLAY)}),t.errorAlert);var n},mr:"5px",bg:ue,children:"Play"}),Object(Le.jsx)(Qe,{text:"Export",onClick:function(){return t=e,m(!0),void S(t);var t}})]});case!0:return Object(Le.jsx)(se.b,{onClick:function(){return n=e,void oe.removeStory(n).then(k,(function(e){return t.triggerAlert("Could not delete: "+e.message)}));var n},bg:le,children:"Delete"})}}()},e)})),0===i.length&&Object(Le.jsx)(Ae,{children:Object(Le.jsx)(se.d,{children:'You don\'t have any stories in your library. Import some by clicking "Manage Library." Then click "Import!"'})})]}),Object(Le.jsxs)(Ne,{children:[Object(Le.jsx)(we,{onClick:function(){return E(!0)},mr:"10px",children:"Import"}),Object(Le.jsx)(se.b,{onClick:function(){return l((function(e){return!e}))},padding:"15px 25px",bg:de,children:j?"Stop Managing Library":"Manage Library"})]}),g&&Object(Le.jsx)(Ye,{visible:x,onClose:function(){return m(!1)},children:Object(Le.jsx)(ye,{children:Object(Le.jsx)(We,{name:g,onSuccess:function(){t.triggerMessage("Exported successfully!"),m(!1)},exportType:c.STORY})})}),Object(Le.jsx)(Ye,{visible:y,onClose:function(){return E(!1)},children:Object(Le.jsx)(Fe,{onSuccess:function(){E(!1),k()},importType:c.STORY})})]})},Ke=n(22),He=n(28),Ge=["href"],Je=Object(ae.a)(se.d)(Y||(Y=Object(l.a)(["\n  color: ",";\n  font-weight: bold;\n  font-size: 20px;\n"])),be),Xe=function(e){var t=e.href,n=Object(He.a)(e,Ge),c=Object(h.f)();return Object(Le.jsx)(Je,Object(Ke.a)(Object(Ke.a)({},n),{},{onClick:function(){c.push(t)}}))},Ze=Object(ae.a)(se.c)(B||(B=Object(l.a)(["\n  height: 10vh;\n  padding: 20px 25px;\n  color: ",";\n  background-color: ",";\n  align-items: center;\n"])),ue,he),$e=function(){return Object(Le.jsxs)(Ze,{children:[Object(Le.jsx)(Xe,{href:Rt.HOME,fontSize:25,color:ue,children:"Saga"}),Object(Le.jsx)(se.a,{mx:"auto"}),Object(Le.jsx)(Xe,{marginRight:4,href:Rt.PLAYER_LIBRARY,children:"Play"}),Object(Le.jsx)(Xe,{href:Rt.WRITER_LIBRARY,children:"Write"})]})},et=["to"],tt=function(e){var t=e.to,n=Object(He.a)(e,et),c=Object(h.f)();return Object(Le.jsx)(se.b,Object(Ke.a)(Object(Ke.a)({},n),{},{onClick:function(){c.push(t)}}))},nt=Object(ae.a)(se.c)(U||(U=Object(l.a)(["\n  padding: 20vh 80px 80px 40px;\n  height: 100%;\n  flex-direction: column;\n  justify-content: center;\n\n  @media only screen and (max-width: 813px) {\n    padding: 5px;\n  }\n"]))),ct=Object(ae.a)(se.a)(z||(z=Object(l.a)(["\n  font-size: 52px;\n  font-weight: bold;\n\n  @media only screen and (max-width: 813px) {\n    margin-bottom: 50px;\n  }\n"]))),rt=Object(ae.a)(se.d)(Q||(Q=Object(l.a)(["\n  padding-left: 100px;\n\n  @media only screen and (max-width: 813px) {\n    font-size: 42px;\n    padding-left: 0;\n  }\n"]))),it=Object(ae.a)(se.d)(V||(V=Object(l.a)(["\n  display: inline-block;\n  font-style: italic;\n"]))),ot=Object(ae.a)(se.c)(K||(K=Object(l.a)(["\n  height: 100px;\n\n  @media only screen and (max-width: 813px) {\n    height: 75px;\n  }\n"]))),st=function(){return Object(Le.jsx)(pe,{children:Object(Le.jsxs)(nt,{children:[Object(Le.jsxs)(ct,{children:[Object(Le.jsxs)(se.d,{children:["Welcome to ",Object(Le.jsx)(ge,{color:ue,children:"Saga"}),","]}),Object(Le.jsxs)(rt,{children:["where you can ",Object(Le.jsx)(it,{color:ue,children:"play"})," and"," ",Object(Le.jsx)(it,{color:je,children:"write"})," interactive stories."]})]}),Object(Le.jsx)(se.a,{my:"auto"}),Object(Le.jsxs)(ot,{children:[Object(Le.jsx)(tt,{to:Rt.PLAYER_LIBRARY,bg:ue,children:Object(Le.jsx)(Ce,{children:"Play a story!"})}),Object(Le.jsx)(se.a,{width:15}),Object(Le.jsx)(tt,{to:Rt.WRITER_LIBRARY,bg:je,children:Object(Le.jsx)(Ce,{children:"Write a new masterpiece!"})})]})]})})},at=Object(ae.a)(se.c)(H||(H=Object(l.a)(["\n  border: 1px solid ",";\n  border-radius: 20;\n  padding: 5px 0 5px 15px;\n  margin-bottom: 10px;\n"])),he),ut=Object(ae.a)(se.b)(G||(G=Object(l.a)(["\n  padding: 0;\n  background: 0;\n"]))),jt=function(e){var t=e.visible,n=e.message,c=e.warn,r=e.onClose;return Object(Le.jsx)(Le.Fragment,{children:t&&Object(Le.jsx)(Le.Fragment,{children:Object(Le.jsxs)(at,{bg:c?le:be,children:[Object(Le.jsx)(se.d,{my:"auto",children:n}),Object(Le.jsx)(se.a,{mx:"auto"}),Object(Le.jsx)(ut,{onClick:r,color:he,children:"X"})]})})})},dt="Untitled",lt=function(e){var t=e.onSuccess,n=e.message,c=Object(o.useState)(dt),r=Object(d.a)(c,2),i=r[0],s=r[1];return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(ve,{children:"Start your next story!"}),Object(Le.jsx)(Pe.b,{name:"name",defaultValue:dt,placeholder:"Name of new work",onChange:function(e){return s(e.target.value)},my:"10px"}),Object(Le.jsx)(Te,{onClick:function(){oe.startNewWork(i).then(t,n.errorAlert)},children:"Create New Work"})]})},bt=function(e){var t=e.currentName,n=e.onSuccess,c=e.message,r=Object(o.useState)(t),i=Object(d.a)(r,2),s=i[0],a=i[1];return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsxs)(ve,{children:["Rename ",t]}),Object(Le.jsx)(Pe.b,{name:"newName",defaultValue:t,placeholder:"New Name",onChange:function(e){return a(e.target.value)},my:"10px"}),Object(Le.jsx)(Te,{onClick:function(){oe.renameWork(t,s).then(n,c.errorAlert)},children:"Rename"})]})},ht=function(e){var t=e.message,n=Object(o.useState)([]),r=Object(d.a)(n,2),i=r[0],s=r[1],a=Object(o.useState)(!1),u=Object(d.a)(a,2),j=u[0],l=u[1],b=Object(o.useState)(!1),O=Object(d.a)(b,2),x=O[0],m=O[1],p=Object(o.useState)(!1),f=Object(d.a)(p,2),g=f[0],S=f[1],v=Object(o.useState)(!1),C=Object(d.a)(v,2),y=C[0],E=C[1],A=Object(h.f)();Object(o.useEffect)((function(){oe.getAllWorkNames().then((function(e){return s(e)})).catch((function(e){return window.alert(e.message)}))}));var k=function(){oe.getAllWorkNames().then((function(e){return s(e)}),t.errorAlert)},I=function(){m(!1),k()};return Object(Le.jsxs)(me,{children:[Object(Le.jsx)(Ee,{children:Object(Le.jsx)(se.d,{children:"Write your next story!"})}),Object(Le.jsxs)(se.c,{flexWrap:"wrap",children:[i.map((function(e){return Object(Le.jsx)(ze,{title:e,children:function(){switch(j){case!1:return Object(Le.jsx)(se.b,{onClick:function(){return n=e,void oe.loadWork(n).then((function(){return A.push(Rt.WRITER_EDIT)}),t.errorAlert);var n},bg:ue,mb:"5px",children:"Edit"});case!0:return Object(Le.jsxs)(se.c,{children:[Object(Le.jsx)(Ye,{visible:x,onClose:function(){return m(!1)},children:Object(Le.jsx)(ye,{children:Object(Le.jsx)(bt,{currentName:e,onSuccess:I,message:t})})}),Object(Le.jsx)(Qe,{text:"Rename",onClick:function(){return m(!0)},margin:"0 5px 0 0"}),Object(Le.jsx)(se.b,{onClick:function(){return n=e,void oe.removeWork(n).then(k,(function(e){return t.triggerAlert("Could not delete: "+e.message)}));var n},bg:le,children:"Delete"})]})}}()},e)})),0===i.length&&Object(Le.jsx)(Ae,{children:Object(Le.jsx)(se.d,{children:"You don't have any works in your library. Create a new one!"})})]}),Object(Le.jsxs)(Ne,{children:[Object(Le.jsx)(we,{onClick:function(){return S(!0)},children:"Start New"}),Object(Le.jsx)(we,{onClick:function(){return E(!0)},margin:"0 10px",children:"Import"}),Object(Le.jsx)(se.b,{onClick:function(){return l((function(e){return!e}))},padding:"15px 25px",bg:de,children:j?"Stop Managing Library":"Manage Library"})]}),Object(Le.jsx)(Ye,{visible:g,onClose:function(){return S(!1)},children:Object(Le.jsx)(ye,{children:Object(Le.jsx)(lt,{onSuccess:function(){S(!1),k()},message:t})})}),Object(Le.jsx)(Ye,{visible:y,onClose:function(){return E(!1)},children:Object(Le.jsx)(Fe,{onSuccess:function(){E(!1),k()},importType:c.WORK})})]})},Ot=function(e){var t,n,c=e.decision;return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(Se,{children:"Type"}),Object(Le.jsx)(se.d,{children:c.type.toString()}),Object(Le.jsx)(Se,{children:"Description"}),Object(Le.jsx)(se.d,{children:c.description}),Object(Le.jsx)(Se,{children:"Outcome"}),function(){switch(c.type){case r.DEPENDENT:return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsxs)(se.d,{children:["if ",c.dependency," is below ",c.threshold,": Choice #",c.outcome1Id]}),Object(Le.jsxs)(se.d,{children:["if ",c.dependency," is above ",c.threshold,": Choice #",c.outcome2Id]})]});default:return Object(Le.jsxs)(se.d,{children:["Choice #",c.outcome1Id]})}}(),Object(Le.jsx)(Se,{children:"Consequences"}),null===(t=c.consequences)||void 0===t?void 0:t.map((function(e,t){var n;switch(e.type){case i.ADD:n="Add ".concat(e.var," to ").concat(e.status);break;case i.SET:n="Set ".concat(e.status," to ").concat(e.var)}return Object(Le.jsx)(se.d,{children:n},t)})),0===(null===(n=c.consequences)||void 0===n?void 0:n.length)&&Object(Le.jsx)(se.d,{children:"None"})]})},xt=function(e){var t=e.choice,n=e.option,c=e.decision,r=e.onSuccess,i=e.message;return Object(Le.jsxs)(ze,{title:"Option #".concat(n),children:[Object(Le.jsx)(Ot,{decision:c}),Object(Le.jsx)(se.b,{onClick:function(){oe.removeOption(t,n).then(r,i.errorAlert)},mt:"10px",bg:le,children:"Remove Option"})]})},mt=function(e){var t=e.onDescriptionChange,n=e.onOutcomeIdChange,c=e.choices;return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(Se,{children:"Description"}),Object(Le.jsx)(Pe.b,{name:"description",placeholder:"Description",my:"5px",onChange:function(e){return t(e.target.value)}}),Object(Le.jsx)(Se,{children:"Outcome"}),Object(Le.jsxs)(se.c,{alignItems:"center",children:[Object(Le.jsx)(se.d,{mr:"5px",children:"Choice #"}),Object(Le.jsx)(Pe.d,{name:"outcomeId",onChange:function(e){n(Number(e.currentTarget.value))},my:"5px",minWidth:"50px",children:c.map((function(e){return Object(Le.jsx)("option",{children:e.id},e.id)}))})]})]})},pt=function(e){var t=e.onSuccess,n=e.choiceId,c=e.choices,r=Object(o.useState)(),i=Object(d.a)(r,2),s=i[0],a=i[1],u=Object(o.useState)(0),j=Object(d.a)(u,2),l=j[0],b=j[1],h=Object(o.useState)(),O=Object(d.a)(h,2),x=O[0],m=O[1],p=Object(o.useState)(),f=Object(d.a)(p,2),g=f[0],S=f[1],v=function(e){m(e),S(!0)};return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(mt,{onDescriptionChange:a,onOutcomeIdChange:b,choices:c}),g&&Object(Le.jsx)(se.d,{color:le,children:x}),Object(Le.jsx)(Te,{onClick:function(){s?oe.addSimpleDecision({description:s,choiceId:n,outcomeId:l}).then(t,(function(e){return v(e.message)})):v("All fields are required!")},mr:"5px",children:"Submit"})]})},ft=function(e,t,n){var c=e.target.value;c.includes(".")?t():n(Number(c))},gt=function(e){var t=e.onChange,n=e.statuses,c=e.feedback,r=Object(o.useState)(i.ADD),s=Object(d.a)(r,2),a=s[0],u=s[1],j=Object(o.useState)(0),l=Object(d.a)(j,2),b=l[0],h=l[1],O=Object(o.useState)(n[0].name),x=Object(d.a)(O,2),m=x[0],p=x[1];Object(o.useEffect)((function(){m&&t("".concat(a," ").concat(b," ").concat(m))}),[t,a,b,m]);var f=function(){c.giveFeedback("Must be an integer!")},g=function(e){c.hideFeedback(),h(e)};return Object(Le.jsxs)(se.c,{flexWrap:"wrap",children:[Object(Le.jsxs)(se.a,{minWidth:"150px",children:[Object(Le.jsx)(Se,{children:"Type"}),Object(Le.jsxs)(Pe.d,{name:"choiceId",onChange:function(e){return u(e.currentTarget.value)},children:[Object(Le.jsx)("option",{children:i.ADD}),Object(Le.jsx)("option",{children:i.SET})]})]}),Object(Le.jsxs)(ke,{minWidth:"150px",children:[Object(Le.jsx)(Se,{children:a===i.ADD?"Amount to Add":"Number to Set To"}),Object(Le.jsx)(Pe.b,{name:"val",placeholder:"0",type:"number",value:b,onChange:function(e){ft(e,f,g)}})]}),Object(Le.jsxs)(se.a,{minWidth:"150px",children:[Object(Le.jsx)(Se,{children:"Status to Impact"}),Object(Le.jsx)(Pe.d,{name:"choiceId",onChange:function(e){return p(e.currentTarget.value)},children:n.map((function(e){return Object(Le.jsx)("option",{children:e.name},e.name)}))})]})]})},St=function(e){var t=e.onSuccess,n=e.choiceId,c=e.choices,r=e.statuses,i=Object(o.useState)(),s=Object(d.a)(i,2),a=s[0],u=s[1],l=Object(o.useState)(0),b=Object(d.a)(l,2),h=b[0],O=b[1],x=Object(o.useState)([]),m=Object(d.a)(x,2),p=m[0],f=m[1],g=Object(o.useState)(),S=Object(d.a)(g,2),v=S[0],C=S[1],y=Object(o.useState)(),E=Object(d.a)(y,2),A=E[0],k=E[1],I=Object(o.useState)(),N=Object(d.a)(I,2),D=N[0],T=N[1],w={giveFeedback:function(e){k(e),T(!0)},hideFeedback:function(){return T(!1)}};return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(mt,{onDescriptionChange:u,onOutcomeIdChange:O,choices:c}),Object(Le.jsx)(Se,{children:"Consequences"}),p.map((function(e,t){return Object(Le.jsx)(se.d,{children:e},t)})),Object(Le.jsxs)(se.c,{alignItems:"flex-end",flexWrap:"wrap",mt:"5px",children:[Object(Le.jsx)(gt,{onChange:C,statuses:r,feedback:w}),Object(Le.jsx)(Ie,{children:Object(Le.jsx)(Te,{onClick:function(){v?(f((function(e){return[].concat(Object(j.a)(e),[v])})),C(void 0)):w.giveFeedback("All consequence fields are required!")},children:"Add"})})]}),Object(Le.jsx)("br",{}),D&&Object(Le.jsx)(se.d,{color:le,children:A}),Object(Le.jsx)(Te,{onClick:function(){a?oe.addConsequentialDecision({description:a,choiceId:n,outcomeId:h,consequences:p}).then(t,(function(e){return w.giveFeedback(e.message)})):w.giveFeedback("All fields are required!")},mr:"5px",children:"Submit"})]})},vt=function(e){var t=e.onDescriptionChange,n=e.onDependencyChange,c=e.onThresholdChange,r=e.onOutcomeBelowIdChange,i=e.onOutcomeMeetsIdChange,o=e.choices,s=e.statuses,a=e.feedback,u=function(){a.giveFeedback("Must be an integer!")},j=function(e){a.hideFeedback(),c(e)};return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(Se,{children:"Description"}),Object(Le.jsx)(Pe.b,{name:"description",placeholder:"Description",my:"5px",onChange:function(e){return t(e.target.value)}}),Object(Le.jsx)(Se,{children:"Status the decision is dependent on"}),Object(Le.jsx)(Pe.d,{name:"dependency",onChange:function(e){return n(e.currentTarget.value)},children:s.map((function(e){return Object(Le.jsx)("option",{children:e.name},e.name)}))}),Object(Le.jsx)(Se,{children:"Status Value Threshold"}),Object(Le.jsx)(Pe.b,{name:"threshold",defaultValue:0,placeholder:"0",type:"number",onChange:function(e){ft(e,u,j)}}),Object(Le.jsx)(Se,{children:"Outcome If Status Is Below Threshold"}),Object(Le.jsxs)(se.c,{alignItems:"center",children:[Object(Le.jsx)(se.d,{mr:"5px",children:"Choice #"}),Object(Le.jsx)(Pe.d,{name:"outcomeBelowId",onChange:function(e){r(Number(e.currentTarget.value))},my:"5px",minWidth:"50px",children:o.map((function(e){return Object(Le.jsx)("option",{children:e.id},e.id)}))})]}),Object(Le.jsx)(Se,{children:"Outcome If Status Meets Threshold"}),Object(Le.jsxs)(se.c,{alignItems:"center",children:[Object(Le.jsx)(se.d,{mr:"5px",children:"Choice #"}),Object(Le.jsx)(Pe.d,{name:"outcomeMeetsId",onChange:function(e){i(Number(e.currentTarget.value))},my:"5px",minWidth:"50px",children:o.map((function(e){return Object(Le.jsx)("option",{children:e.id},e.id)}))})]})]})},Ct=function(e){var t=e.onSuccess,n=e.choiceId,c=e.choices,r=e.statuses,i=Object(o.useState)(),s=Object(d.a)(i,2),a=s[0],u=s[1],j=Object(o.useState)(r[0].name),l=Object(d.a)(j,2),b=l[0],h=l[1],O=Object(o.useState)(0),x=Object(d.a)(O,2),m=x[0],p=x[1],f=Object(o.useState)(0),g=Object(d.a)(f,2),S=g[0],v=g[1],C=Object(o.useState)(0),y=Object(d.a)(C,2),E=y[0],A=y[1],k=Object(o.useState)(),I=Object(d.a)(k,2),N=I[0],D=I[1],T=Object(o.useState)(),w=Object(d.a)(T,2),P=w[0],L=w[1],W={giveFeedback:function(e){D(e),L(!0)},hideFeedback:function(){return L(!1)}};return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(vt,{onDescriptionChange:u,onDependencyChange:h,onThresholdChange:p,onOutcomeBelowIdChange:v,onOutcomeMeetsIdChange:A,choices:c,statuses:r,feedback:W}),P&&Object(Le.jsx)(se.d,{color:le,children:N}),Object(Le.jsx)(Te,{onClick:function(){a?oe.addSimpleDependent({description:a,choiceId:n,dependency:b,threshold:m,outcomeBelowId:S,outcomeMeetsId:E}).then(t,(function(e){return W.giveFeedback(e.message)})):W.giveFeedback("All fields are required!")},mr:"5px",children:"Submit"})]})},yt=function(e){var t=e.onSuccess,n=e.choiceId,c=e.choices,r=e.statuses,i=Object(o.useState)(),s=Object(d.a)(i,2),a=s[0],u=s[1],l=Object(o.useState)(r[0].name),b=Object(d.a)(l,2),h=b[0],O=b[1],x=Object(o.useState)(0),m=Object(d.a)(x,2),p=m[0],f=m[1],g=Object(o.useState)(0),S=Object(d.a)(g,2),v=S[0],C=S[1],y=Object(o.useState)(0),E=Object(d.a)(y,2),A=E[0],k=E[1],I=Object(o.useState)([]),N=Object(d.a)(I,2),D=N[0],T=N[1],w=Object(o.useState)(),P=Object(d.a)(w,2),L=P[0],W=P[1],F=Object(o.useState)(),R=Object(d.a)(F,2),_=R[0],M=R[1],q=Object(o.useState)(),Y=Object(d.a)(q,2),B=Y[0],U=Y[1],z={giveFeedback:function(e){M(e),U(!0)},hideFeedback:function(){return U(!1)}};return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(vt,{onDescriptionChange:u,onDependencyChange:O,onThresholdChange:f,onOutcomeBelowIdChange:C,onOutcomeMeetsIdChange:k,choices:c,statuses:r,feedback:z}),Object(Le.jsx)(Se,{children:"Consequences"}),D.map((function(e,t){return Object(Le.jsx)(se.d,{children:e},t)})),Object(Le.jsxs)(se.c,{alignItems:"flex-end",flexWrap:"wrap",mt:"5px",children:[Object(Le.jsx)(gt,{onChange:W,statuses:r,feedback:z}),Object(Le.jsx)(Ie,{children:Object(Le.jsx)(Te,{onClick:function(){L?(T((function(e){return[].concat(Object(j.a)(e),[L])})),W(void 0)):z.giveFeedback("All consequence fields are required!")},children:"Add"})})]}),Object(Le.jsx)("br",{}),B&&Object(Le.jsx)(se.d,{color:le,children:_}),Object(Le.jsx)(Te,{onClick:function(){a?oe.addConsequentialDependent({description:a,choiceId:n,dependency:h,threshold:p,outcomeBelowId:v,outcomeMeetsId:A,consequences:D}).then(t,(function(e){return z.giveFeedback(e.message)})):z.giveFeedback("All fields are required!")},mr:"5px",children:"Submit"})]})};!function(e){e[e.ADD_SIMPLE=0]="ADD_SIMPLE",e[e.ADD_CONSEQUENTIAL=1]="ADD_CONSEQUENTIAL",e[e.ADD_SIMPLE_DEPENDENT=2]="ADD_SIMPLE_DEPENDENT",e[e.ADD_CONSEQUENTIAL_DEPENDENT=3]="ADD_CONSEQUENTIAL_DEPENDENT",e[e.NONE=4]="NONE"}(J||(J={}));var Et,At,kt=function(e){var t=e.choice,n=e.choices,c=e.decisions,r=e.statuses,i=e.onSuccess,s=e.message,a=Object(o.useState)(!1),u=Object(d.a)(a,2),j=u[0],l=u[1],b=t.options.length>0,h=Object(o.useState)(J.NONE),O=Object(d.a)(h,2),x=O[0],m=O[1],p=function(){i(),m(J.NONE)};return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsxs)(ze,{title:"Choice #".concat(t.id),minWidth:"350px",children:[t.options.map((function(e){var t=c[e.decision];return Object(Le.jsx)(se.d,{children:"Option #".concat(e.id,": ").concat(t.description," => Choice #").concat(t.outcome1Id," ").concat(t.outcome2Id>-1?"or #".concat(t.outcome2Id):"")},e.id)})),!b&&Object(Le.jsx)(se.d,{children:"No options"}),Object(Le.jsx)(se.a,{textAlign:"right",mt:"15px",mb:"-10px",children:Object(Le.jsx)(Qe,{text:"Edit",onClick:function(){return l(!0)}})})]}),Object(Le.jsx)(Ye,{visible:j,onClose:function(){return l(!1)},children:Object(Le.jsxs)(ye,{children:[Object(Le.jsxs)(ve,{children:["Edit Choice #",t.id]}),Object(Le.jsx)(se.a,{width:"80vw",children:Object(Le.jsxs)(se.c,{mt:"20px",flexWrap:"wrap",children:[t.options.map((function(e){return Object(Le.jsx)(xt,{choice:t.id,option:e.id,decision:c[e.decision],onSuccess:i,message:s},e.id)})),!b&&Object(Le.jsx)(se.d,{children:"No options"})]})}),Object(Le.jsx)(se.a,{children:function(){switch(x){case J.ADD_SIMPLE:return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(ve,{children:"Add Simple Option"}),Object(Le.jsx)(pt,{onSuccess:p,choiceId:t.id,choices:n}),Object(Le.jsx)(Qe,{text:"Cancel",onClick:function(){return m(J.NONE)}})]});case J.ADD_CONSEQUENTIAL:return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(ve,{children:"Add Consequential Option"}),Object(Le.jsx)(St,{onSuccess:p,choiceId:t.id,choices:n,statuses:r}),Object(Le.jsx)(Qe,{text:"Cancel",onClick:function(){return m(J.NONE)}})]});case J.ADD_SIMPLE_DEPENDENT:return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(ve,{children:"Add Simple Dependent Decision"}),Object(Le.jsx)(Ct,{onSuccess:p,choiceId:t.id,choices:n,statuses:r}),Object(Le.jsx)(Qe,{text:"Cancel",onClick:function(){return m(J.NONE)}})]});case J.ADD_CONSEQUENTIAL_DEPENDENT:return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(ve,{children:"Add Consequential Dependent Decision"}),Object(Le.jsx)(yt,{onSuccess:p,choiceId:t.id,choices:n,statuses:r}),Object(Le.jsx)(Qe,{text:"Cancel",onClick:function(){return m(J.NONE)}})]});case J.NONE:default:return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(Se,{mb:"5px",children:"Add Option"}),Object(Le.jsx)(Qe,{text:"Add Simple Option",margin:xe,onClick:function(){return m(J.ADD_SIMPLE)}}),Object(Le.jsx)(Qe,{text:"Add Consequential Option",margin:xe,onClick:function(){return m(J.ADD_CONSEQUENTIAL)}}),Object(Le.jsx)(Qe,{text:"Add Simple Dependent Option",margin:xe,onClick:function(){return m(J.ADD_SIMPLE_DEPENDENT)}}),Object(Le.jsx)(Qe,{text:"Add Consequential Dependent Option",margin:xe,onClick:function(){return m(J.ADD_CONSEQUENTIAL_DEPENDENT)}})]})}}()}),Object(Le.jsx)(se.a,{textAlign:"right",mt:"10px",children:Object(Le.jsx)(se.b,{onClick:function(){oe.removeChoice(t.id).then(i,s.errorAlert)},bg:le,children:"Remove Choice"})})]})})]})},It=Object(ae.a)(Qe)(Et||(Et=Object(l.a)(["\n  display: inline-block;\n"]))),Nt=function(e){var t=e.message,n=e.title,c=e.onFinish,r=Object(o.useState)(!1),i=Object(d.a)(r,2),s=i[0],a=i[1],u=Object(o.useState)(n),j=Object(d.a)(u,2),l=j[0],b=j[1];return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(ve,{display:"inline-block",mr:"15px",children:"Story Title:"}),s?Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(Pe.b,{name:"name",defaultValue:n,placeholder:"Untitled",display:"inline-block",width:"40%",onChange:function(e){return b(e.target.value)}}),Object(Le.jsx)(Te,{onClick:function(){oe.setName(l).then((function(){c(),a(!1)}),t.errorAlert)},display:"inline-block",ml:"15px",mr:"8px",children:"Submit"})]}):Object(Le.jsx)(ve,{display:"inline-block",mr:"15px",children:n}),Object(Le.jsx)(It,{onClick:function(){a((function(e){return!e}))},text:s?"Cancel":"Change Title"})]})},Dt=function(e){var t=e.updateName,n=e.onSuccess,c=Object(o.useState)(),r=Object(d.a)(c,2),i=r[0],s=r[1],a=Object(o.useState)(0),u=Object(d.a)(a,2),j=u[0],l=u[1],b=Object(o.useState)(),h=Object(d.a)(b,2),O=h[0],x=h[1],m=Object(o.useState)(),p=Object(d.a)(m,2),f=p[0],g=p[1];Object(o.useEffect)((function(){t&&s(t)}),[t]);var S=function(e){x(e),g(!0)},v=function(){S("Must be an integer!")},C=function(e){g(!1),l(e)};return Object(Le.jsxs)(Le.Fragment,{children:[!t&&Object(Le.jsx)(Pe.b,{name:"name",placeholder:"Status Name",onChange:function(e){return s(e.target.value)},mb:"7px"}),Object(Le.jsx)(Pe.b,{name:"val",defaultValue:0,placeholder:"0",type:"number",onChange:function(e){ft(e,v,C)},mb:"7px"}),f&&Object(Le.jsx)(se.d,{color:le,children:O}),Object(Le.jsx)(Te,{onClick:function(){i?oe.addStatus(i,j).then(n,(function(e){return S(e.message)})):S("All fields are required!")},mr:"5px",children:"Submit"})]})},Tt=function(e){var t=e.status,n=e.updateStory,c=e.message,r=Object(o.useState)(!1),i=Object(d.a)(r,2),s=i[0],a=i[1];return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsxs)(ze,{title:t.name,children:[Object(Le.jsxs)(se.d,{children:["Initial Value: ",t.value]}),Object(Le.jsx)(se.a,{textAlign:"right",mt:"15px",mb:"-10px",children:Object(Le.jsx)(Qe,{text:"Edit",onClick:function(){return a(!0)}})})]}),Object(Le.jsx)(Ye,{visible:s,onClose:function(){return a(!1)},children:Object(Le.jsxs)(ye,{children:[Object(Le.jsxs)(ve,{children:["Update Status: ",t.name]}),Object(Le.jsx)(Se,{my:"10px",children:"Update Initial Value"}),Object(Le.jsx)(Dt,{updateName:t.name,onSuccess:n}),Object(Le.jsx)("br",{}),Object(Le.jsx)(De,{children:Object(Le.jsx)(se.b,{onClick:function(){oe.removeStatus(t.name).then(null,c.errorAlert)},bg:le,children:"Remove Status"})})]})})]})},wt=function(e){var t=e.choices,n=e.onSuccess,c=e.message,r=Object(o.useState)(-1),i=Object(d.a)(r,2),s=i[0],a=i[1];return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(Se,{children:"Initial Choice"}),Object(Le.jsxs)(se.c,{alignItems:"center",children:[Object(Le.jsx)(se.d,{mr:"5px",children:"Choice #"}),Object(Le.jsx)(Pe.d,{name:"choice",onChange:function(e){a(Number(e.currentTarget.value))},my:"5px",minWidth:"50px",children:t.map((function(e){return Object(Le.jsx)("option",{children:e.id},e.id)}))})]}),Object(Le.jsx)(Te,{onClick:function(){oe.setInitial(s).then(n,c.errorAlert)},mr:"5px",children:"Set Initial Choice"})]})};!function(e){e[e.ADD_STATUS=0]="ADD_STATUS",e[e.SET_INITIAL=1]="SET_INITIAL",e[e.NONE=2]="NONE"}(At||(At={}));var Pt,Lt,Wt,Ft,Rt,_t={name:"",statuses:[],choices:[],decisions:[],choice:-1},Mt=function(e){var t=e.message,n=Object(o.useState)(),r=Object(d.a)(n,2),i=r[0],s=r[1],a=Object(o.useState)(_t),u=Object(d.a)(a,2),j=u[0],l=u[1],b=Object(o.useState)("Loading..."),h=Object(d.a)(b,2),O=h[0],x=h[1],m=Object(o.useState)(At.NONE),p=Object(d.a)(m,2),f=p[0],g=p[1],S=Object(o.useState)(!1),v=Object(d.a)(S,2),C=v[0],y=v[1];Object(o.useEffect)((function(){var e=function(){oe.quitWork().then((function(){}),t.errorAlert)};return window.addEventListener("unload",e),function(){return window.removeEventListener("unload",e)}})),Object(o.useEffect)((function(){oe.getCurrentWork().then((function(e){""!==e.name?(l(e),oe.getCurrentWorkName().then((function(e){return s(e)}),t.errorAlert)):(s(void 0),x("Oops! Looks like you haven't loaded a story to edit!"))}),t.errorAlert)}),[t]);var E=function(){oe.getCurrentStatuses().then((function(e){return l((function(t){return{name:t.name,statuses:e,choices:t.choices,decisions:t.decisions,choice:t.choice}}))}),t.errorAlert),g(At.NONE)},A=function(){oe.getInitialChoice().then((function(e){return l((function(t){return{name:t.name,statuses:t.statuses,choices:t.choices,decisions:t.decisions,choice:e}}))}),t.errorAlert),g(At.NONE)},k=function(){oe.getCurrentChoices().then((function(e){oe.getCurrentDecisions().then((function(t){l((function(n){return{name:n.name,statuses:n.statuses,choices:e,decisions:t,choice:n.choice}}))}),t.errorAlert)}),t.errorAlert),g(At.NONE)},I=function(){oe.addChoice().then(k,t.errorAlert)};return i?Object(Le.jsxs)(me,{children:[Object(Le.jsx)(fe,{children:"Story Editor"}),Object(Le.jsxs)(ve,{children:["Work: ",i]}),Object(Le.jsx)(Nt,{title:j.name,message:t,onFinish:function(){oe.getCurrentWork().then((function(e){return l(e)}),t.errorAlert)}}),Object(Le.jsx)(ve,{children:"Statuses"}),Object(Le.jsx)(se.c,{flexWrap:"wrap",children:j.statuses.map((function(e){return Object(Le.jsx)(Tt,{status:e,updateStory:E,message:t},e.name)}))}),Object(Le.jsx)(ve,{children:"Choices"}),Object(Le.jsx)(se.c,{flexWrap:"wrap",children:j.choices.map((function(e){return Object(Le.jsx)(kt,{choice:e,choices:j.choices,decisions:j.decisions,statuses:j.statuses,onSuccess:k,message:t},e.id)}))}),Object(Le.jsxs)(ve,{children:["Initial Choice: ",j.choice]}),Object(Le.jsx)(ve,{children:"Edit"}),Object(Le.jsxs)(se.a,{children:[function(){switch(f){case At.ADD_STATUS:return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(ve,{children:"Add Status"}),Object(Le.jsx)(Dt,{onSuccess:E})]});case At.SET_INITIAL:return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(ve,{children:"Set Initial Choice"}),Object(Le.jsx)(wt,{choices:j.choices,onSuccess:A,message:t})]});case At.NONE:default:return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(Qe,{text:"Add Status",margin:xe,onClick:function(){return g(At.ADD_STATUS)}}),Object(Le.jsx)(Qe,{text:"Add Choice",margin:xe,onClick:I}),Object(Le.jsx)(Qe,{text:"Set Initial Choice",margin:xe,onClick:function(){return g(At.SET_INITIAL)}})]})}}(),f!==At.NONE&&Object(Le.jsx)(Qe,{text:"Cancel",onClick:function(){return g(At.NONE)}})]}),Object(Le.jsx)(ve,{children:"Export"}),C?Object(Le.jsxs)(se.a,{mr:"10px",width:"70%",children:[Object(Le.jsx)(We,{name:i,onSuccess:function(){t.triggerMessage("Exported successfully!"),y(!1)},exportType:c.WORK}),Object(Le.jsx)(Qe,{text:"Cancel",onClick:function(){return y(!1)},margin:"10px 0 0 0"})]}):Object(Le.jsxs)(se.c,{children:[Object(Le.jsx)(Qe,{text:"Export",onClick:function(){y(!0)},margin:xe}),Object(Le.jsx)(Qe,{text:"Export to Player",onClick:function(){oe.exportToPlayer().then((function(){return t.triggerMessage("Successfully exported!")}),t.errorAlert)},margin:xe})]})]}):Object(Le.jsxs)(me,{children:[Object(Le.jsx)(fe,{children:O}),Object(Le.jsx)(tt,{to:Rt.WRITER_LIBRARY,bg:je,children:Object(Le.jsx)(Ce,{children:"Go back to your library!"})})]})},qt=Object(ae.a)(se.a)(Pt||(Pt=Object(l.a)(["\n  position: absolute;\n  bottom: 50px;\n  right: 50px;\n"]))),Yt=Object(ae.a)(se.d)(Lt||(Lt=Object(l.a)(["\n  font-size: 16px;\n  line-height: 22px;\n"]))),Bt=Object(ae.a)(Yt)(Wt||(Wt=Object(l.a)(["\n  padding-left: 20px;\n  padding-bottom: 5px;\n"]))),Ut=function(e){var t=e.message,n=Object(o.useState)(),c=Object(d.a)(n,2),r=c[0],i=c[1],s=Object(o.useState)([]),a=Object(d.a)(s,2),u=a[0],l=a[1],b=Object(o.useState)([]),h=Object(d.a)(b,2),O=h[0],x=h[1],m=Object(o.useState)("Loading..."),p=Object(d.a)(m,2),f=p[0],g=p[1];Object(o.useEffect)((function(){var e=function(){oe.quitStory().then((function(){}),t.errorAlert)};return window.addEventListener("unload",e),function(){return window.removeEventListener("unload",e)}})),Object(o.useEffect)((function(){oe.getCurrentStory().then((function(e){""!==e.name?(i(e),0===u.length&&oe.getCurrentChoice().then((function(e){return l((function(t){return[].concat(Object(j.a)(t),[e])}))}),t.errorAlert)):g("Oops! Looks like this story doesn't exist. Load a story from your library!")}),t.errorAlert)}),[t,u.length]);var S=function(){oe.getCurrentStory().then((function(e){return i(e)}),t.errorAlert)},v=function(){oe.getCurrentChoice().then((function(e){return l((function(t){return[].concat(Object(j.a)(t),[e])}))}),t.errorAlert)};return Object(Le.jsxs)(me,{children:[function(){switch(r){case void 0:return Object(Le.jsx)(fe,{children:f});default:var e=r.choices[r.choice].options;return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(fe,{children:r.name}),u.map((function(e,t){return Object(Le.jsxs)("div",{children:[Object(Le.jsx)(Yt,{children:e}),t<O.length&&Object(Le.jsxs)(Bt,{children:["Chose: ",O[t]]})]},e+t)})),e.length>0&&Object(Le.jsxs)(se.c,{mt:10,children:[Object(Le.jsxs)(Yt,{my:"auto",mr:10,children:["Choose:"," "]}),r&&r.choices[r.choice].options.map((function(e){return Object(Le.jsx)(Te,{onClick:function(){return n=e.id,void(r&&(x((function(e){return[].concat(Object(j.a)(e),[r.decisions[n].description])})),oe.choose(n).then(S,t.errorAlert),v()));var n},mr:"10px",children:r.decisions[e.decision].description},e.id)}))]})]})}}(),Object(Le.jsx)(qt,{children:Object(Le.jsx)(se.b,{onClick:function(){oe.restart().then((function(){S(),x((function(e){return[].concat(Object(j.a)(e),["Restarted the story"])})),v()}),t.errorAlert)},padding:"15px 25px",bg:le,children:"Start Over"})})]})},zt=Object(ae.a)(se.a)(Ft||(Ft=Object(l.a)(["\n  position: absolute;\n  top: 20px;\n  left: 50%;\n  transform: translate(-50%, 0);\n"])));!function(e){e.HOME="/",e.PLAYER_LIBRARY="/player",e.WRITER_LIBRARY="/writer",e.PLAYER_PLAY="/player/play",e.WRITER_EDIT="/writer/edit"}(Rt||(Rt={}));var Qt={visible:!0,message:"This is a demo hosted on Github Pages. Some features are not supported. Please do not reload any pages.",warn:!1};var Vt=function(){var e=Object(o.useState)([Qt]),t=Object(d.a)(e,2),n=t[0],c=t[1],r=function(e){c((function(t){return[].concat(Object(j.a)(t),[{visible:!0,message:e,warn:!0}])})),n.length>5&&s(0)},i={triggerMessage:function(e){c((function(t){return[].concat(Object(j.a)(t),[{visible:!0,message:e,warn:!1}])})),n.length>5&&s(0)},triggerAlert:r,errorAlert:function(e){r(e.message)}},s=function(e){var t=Object(j.a)(n);t.splice(e,1),c(t)};return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsxs)(b.a,{basename:"/saga-frontend",children:[Object(Le.jsx)($e,{}),Object(Le.jsxs)(h.c,{children:[Object(Le.jsx)(h.a,{path:Rt.HOME,exact:!0,children:Object(Le.jsx)(st,{message:i})}),Object(Le.jsx)(h.a,{path:Rt.PLAYER_LIBRARY,exact:!0,children:Object(Le.jsx)(Ve,{message:i})}),Object(Le.jsx)(h.a,{path:Rt.WRITER_LIBRARY,exact:!0,children:Object(Le.jsx)(ht,{message:i})}),Object(Le.jsx)(h.a,{path:Rt.PLAYER_PLAY,exact:!0,children:Object(Le.jsx)(Ut,{message:i})}),Object(Le.jsx)(h.a,{path:Rt.WRITER_EDIT,exact:!0,children:Object(Le.jsx)(Mt,{message:i})})]})]}),Object(Le.jsx)(zt,{children:n.map((function(e,t){return Object(Le.jsx)(jt,{visible:e.visible,message:e.message,warn:e.warn,onClose:function(){return s(t)}},t)}))})]})},Kt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,58)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),i(e),o(e)}))};u.a.render(Object(Le.jsx)(s.a.StrictMode,{children:Object(Le.jsx)(Vt,{})}),document.getElementById("root")),Kt()}},[[56,1,2]]]);
//# sourceMappingURL=main.1092ebc0.chunk.js.map