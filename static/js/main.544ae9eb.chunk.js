(this["webpackJsonpsaga-frontend"]=this["webpackJsonpsaga-frontend"]||[]).push([[0],{45:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var c,i,r,o=n(1),s=n.n(o),a=n(36),d=n.n(a),j=(n(45),n(10)),u=n(3),l=n(4),b=n(18),h=n(9),O=n(37),x=n(32),m=n.n(x),p=n(38);!function(e){e[e.STORY=0]="STORY",e[e.WORK=1]="WORK"}(c||(c={})),function(e){e.SIMPLE="SIMPLE",e.CONSEQUENTIAL="CONSEQUENTIAL",e.DEPENDENT="DEPENDENT"}(i||(i={})),function(e){e.ADD="ADD",e.SET="SET"}(r||(r={}));var f,g,S,v,C,y,E,A,k,I,N,D,w,T,P,L,W,F,R,_,M,q,Y,z,B,U,Q,V,K,H,G,J,X,Z,$,ee="",te="",ne=["A Magical Adventure","A Sci-Fi Adventure","A Nonfiction Adventure"],ce=["A Magical Adventure","A Sci-Fi Adventure","A Nonfiction Adventure"],ie={name:"",statuses:[{name:"points",value:0}],choices:[{id:0,options:[{id:0,decision:0}]},{id:1,options:[{id:0,decision:1},{id:1,decision:2},{id:2,decision:3}]},{id:2,options:[{id:0,decision:4}]},{id:3,options:[]}],decisions:[{id:0,type:i.SIMPLE,description:"Next",threshold:0,outcome1Id:1,outcome2Id:0},{id:1,type:i.SIMPLE,description:"Iceland",threshold:0,outcome1Id:2,outcome2Id:0},{id:2,type:i.SIMPLE,description:"Venice",threshold:0,outcome1Id:2,outcome2Id:0},{id:3,type:i.SIMPLE,description:"Disneyland",threshold:0,outcome1Id:2,outcome2Id:0},{id:4,type:i.SIMPLE,description:"Next",threshold:0,outcome1Id:3,outcome2Id:0}],choice:0},re=ie,oe=ie,se=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.reject({message:"This is not supported in the demo."}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){return te="",Promise.resolve()},de={getCurrentStoryName:function(){return Promise.resolve(ee)},getCurrentChoice:function(){var e="";switch(re.choice){case 0:e="This is a sample interactive story demo! Here you can see how players read their options and make decisions.";break;case 1:e="Try making a decision! Where will you go for vacation?";break;case 2:e="Nice decision! That's all for this demo!";break;case 3:e="Game over, no choices left."}return Promise.resolve(e)},getCurrentStory:function(){var e={name:ee,statuses:re.statuses,choices:re.choices,decisions:re.decisions,choice:re.choice};return Promise.resolve(e)},getAllStoryNames:function(){return Promise.resolve(ne)},exportStory:function(e,t){return Promise.reject({message:"This is not supported in the demo."})},exportStoryInProgress:function(e,t){return Promise.reject({message:"This is not supported in the demo."})},importStory:function(e){return se()},next:function(){return Promise.reject({message:"This is not supported in the demo."})},choose:function(e){return re={name:re.name,statuses:re.statuses,choices:re.choices,decisions:re.decisions,choice:re.decisions[e].outcome1Id},Promise.resolve()},loadStory:function(e){return ee=e,Promise.resolve()},restart:function(){return re=ie,Promise.resolve()},quitStory:function(){return ae()},removeStory:function(e){return ne.splice(ne.indexOf(e),1),Promise.resolve()},getAllWorkNames:function(){return Promise.resolve(ce)},getCurrentWorkName:function(){return Promise.resolve(te)},getCurrentWork:function(){var e={name:te,statuses:oe.statuses,choices:oe.choices,decisions:oe.decisions,choice:oe.choice};return Promise.resolve(e)},getCurrentWorkStoryName:function(){return""!==te?Promise.resolve(oe.name):Promise.reject({message:"No loaded story."})},getCurrentStatuses:function(){return""!==te?Promise.resolve(oe.statuses):Promise.reject({message:"No loaded story."})},getInitialChoice:function(){return""!==te?Promise.resolve(oe.choice):Promise.reject({message:"No loaded story."})},getCurrentChoices:function(){return""!==te?Promise.resolve(oe.choices):Promise.reject({message:"No loaded story."})},getCurrentDecisions:function(){return""!==te?Promise.resolve(oe.decisions):Promise.reject({message:"No loaded story."})},exportWork:function(e){return Promise.reject({message:"This is not supported in the demo."})},importWork:function(e){return Promise.reject({message:"This is not supported in the demo."})},exportToPlayer:function(){return Promise.reject({message:"This is not supported in the demo."})},loadWork:function(e){return te=e,Promise.resolve()},quitWork:function(){return ae()},removeWork:function(e){return ce.splice(ce.indexOf(e),1),Promise.resolve()},renameWork:function(e,t){return Promise.reject({message:"This is not supported in the demo."})},startNewWork:function(e){return Promise.reject({message:"This is not supported in the demo."})},setName:function(e){return e.length<1||(te=e,oe={name:e,statuses:oe.statuses,choices:oe.choices,decisions:oe.decisions,choice:oe.choice}),Promise.resolve()},addStatus:function(e,t){var n,c=[],i=!1,r=Object(O.a)(oe.statuses);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.name===e?(c.push({name:e,value:t}),i=!0):c.push(o)}}catch(s){r.e(s)}finally{r.f()}return i?(oe={name:oe.name,statuses:c,choices:oe.choices,decisions:oe.decisions,choice:oe.choice},Promise.resolve()):(oe={name:oe.name,statuses:[].concat(Object(j.a)(oe.statuses),[{name:e,value:t}]),choices:oe.choices,decisions:oe.decisions,choice:oe.choice},Promise.resolve())},removeStatus:function(e){return Promise.reject({message:"This is not supported in the demo."})},addChoice:function(){return oe={name:oe.name,statuses:oe.statuses,choices:[].concat(Object(j.a)(oe.choices),[{id:oe.choices.length,options:[]}]),decisions:oe.decisions,choice:oe.choice},Promise.resolve()},setInitial:function(e){return oe={name:oe.name,statuses:oe.statuses,choices:[].concat(Object(j.a)(oe.choices),[{id:oe.choices.length,options:[]}]),decisions:oe.decisions,choice:e},Promise.resolve()},addSimpleDecision:function(e){return Promise.reject({message:"This is not supported in the demo."})},addConsequentialDecision:function(e){return Promise.reject({message:"This is not supported in the demo."})},addSimpleDependent:function(e){return Promise.reject({message:"This is not supported in the demo."})},addConsequentialDependent:function(e){return Promise.reject({message:"This is not supported in the demo."})},removeOption:function(e,t){return Promise.reject({message:"This is not supported in the demo."})},removeChoice:function(e){return Promise.reject({message:"This is not supported in the demo."})}},je=n(2),ue=n(5),le="#4FC1E9",be="#00A8B5",he="#5978ab",Oe="#ff7373",xe="#FFF",me="#000",pe="#00171f",fe="0 5px 5px 0",ge=ue.a.div(f||(f=Object(l.a)(["\n  position: fixed;\n  top: 10vh;\n  width: 100vw;\n  height: 90vh;\n  padding: 20px 40px 100px;\n  overflow-y: auto;\n  box-sizing: border-box;\n\n  @media only screen and (max-width: 813px) {\n    padding: 20px 20px 60px;\n  }\n"]))),Se=ue.a.div(g||(g=Object(l.a)(["\n  position: fixed;\n  top: 10vh;\n  width: 100vw;\n  height: 90vh;\n  padding: 20px 40px;\n  overflow-y: auto;\n  box-sizing: border-box;\n\n  @media only screen and (max-width: 813px) {\n    padding: 20px;\n  }\n"]))),ve=Object(ue.a)(Se)(S||(S=Object(l.a)(["\n  padding: 20px 40px;\n  background: linear-gradient(45deg, "," 60%, #003042);\n  color: ",";\n\n  @media only screen and (max-width: 813px) {\n    padding: 20px;\n  }\n"])),pe,xe),Ce=Object(ue.a)(je.d)(v||(v=Object(l.a)(["\n  padding-top: 20px;\n  font-size: 48px;\n  font-weight: bold;\n  padding-bottom: 20px;\n"]))),ye=Object(ue.a)(je.d)(C||(C=Object(l.a)(["\n  display: inline-block;\n"]))),Ee=Object(ue.a)(je.d)(y||(y=Object(l.a)(["\n  font-weight: bold;\n"]))),Ae=Object(ue.a)(je.d)(E||(E=Object(l.a)(["\n  font-size: 24px;\n  font-weight: bold;\n  padding: 15px 0 5px;\n"]))),ke=Object(ue.a)(je.d)(A||(A=Object(l.a)(["\n  font-size: 25px;\n  padding: 0 10px;\n\n  @media only screen and (max-width: 813px) {\n    font-size: 20px;\n  }\n"]))),Ie=ue.a.div(k||(k=Object(l.a)(["\n  width: 60vw;\n  min-height: 200px;\n  color: ",";\n  padding: 50px;\n  text-align: left;\n  line-height: 20px;\n"])),me),Ne=Object(ue.a)(je.a)(I||(I=Object(l.a)(["\n  text-align: left;\n  font-size: 52px;\n  font-weight: bold;\n  margin-top: 30px;\n  margin-bottom: 50px;\n"]))),De=Object(ue.a)(je.a)(N||(N=Object(l.a)(["\n  text-align: center;\n  width: 100%;\n  font-size: 20px;\n  padding-top: 30px;\n"]))),we=Object(ue.a)(je.a)(D||(D=Object(l.a)(["\n  margin: 0 10px;\n\n  @media only screen and (max-width: 813px) {\n    margin: 0;\n  }\n"]))),Te=Object(ue.a)(je.a)(w||(w=Object(l.a)(["\n  margin-left: 10px;\n\n  @media only screen and (max-width: 813px) {\n    margin: 10px 0 0 0;\n  }\n"]))),Pe=Object(ue.a)(je.c)(T||(T=Object(l.a)(["\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  background: ",";\n  padding: 10px 20px;\n  width: 100%;\n  justify-content: flex-end;\n\n  @media only screen and (max-width: 813px) {\n    padding: 5px;\n  }\n"])),pe),Le=Object(ue.a)(je.c)(P||(P=Object(l.a)(["\n  position: absolute;\n  bottom: 20px;\n  right: 20px;\n"]))),We=Object(ue.a)(je.b)(L||(L=Object(l.a)(["\n  background: ",";\n"])),le),Fe=Object(ue.a)(je.b)(W||(W=Object(l.a)(["\n  background: ",";\n"])),be),Re=n(6),_e=n(0),Me=function(e){var t=e.name,n=e.onSuccess,i=e.exportType,r=Object(o.useState)(!1),s=Object(u.a)(r,2),a=s[0],d=s[1],j=Object(o.useState)(""),l=Object(u.a)(j,2),b=l[0],h=l[1],O=Object(o.useState)(),x=Object(u.a)(O,2),m=x[0],p=x[1],f=Object(o.useState)(!0),g=Object(u.a)(f,2),S=g[0],v=g[1],C=i===c.STORY;Object(o.useEffect)((function(){p("".concat(t,".txt"))}),[t]);var y=function(e){E("Could not export: "+e.message)},E=function(e){h(e),d(!0)};return Object(_e.jsxs)(je.a,{children:[Object(_e.jsxs)(je.d,{mb:20,children:["Exporting: ",t]}),Object(_e.jsx)(Re.c,{children:"Path to export to"}),Object(_e.jsx)(Re.b,{name:"path",defaultValue:m,placeholder:"".concat(t,".txt"),mb:20,onChange:function(e){return p(e.target.value)}}),C&&Object(_e.jsxs)(Re.c,{mb:20,children:[Object(_e.jsx)(Re.a,{id:"original",name:"original",onChange:function(){return v((function(e){return!e}))}}),"Export With Saved Progress"]}),Object(_e.jsx)(je.b,{bg:le,onClick:C?function(){m?S?de.exportStory(m,t).then(n,y):de.exportStoryInProgress(m,t).then(n,y):E("Export path is required.")}:function(){m?de.exportWork(m).then(n,y):E("Export path is required.")},children:"Submit"}),a&&Object(_e.jsx)(je.d,{color:Oe,children:b})]})},qe=function(e){var t=e.onSuccess,n=e.importType,i=Object(o.useState)(!1),r=Object(u.a)(i,2),s=r[0],a=r[1],d=Object(o.useState)(""),j=Object(u.a)(d,2),l=j[0],b=j[1],h=Object(o.useState)(),O=Object(u.a)(h,2),x=O[0],m=O[1],p=function(e){b(e),a(!0)};return Object(_e.jsxs)(Ie,{children:[Object(_e.jsx)(Ae,{mb:20,children:"Import a story!"}),Object(_e.jsx)(Re.c,{children:"Path of story file:"}),Object(_e.jsx)(Re.b,{name:"path",placeholder:"./your-story.txt",mb:20,onChange:function(e){return m(e.target.value)}}),Object(_e.jsx)(je.b,{bg:le,onClick:function(){if(x){var e;switch(n){case c.STORY:e=de.importStory(x);break;case c.WORK:e=de.importWork(x)}e.then(t,(function(e){return p("Could not import: "+e.message)}))}else p("File path is required.")},children:"Submit"}),s&&Object(_e.jsx)(je.d,{color:Oe,children:l})]})},Ye=Object(ue.a)(je.b)(F||(F=Object(l.a)(["\n  position: fixed;\n  z-index: 2;\n  left: 0;\n  top: 0;\n  color: ",";\n  opacity: 0.5;\n  width: 100vw;\n  height: 100vh;\n"])),me),ze=ue.a.div(R||(R=Object(l.a)(["\n  position: fixed;\n  z-index: 3;\n  top: 60%;\n  left: 50%;\n  transform: translate(-50%, -55%);\n  background-color: ",";\n  border: 2px solid ","20;\n  border-radius: 20;\n  max-height: 85vh;\n  max-width: 95vw;\n  overflow-y: auto;\n"])),xe,me),Be=Object(ue.a)(je.b)(_||(_=Object(l.a)(["\n  background: ",";\n  position: fixed;\n  right: 0;\n"])),xe),Ue=Object(ue.a)(je.d)(M||(M=Object(l.a)(["\n  color: ",";\n  font-size: 25px;\n  padding: 5px;\n"])),me),Qe=function(e){var t=e.visible,n=e.onClose,c=e.children;return Object(_e.jsx)(_e.Fragment,{children:t&&Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ye,{onClick:n}),Object(_e.jsxs)(ze,{children:[Object(_e.jsx)(Be,{onClick:n,children:Object(_e.jsx)(Ue,{children:"X"})}),c]})]})})},Ve=Object(ue.a)(je.a)(q||(q=Object(l.a)(["\n  padding: 20px;\n  min-width: ",";\n  border: 2px solid ",";\n  border-radius: 5px;\n  margin-right: 20px;\n  margin-bottom: 10px;\n  box-shadow: 2px 3px 5px ",";\n"])),(function(e){return e.minWidth?e.minWidth:"200px"}),be,pe),Ke=Object(ue.a)(je.d)(Y||(Y=Object(l.a)(["\n  font-size: 19px;\n  font-weight: bold;\n  padding-top: 5px;\n  padding-bottom: 15px;\n"]))),He=function(e){var t=e.title,n=e.minWidth,c=e.children;return Object(_e.jsxs)(Ve,{minWidth:n,children:[Object(_e.jsx)(Ke,{children:t}),c]})},Ge=function(e){var t=e.onClick,n=e.text,c=e.margin;return Object(_e.jsx)(_e.Fragment,{children:Object(_e.jsx)(je.b,{onClick:t,bg:he,margin:c||"0",children:Object(_e.jsx)(je.d,{color:xe,children:n})})})},Je=function(e){var t=e.message,n=Object(o.useState)([]),i=Object(u.a)(n,2),r=i[0],s=i[1],a=Object(o.useState)(!1),d=Object(u.a)(a,2),j=d[0],l=d[1],b=Object(o.useState)(!1),O=Object(u.a)(b,2),x=O[0],m=O[1],p=Object(o.useState)(),f=Object(u.a)(p,2),g=f[0],S=f[1],v=Object(o.useState)(!1),C=Object(u.a)(v,2),y=C[0],E=C[1],A=Object(h.f)();Object(o.useEffect)((function(){de.getAllStoryNames().then((function(e){return s(e)}),(function(e){return window.alert(e.message)}))}));var k=function(){de.getAllStoryNames().then((function(e){return s(e)}),t.errorAlert)};return Object(_e.jsxs)(ge,{children:[Object(_e.jsx)(Ne,{children:Object(_e.jsx)(je.d,{children:"Play stories in your library!"})}),Object(_e.jsxs)(je.c,{flexWrap:"wrap",children:[r.map((function(e){return Object(_e.jsx)(He,{title:e,children:function(){switch(j){case!1:return Object(_e.jsxs)(je.c,{mb:"5px",children:[Object(_e.jsx)(je.b,{onClick:function(){return n=e,void de.loadStory(n).then((function(){return A.push(zt.PLAYER_PLAY)}),t.errorAlert);var n},mr:"5px",bg:le,children:"Play"}),Object(_e.jsx)(Ge,{text:"Export",onClick:function(){return t=e,m(!0),void S(t);var t}})]});case!0:return Object(_e.jsx)(je.b,{onClick:function(){return n=e,void de.removeStory(n).then(k,(function(e){return t.triggerAlert("Could not delete: "+e.message)}));var n},bg:Oe,children:"Delete"})}}()},e)})),0===r.length&&Object(_e.jsx)(De,{children:Object(_e.jsx)(je.d,{children:'You don\'t have any stories in your library. Import some by clicking "Manage Library." Then click "Import!"'})})]}),Object(_e.jsxs)(Pe,{children:[Object(_e.jsx)(Fe,{onClick:function(){return E(!0)},mr:"10px",children:"Import"}),Object(_e.jsx)(je.b,{onClick:function(){return l((function(e){return!e}))},padding:"15px 25px",bg:he,children:j?"Stop Managing Library":"Manage Library"})]}),g&&Object(_e.jsx)(Qe,{visible:x,onClose:function(){return m(!1)},children:Object(_e.jsx)(Ie,{children:Object(_e.jsx)(Me,{name:g,onSuccess:function(){t.triggerMessage("Exported successfully!"),m(!1)},exportType:c.STORY})})}),Object(_e.jsx)(Qe,{visible:y,onClose:function(){return E(!1)},children:Object(_e.jsx)(qe,{onSuccess:function(){E(!1),k()},importType:c.STORY})})]})},Xe=n(22),Ze=n(28),$e=["href"],et=Object(ue.a)(je.d)(z||(z=Object(l.a)(["\n  color: ",";\n  font-weight: bold;\n  font-size: 20px;\n"])),xe),tt=function(e){var t=e.href,n=Object(Ze.a)(e,$e),c=Object(h.f)();return Object(_e.jsx)(et,Object(Xe.a)(Object(Xe.a)({},n),{},{onClick:function(){c.push(t)}}))},nt=Object(ue.a)(je.c)(B||(B=Object(l.a)(["\n  position: fixed;\n  width: 100vw;\n  height: 10vh;\n  z-index: 1;\n  padding: 20px 25px;\n  color: ",";\n  background-color: ",";\n  align-items: center;\n"])),le,me),ct=function(){return Object(_e.jsxs)(nt,{children:[Object(_e.jsx)(tt,{href:zt.HOME,fontSize:25,color:le,children:"Saga"}),Object(_e.jsx)(je.a,{mx:"auto"}),Object(_e.jsx)(tt,{marginRight:4,href:zt.PLAYER_LIBRARY,children:"Play"}),Object(_e.jsx)(tt,{href:zt.WRITER_LIBRARY,children:"Write"})]})},it=["to"],rt=function(e){var t=e.to,n=Object(Ze.a)(e,it),c=Object(h.f)();return Object(_e.jsx)(je.b,Object(Xe.a)(Object(Xe.a)({},n),{},{onClick:function(){c.push(t)}}))},ot=Object(ue.a)(je.c)(U||(U=Object(l.a)(["\n  padding-left: 40px;\n  flex-direction: column;\n  justify-content: center;\n\n  @media only screen and (max-width: 813px) {\n    padding-left: 0;\n  }\n"]))),st=Object(ue.a)(je.a)(Q||(Q=Object(l.a)(["\n  font-size: 52px;\n  font-weight: bold;\n"]))),at=Object(ue.a)(je.d)(V||(V=Object(l.a)(["\n  padding-left: 100px;\n\n  @media only screen and (max-width: 813px) {\n    font-size: 42px;\n    padding-left: 0;\n  }\n"]))),dt=Object(ue.a)(je.d)(K||(K=Object(l.a)(["\n  display: inline-block;\n  font-style: italic;\n"]))),jt=Object(ue.a)(je.c)(H||(H=Object(l.a)(["\n  height: 100px;\n\n  @media only screen and (max-width: 813px) {\n    height: 80px;\n  }\n"]))),ut=Object(ue.a)(je.a)(G||(G=Object(l.a)(["\n  height: 25vh;\n\n  @media only screen and (max-height: 813px) {\n    height: 15vh;\n  }\n"]))),lt=Object(ue.a)(je.a)(J||(J=Object(l.a)(["\n  height: 10vh;\n"]))),bt=function(){return Object(_e.jsx)(ve,{children:Object(_e.jsxs)(ot,{children:[Object(_e.jsx)(ut,{}),Object(_e.jsxs)(st,{children:[Object(_e.jsxs)(je.d,{children:["Welcome to ",Object(_e.jsx)(ye,{color:le,children:"Saga"}),","]}),Object(_e.jsxs)(at,{children:["where you can ",Object(_e.jsx)(dt,{color:le,children:"play"})," and"," ",Object(_e.jsx)(dt,{color:be,children:"write"})," interactive stories."]})]}),Object(_e.jsx)(lt,{}),Object(_e.jsxs)(jt,{children:[Object(_e.jsx)(rt,{to:zt.PLAYER_LIBRARY,bg:le,children:Object(_e.jsx)(ke,{children:"Play a story!"})}),Object(_e.jsx)(je.a,{width:15}),Object(_e.jsx)(rt,{to:zt.WRITER_LIBRARY,bg:be,children:Object(_e.jsx)(ke,{children:"Write a new masterpiece!"})})]})]})})},ht=Object(ue.a)(je.c)(X||(X=Object(l.a)(["\n  border: 1px solid ",";\n  border-radius: 20;\n  padding: 5px 0 5px 15px;\n  margin-bottom: 10px;\n  z-index: 4;\n"])),me),Ot=Object(ue.a)(je.b)(Z||(Z=Object(l.a)(["\n  padding: 0;\n  background: 0;\n"]))),xt=function(e){var t=e.visible,n=e.message,c=e.warn,i=e.onClose;return Object(_e.jsx)(_e.Fragment,{children:t&&Object(_e.jsx)(_e.Fragment,{children:Object(_e.jsxs)(ht,{bg:c?Oe:xe,children:[Object(_e.jsx)(je.d,{my:"auto",children:n}),Object(_e.jsx)(je.a,{mx:"auto"}),Object(_e.jsx)(Ot,{onClick:i,color:me,children:"X"})]})})})},mt="Untitled",pt=function(e){var t=e.onSuccess,n=e.message,c=Object(o.useState)(mt),i=Object(u.a)(c,2),r=i[0],s=i[1];return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ae,{children:"Start your next story!"}),Object(_e.jsx)(Re.b,{name:"name",defaultValue:mt,placeholder:"Name of new work",onChange:function(e){return s(e.target.value)},my:"10px"}),Object(_e.jsx)(We,{onClick:function(){de.startNewWork(r).then(t,n.errorAlert)},children:"Create New Work"})]})},ft=function(e){var t=e.currentName,n=e.onSuccess,c=e.message,i=Object(o.useState)(t),r=Object(u.a)(i,2),s=r[0],a=r[1];return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsxs)(Ae,{children:["Rename ",t]}),Object(_e.jsx)(Re.b,{name:"newName",defaultValue:t,placeholder:"New Name",onChange:function(e){return a(e.target.value)},my:"10px"}),Object(_e.jsx)(We,{onClick:function(){de.renameWork(t,s).then(n,c.errorAlert)},children:"Rename"})]})},gt=function(e){var t=e.message,n=Object(o.useState)([]),i=Object(u.a)(n,2),r=i[0],s=i[1],a=Object(o.useState)(!1),d=Object(u.a)(a,2),j=d[0],l=d[1],b=Object(o.useState)(!1),O=Object(u.a)(b,2),x=O[0],m=O[1],p=Object(o.useState)(!1),f=Object(u.a)(p,2),g=f[0],S=f[1],v=Object(o.useState)(!1),C=Object(u.a)(v,2),y=C[0],E=C[1],A=Object(h.f)();Object(o.useEffect)((function(){de.getAllWorkNames().then((function(e){return s(e)})).catch((function(e){return window.alert(e.message)}))}));var k=function(){de.getAllWorkNames().then((function(e){return s(e)}),t.errorAlert)},I=function(){m(!1),k()};return Object(_e.jsxs)(ge,{children:[Object(_e.jsx)(Ne,{children:Object(_e.jsx)(je.d,{children:"Write your next story!"})}),Object(_e.jsxs)(je.c,{flexWrap:"wrap",children:[r.map((function(e){return Object(_e.jsx)(He,{title:e,children:function(){switch(j){case!1:return Object(_e.jsx)(je.b,{onClick:function(){return n=e,void de.loadWork(n).then((function(){return A.push(zt.WRITER_EDIT)}),t.errorAlert);var n},bg:le,mb:"5px",children:"Edit"});case!0:return Object(_e.jsxs)(je.c,{children:[Object(_e.jsx)(Qe,{visible:x,onClose:function(){return m(!1)},children:Object(_e.jsx)(Ie,{children:Object(_e.jsx)(ft,{currentName:e,onSuccess:I,message:t})})}),Object(_e.jsx)(Ge,{text:"Rename",onClick:function(){return m(!0)},margin:"0 5px 0 0"}),Object(_e.jsx)(je.b,{onClick:function(){return n=e,void de.removeWork(n).then(k,(function(e){return t.triggerAlert("Could not delete: "+e.message)}));var n},bg:Oe,children:"Delete"})]})}}()},e)})),0===r.length&&Object(_e.jsx)(De,{children:Object(_e.jsx)(je.d,{children:"You don't have any works in your library. Create a new one!"})})]}),Object(_e.jsxs)(Pe,{children:[Object(_e.jsx)(Fe,{onClick:function(){return S(!0)},children:"Start New"}),Object(_e.jsx)(Fe,{onClick:function(){return E(!0)},margin:"0 10px",children:"Import"}),Object(_e.jsx)(je.b,{onClick:function(){return l((function(e){return!e}))},padding:"15px 25px",bg:he,children:j?"Stop Managing Library":"Manage Library"})]}),Object(_e.jsx)(Qe,{visible:g,onClose:function(){return S(!1)},children:Object(_e.jsx)(Ie,{children:Object(_e.jsx)(pt,{onSuccess:function(){S(!1),k()},message:t})})}),Object(_e.jsx)(Qe,{visible:y,onClose:function(){return E(!1)},children:Object(_e.jsx)(qe,{onSuccess:function(){E(!1),k()},importType:c.WORK})})]})},St=function(e){var t,n,c=e.decision;return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ee,{children:"Type"}),Object(_e.jsx)(je.d,{children:c.type.toString()}),Object(_e.jsx)(Ee,{children:"Description"}),Object(_e.jsx)(je.d,{children:c.description}),Object(_e.jsx)(Ee,{children:"Outcome"}),function(){switch(c.type){case i.DEPENDENT:return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsxs)(je.d,{children:["if ",c.dependency," is below ",c.threshold,": Choice #",c.outcome1Id]}),Object(_e.jsxs)(je.d,{children:["if ",c.dependency," is above ",c.threshold,": Choice #",c.outcome2Id]})]});default:return Object(_e.jsxs)(je.d,{children:["Choice #",c.outcome1Id]})}}(),Object(_e.jsx)(Ee,{children:"Consequences"}),null===(t=c.consequences)||void 0===t?void 0:t.map((function(e,t){var n;switch(e.type){case r.ADD:n="Add ".concat(e.var," to ").concat(e.status);break;case r.SET:n="Set ".concat(e.status," to ").concat(e.var)}return Object(_e.jsx)(je.d,{children:n},t)})),0===(null===(n=c.consequences)||void 0===n?void 0:n.length)&&Object(_e.jsx)(je.d,{children:"None"})]})},vt=function(e){var t=e.choice,n=e.option,c=e.decision,i=e.onSuccess,r=e.message;return Object(_e.jsxs)(He,{title:"Option #".concat(n),children:[Object(_e.jsx)(St,{decision:c}),Object(_e.jsx)(je.b,{onClick:function(){de.removeOption(t,n).then(i,r.errorAlert)},mt:"10px",bg:Oe,children:"Remove Option"})]})},Ct=function(e){var t=e.onDescriptionChange,n=e.onOutcomeIdChange,c=e.choices;return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ee,{children:"Description"}),Object(_e.jsx)(Re.b,{name:"description",placeholder:"Description",my:"5px",onChange:function(e){return t(e.target.value)}}),Object(_e.jsx)(Ee,{children:"Outcome"}),Object(_e.jsxs)(je.c,{alignItems:"center",children:[Object(_e.jsx)(je.d,{mr:"5px",children:"Choice #"}),Object(_e.jsx)(Re.d,{name:"outcomeId",onChange:function(e){n(Number(e.currentTarget.value))},my:"5px",minWidth:"50px",children:c.map((function(e){return Object(_e.jsx)("option",{children:e.id},e.id)}))})]})]})},yt=function(e){var t=e.onSuccess,n=e.choiceId,c=e.choices,i=Object(o.useState)(),r=Object(u.a)(i,2),s=r[0],a=r[1],d=Object(o.useState)(0),j=Object(u.a)(d,2),l=j[0],b=j[1],h=Object(o.useState)(),O=Object(u.a)(h,2),x=O[0],m=O[1],p=Object(o.useState)(),f=Object(u.a)(p,2),g=f[0],S=f[1],v=function(e){m(e),S(!0)};return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ct,{onDescriptionChange:a,onOutcomeIdChange:b,choices:c}),g&&Object(_e.jsx)(je.d,{color:Oe,children:x}),Object(_e.jsx)(We,{onClick:function(){s?de.addSimpleDecision({description:s,choiceId:n,outcomeId:l}).then(t,(function(e){return v(e.message)})):v("All fields are required!")},mr:"5px",children:"Submit"})]})},Et=function(e,t,n){var c=e.target.value;c.includes(".")?t():n(Number(c))},At=function(e){var t=e.onChange,n=e.statuses,c=e.feedback,i=Object(o.useState)(r.ADD),s=Object(u.a)(i,2),a=s[0],d=s[1],j=Object(o.useState)(0),l=Object(u.a)(j,2),b=l[0],h=l[1],O=Object(o.useState)(n[0].name),x=Object(u.a)(O,2),m=x[0],p=x[1];Object(o.useEffect)((function(){m&&t("".concat(a," ").concat(b," ").concat(m))}),[t,a,b,m]);var f=function(){c.giveFeedback("Must be an integer!")},g=function(e){c.hideFeedback(),h(e)};return Object(_e.jsxs)(je.c,{flexWrap:"wrap",children:[Object(_e.jsxs)(je.a,{minWidth:"150px",children:[Object(_e.jsx)(Ee,{children:"Type"}),Object(_e.jsxs)(Re.d,{name:"choiceId",onChange:function(e){return d(e.currentTarget.value)},children:[Object(_e.jsx)("option",{children:r.ADD}),Object(_e.jsx)("option",{children:r.SET})]})]}),Object(_e.jsxs)(we,{minWidth:"150px",children:[Object(_e.jsx)(Ee,{children:a===r.ADD?"Amount to Add":"Number to Set To"}),Object(_e.jsx)(Re.b,{name:"val",placeholder:"0",type:"number",value:b,onChange:function(e){Et(e,f,g)}})]}),Object(_e.jsxs)(je.a,{minWidth:"150px",children:[Object(_e.jsx)(Ee,{children:"Status to Impact"}),Object(_e.jsx)(Re.d,{name:"choiceId",onChange:function(e){return p(e.currentTarget.value)},children:n.map((function(e){return Object(_e.jsx)("option",{children:e.name},e.name)}))})]})]})},kt=function(e){var t=e.onSuccess,n=e.choiceId,c=e.choices,i=e.statuses,r=Object(o.useState)(),s=Object(u.a)(r,2),a=s[0],d=s[1],l=Object(o.useState)(0),b=Object(u.a)(l,2),h=b[0],O=b[1],x=Object(o.useState)([]),m=Object(u.a)(x,2),p=m[0],f=m[1],g=Object(o.useState)(),S=Object(u.a)(g,2),v=S[0],C=S[1],y=Object(o.useState)(),E=Object(u.a)(y,2),A=E[0],k=E[1],I=Object(o.useState)(),N=Object(u.a)(I,2),D=N[0],w=N[1],T={giveFeedback:function(e){k(e),w(!0)},hideFeedback:function(){return w(!1)}};return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ct,{onDescriptionChange:d,onOutcomeIdChange:O,choices:c}),Object(_e.jsx)(Ee,{children:"Consequences"}),p.map((function(e,t){return Object(_e.jsx)(je.d,{children:e},t)})),Object(_e.jsxs)(je.c,{alignItems:"flex-end",flexWrap:"wrap",mt:"5px",children:[Object(_e.jsx)(At,{onChange:C,statuses:i,feedback:T}),Object(_e.jsx)(Te,{children:Object(_e.jsx)(We,{onClick:function(){v?(f((function(e){return[].concat(Object(j.a)(e),[v])})),C(void 0)):T.giveFeedback("All consequence fields are required!")},children:"Add"})})]}),Object(_e.jsx)("br",{}),D&&Object(_e.jsx)(je.d,{color:Oe,children:A}),Object(_e.jsx)(We,{onClick:function(){a?de.addConsequentialDecision({description:a,choiceId:n,outcomeId:h,consequences:p}).then(t,(function(e){return T.giveFeedback(e.message)})):T.giveFeedback("All fields are required!")},mr:"5px",children:"Submit"})]})},It=function(e){var t=e.onDescriptionChange,n=e.onDependencyChange,c=e.onThresholdChange,i=e.onOutcomeBelowIdChange,r=e.onOutcomeMeetsIdChange,o=e.choices,s=e.statuses,a=e.feedback,d=function(){a.giveFeedback("Must be an integer!")},j=function(e){a.hideFeedback(),c(e)};return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ee,{children:"Description"}),Object(_e.jsx)(Re.b,{name:"description",placeholder:"Description",my:"5px",onChange:function(e){return t(e.target.value)}}),Object(_e.jsx)(Ee,{children:"Status the decision is dependent on"}),Object(_e.jsx)(Re.d,{name:"dependency",onChange:function(e){return n(e.currentTarget.value)},children:s.map((function(e){return Object(_e.jsx)("option",{children:e.name},e.name)}))}),Object(_e.jsx)(Ee,{children:"Status Value Threshold"}),Object(_e.jsx)(Re.b,{name:"threshold",defaultValue:0,placeholder:"0",type:"number",onChange:function(e){Et(e,d,j)}}),Object(_e.jsx)(Ee,{children:"Outcome If Status Is Below Threshold"}),Object(_e.jsxs)(je.c,{alignItems:"center",children:[Object(_e.jsx)(je.d,{mr:"5px",children:"Choice #"}),Object(_e.jsx)(Re.d,{name:"outcomeBelowId",onChange:function(e){i(Number(e.currentTarget.value))},my:"5px",minWidth:"50px",children:o.map((function(e){return Object(_e.jsx)("option",{children:e.id},e.id)}))})]}),Object(_e.jsx)(Ee,{children:"Outcome If Status Meets Threshold"}),Object(_e.jsxs)(je.c,{alignItems:"center",children:[Object(_e.jsx)(je.d,{mr:"5px",children:"Choice #"}),Object(_e.jsx)(Re.d,{name:"outcomeMeetsId",onChange:function(e){r(Number(e.currentTarget.value))},my:"5px",minWidth:"50px",children:o.map((function(e){return Object(_e.jsx)("option",{children:e.id},e.id)}))})]})]})},Nt=function(e){var t=e.onSuccess,n=e.choiceId,c=e.choices,i=e.statuses,r=Object(o.useState)(),s=Object(u.a)(r,2),a=s[0],d=s[1],j=Object(o.useState)(i[0].name),l=Object(u.a)(j,2),b=l[0],h=l[1],O=Object(o.useState)(0),x=Object(u.a)(O,2),m=x[0],p=x[1],f=Object(o.useState)(0),g=Object(u.a)(f,2),S=g[0],v=g[1],C=Object(o.useState)(0),y=Object(u.a)(C,2),E=y[0],A=y[1],k=Object(o.useState)(),I=Object(u.a)(k,2),N=I[0],D=I[1],w=Object(o.useState)(),T=Object(u.a)(w,2),P=T[0],L=T[1],W={giveFeedback:function(e){D(e),L(!0)},hideFeedback:function(){return L(!1)}};return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(It,{onDescriptionChange:d,onDependencyChange:h,onThresholdChange:p,onOutcomeBelowIdChange:v,onOutcomeMeetsIdChange:A,choices:c,statuses:i,feedback:W}),P&&Object(_e.jsx)(je.d,{color:Oe,children:N}),Object(_e.jsx)(We,{onClick:function(){a?de.addSimpleDependent({description:a,choiceId:n,dependency:b,threshold:m,outcomeBelowId:S,outcomeMeetsId:E}).then(t,(function(e){return W.giveFeedback(e.message)})):W.giveFeedback("All fields are required!")},mr:"5px",children:"Submit"})]})},Dt=function(e){var t=e.onSuccess,n=e.choiceId,c=e.choices,i=e.statuses,r=Object(o.useState)(),s=Object(u.a)(r,2),a=s[0],d=s[1],l=Object(o.useState)(i[0].name),b=Object(u.a)(l,2),h=b[0],O=b[1],x=Object(o.useState)(0),m=Object(u.a)(x,2),p=m[0],f=m[1],g=Object(o.useState)(0),S=Object(u.a)(g,2),v=S[0],C=S[1],y=Object(o.useState)(0),E=Object(u.a)(y,2),A=E[0],k=E[1],I=Object(o.useState)([]),N=Object(u.a)(I,2),D=N[0],w=N[1],T=Object(o.useState)(),P=Object(u.a)(T,2),L=P[0],W=P[1],F=Object(o.useState)(),R=Object(u.a)(F,2),_=R[0],M=R[1],q=Object(o.useState)(),Y=Object(u.a)(q,2),z=Y[0],B=Y[1],U={giveFeedback:function(e){M(e),B(!0)},hideFeedback:function(){return B(!1)}};return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(It,{onDescriptionChange:d,onDependencyChange:O,onThresholdChange:f,onOutcomeBelowIdChange:C,onOutcomeMeetsIdChange:k,choices:c,statuses:i,feedback:U}),Object(_e.jsx)(Ee,{children:"Consequences"}),D.map((function(e,t){return Object(_e.jsx)(je.d,{children:e},t)})),Object(_e.jsxs)(je.c,{alignItems:"flex-end",flexWrap:"wrap",mt:"5px",children:[Object(_e.jsx)(At,{onChange:W,statuses:i,feedback:U}),Object(_e.jsx)(Te,{children:Object(_e.jsx)(We,{onClick:function(){L?(w((function(e){return[].concat(Object(j.a)(e),[L])})),W(void 0)):U.giveFeedback("All consequence fields are required!")},children:"Add"})})]}),Object(_e.jsx)("br",{}),z&&Object(_e.jsx)(je.d,{color:Oe,children:_}),Object(_e.jsx)(We,{onClick:function(){a?de.addConsequentialDependent({description:a,choiceId:n,dependency:h,threshold:p,outcomeBelowId:v,outcomeMeetsId:A,consequences:D}).then(t,(function(e){return U.giveFeedback(e.message)})):U.giveFeedback("All fields are required!")},mr:"5px",children:"Submit"})]})};!function(e){e[e.ADD_SIMPLE=0]="ADD_SIMPLE",e[e.ADD_CONSEQUENTIAL=1]="ADD_CONSEQUENTIAL",e[e.ADD_SIMPLE_DEPENDENT=2]="ADD_SIMPLE_DEPENDENT",e[e.ADD_CONSEQUENTIAL_DEPENDENT=3]="ADD_CONSEQUENTIAL_DEPENDENT",e[e.NONE=4]="NONE"}($||($={}));var wt,Tt,Pt=function(e){var t=e.choice,n=e.choices,c=e.decisions,i=e.statuses,r=e.onSuccess,s=e.message,a=Object(o.useState)(!1),d=Object(u.a)(a,2),j=d[0],l=d[1],b=t.options.length>0,h=Object(o.useState)($.NONE),O=Object(u.a)(h,2),x=O[0],m=O[1],p=function(){r(),m($.NONE)};return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsxs)(He,{title:"Choice #".concat(t.id),minWidth:"350px",children:[t.options.map((function(e){var t=c[e.decision];return Object(_e.jsx)(je.d,{children:"Option #".concat(e.id,": ").concat(t.description," => Choice #").concat(t.outcome1Id," ").concat(t.outcome2Id>-1?"or #".concat(t.outcome2Id):"")},e.id)})),!b&&Object(_e.jsx)(je.d,{children:"No options"}),Object(_e.jsx)(je.a,{textAlign:"right",mt:"15px",mb:"-10px",children:Object(_e.jsx)(Ge,{text:"Edit",onClick:function(){return l(!0)}})})]}),Object(_e.jsx)(Qe,{visible:j,onClose:function(){return l(!1)},children:Object(_e.jsxs)(Ie,{children:[Object(_e.jsxs)(Ae,{children:["Edit Choice #",t.id]}),Object(_e.jsx)(je.a,{width:"80vw",children:Object(_e.jsxs)(je.c,{mt:"20px",flexWrap:"wrap",width:"60vw",children:[t.options.map((function(e){return Object(_e.jsx)(vt,{choice:t.id,option:e.id,decision:c[e.decision],onSuccess:r,message:s},e.id)})),!b&&Object(_e.jsx)(je.d,{children:"No options"})]})}),Object(_e.jsx)(je.a,{children:function(){switch(x){case $.ADD_SIMPLE:return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ae,{children:"Add Simple Option"}),Object(_e.jsx)(yt,{onSuccess:p,choiceId:t.id,choices:n}),Object(_e.jsx)(Ge,{text:"Cancel",onClick:function(){return m($.NONE)}})]});case $.ADD_CONSEQUENTIAL:return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ae,{children:"Add Consequential Option"}),Object(_e.jsx)(kt,{onSuccess:p,choiceId:t.id,choices:n,statuses:i}),Object(_e.jsx)(Ge,{text:"Cancel",onClick:function(){return m($.NONE)}})]});case $.ADD_SIMPLE_DEPENDENT:return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ae,{children:"Add Simple Dependent Decision"}),Object(_e.jsx)(Nt,{onSuccess:p,choiceId:t.id,choices:n,statuses:i}),Object(_e.jsx)(Ge,{text:"Cancel",onClick:function(){return m($.NONE)}})]});case $.ADD_CONSEQUENTIAL_DEPENDENT:return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ae,{children:"Add Consequential Dependent Decision"}),Object(_e.jsx)(Dt,{onSuccess:p,choiceId:t.id,choices:n,statuses:i}),Object(_e.jsx)(Ge,{text:"Cancel",onClick:function(){return m($.NONE)}})]});case $.NONE:default:return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ee,{mb:"5px",children:"Add Option"}),Object(_e.jsx)(Ge,{text:"Add Simple Option",margin:fe,onClick:function(){return m($.ADD_SIMPLE)}}),Object(_e.jsx)(Ge,{text:"Add Consequential Option",margin:fe,onClick:function(){return m($.ADD_CONSEQUENTIAL)}}),Object(_e.jsx)(Ge,{text:"Add Simple Dependent Option",margin:fe,onClick:function(){return m($.ADD_SIMPLE_DEPENDENT)}}),Object(_e.jsx)(Ge,{text:"Add Consequential Dependent Option",margin:fe,onClick:function(){return m($.ADD_CONSEQUENTIAL_DEPENDENT)}})]})}}()}),Object(_e.jsx)(je.a,{textAlign:"right",mt:"10px",children:Object(_e.jsx)(je.b,{onClick:function(){de.removeChoice(t.id).then(r,s.errorAlert)},bg:Oe,children:"Remove Choice"})})]})})]})},Lt=Object(ue.a)(Ge)(wt||(wt=Object(l.a)(["\n  display: inline-block;\n"]))),Wt=function(e){var t=e.message,n=e.title,c=e.onFinish,i=Object(o.useState)(!1),r=Object(u.a)(i,2),s=r[0],a=r[1],d=Object(o.useState)(n),j=Object(u.a)(d,2),l=j[0],b=j[1];return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ae,{display:"inline-block",mr:"15px",children:"Story Title:"}),s?Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Re.b,{name:"name",defaultValue:n,placeholder:"Untitled",display:"inline-block",width:"40%",onChange:function(e){return b(e.target.value)}}),Object(_e.jsx)(We,{onClick:function(){de.setName(l).then((function(){c(),a(!1)}),t.errorAlert)},display:"inline-block",ml:"15px",mr:"8px",children:"Submit"})]}):Object(_e.jsx)(Ae,{display:"inline-block",mr:"15px",children:n}),Object(_e.jsx)(Lt,{onClick:function(){a((function(e){return!e}))},text:s?"Cancel":"Change Title"})]})},Ft=function(e){var t=e.updateName,n=e.onSuccess,c=Object(o.useState)(),i=Object(u.a)(c,2),r=i[0],s=i[1],a=Object(o.useState)(0),d=Object(u.a)(a,2),j=d[0],l=d[1],b=Object(o.useState)(),h=Object(u.a)(b,2),O=h[0],x=h[1],m=Object(o.useState)(),p=Object(u.a)(m,2),f=p[0],g=p[1];Object(o.useEffect)((function(){t&&s(t)}),[t]);var S=function(e){x(e),g(!0)},v=function(){S("Must be an integer!")},C=function(e){g(!1),l(e)};return Object(_e.jsxs)(_e.Fragment,{children:[!t&&Object(_e.jsx)(Re.b,{name:"name",placeholder:"Status Name",onChange:function(e){return s(e.target.value)},mb:"7px"}),Object(_e.jsx)(Re.b,{name:"val",defaultValue:0,placeholder:"0",type:"number",onChange:function(e){Et(e,v,C)},mb:"7px"}),f&&Object(_e.jsx)(je.d,{color:Oe,children:O}),Object(_e.jsx)(We,{onClick:function(){r?de.addStatus(r,j).then(n,(function(e){return S(e.message)})):S("All fields are required!")},mr:"5px",children:"Submit"})]})},Rt=function(e){var t=e.status,n=e.updateStory,c=e.message,i=Object(o.useState)(!1),r=Object(u.a)(i,2),s=r[0],a=r[1];return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsxs)(He,{title:t.name,children:[Object(_e.jsxs)(je.d,{children:["Initial Value: ",t.value]}),Object(_e.jsx)(je.a,{textAlign:"right",mt:"15px",mb:"-10px",children:Object(_e.jsx)(Ge,{text:"Edit",onClick:function(){return a(!0)}})})]}),Object(_e.jsx)(Qe,{visible:s,onClose:function(){return a(!1)},children:Object(_e.jsxs)(Ie,{children:[Object(_e.jsxs)(Ae,{children:["Update Status: ",t.name]}),Object(_e.jsx)(Ee,{my:"10px",children:"Update Initial Value"}),Object(_e.jsx)(Ft,{updateName:t.name,onSuccess:n}),Object(_e.jsx)("br",{}),Object(_e.jsx)(Le,{children:Object(_e.jsx)(je.b,{onClick:function(){de.removeStatus(t.name).then(null,c.errorAlert)},bg:Oe,children:"Remove Status"})})]})})]})},_t=function(e){var t=e.choices,n=e.onSuccess,c=e.message,i=Object(o.useState)(-1),r=Object(u.a)(i,2),s=r[0],a=r[1];return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ee,{children:"Initial Choice"}),Object(_e.jsxs)(je.c,{alignItems:"center",children:[Object(_e.jsx)(je.d,{mr:"5px",children:"Choice #"}),Object(_e.jsx)(Re.d,{name:"choice",onChange:function(e){a(Number(e.currentTarget.value))},my:"5px",minWidth:"50px",children:t.map((function(e){return Object(_e.jsx)("option",{children:e.id},e.id)}))})]}),Object(_e.jsx)(We,{onClick:function(){de.setInitial(s).then(n,c.errorAlert)},mr:"5px",children:"Set Initial Choice"})]})};!function(e){e[e.ADD_STATUS=0]="ADD_STATUS",e[e.SET_INITIAL=1]="SET_INITIAL",e[e.NONE=2]="NONE"}(Tt||(Tt={}));var Mt,qt,Yt,zt,Bt={name:"",statuses:[],choices:[],decisions:[],choice:-1},Ut=function(e){var t=e.message,n=Object(o.useState)(),i=Object(u.a)(n,2),r=i[0],s=i[1],a=Object(o.useState)(Bt),d=Object(u.a)(a,2),j=d[0],l=d[1],b=Object(o.useState)("Loading..."),h=Object(u.a)(b,2),O=h[0],x=h[1],m=Object(o.useState)(Tt.NONE),p=Object(u.a)(m,2),f=p[0],g=p[1],S=Object(o.useState)(!1),v=Object(u.a)(S,2),C=v[0],y=v[1];Object(o.useEffect)((function(){var e=function(){de.quitWork().then((function(){}),t.errorAlert)};return window.addEventListener("unload",e),function(){return window.removeEventListener("unload",e)}})),Object(o.useEffect)((function(){de.getCurrentWork().then((function(e){""!==e.name?(l(e),de.getCurrentWorkName().then((function(e){return s(e)}),t.errorAlert)):(s(void 0),x("Oops! Looks like you haven't loaded a story to edit!"))}),t.errorAlert)}),[t]);var E=function(){de.getCurrentStatuses().then((function(e){return l((function(t){return{name:t.name,statuses:e,choices:t.choices,decisions:t.decisions,choice:t.choice}}))}),t.errorAlert),g(Tt.NONE)},A=function(){de.getInitialChoice().then((function(e){return l((function(t){return{name:t.name,statuses:t.statuses,choices:t.choices,decisions:t.decisions,choice:e}}))}),t.errorAlert),g(Tt.NONE)},k=function(){de.getCurrentChoices().then((function(e){de.getCurrentDecisions().then((function(t){l((function(n){return{name:n.name,statuses:n.statuses,choices:e,decisions:t,choice:n.choice}}))}),t.errorAlert)}),t.errorAlert),g(Tt.NONE)},I=function(){de.addChoice().then(k,t.errorAlert)};return r?Object(_e.jsxs)(Se,{children:[Object(_e.jsx)(Ce,{children:"Story Editor"}),Object(_e.jsxs)(Ae,{children:["Work: ",r]}),Object(_e.jsx)(Wt,{title:j.name,message:t,onFinish:function(){de.getCurrentWork().then((function(e){return l(e)}),t.errorAlert)}}),Object(_e.jsx)(Ae,{children:"Statuses"}),Object(_e.jsx)(je.c,{flexWrap:"wrap",children:j.statuses.map((function(e){return Object(_e.jsx)(Rt,{status:e,updateStory:E,message:t},e.name)}))}),Object(_e.jsx)(Ae,{children:"Choices"}),Object(_e.jsx)(je.c,{flexWrap:"wrap",children:j.choices.map((function(e){return Object(_e.jsx)(Pt,{choice:e,choices:j.choices,decisions:j.decisions,statuses:j.statuses,onSuccess:k,message:t},e.id)}))}),Object(_e.jsxs)(Ae,{children:["Initial Choice: ",j.choice]}),Object(_e.jsx)(Ae,{children:"Edit"}),Object(_e.jsxs)(je.a,{children:[function(){switch(f){case Tt.ADD_STATUS:return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ae,{children:"Add Status"}),Object(_e.jsx)(Ft,{onSuccess:E})]});case Tt.SET_INITIAL:return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ae,{children:"Set Initial Choice"}),Object(_e.jsx)(_t,{choices:j.choices,onSuccess:A,message:t})]});case Tt.NONE:default:return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ge,{text:"Add Status",margin:fe,onClick:function(){return g(Tt.ADD_STATUS)}}),Object(_e.jsx)(Ge,{text:"Add Choice",margin:fe,onClick:I}),Object(_e.jsx)(Ge,{text:"Set Initial Choice",margin:fe,onClick:function(){return g(Tt.SET_INITIAL)}})]})}}(),f!==Tt.NONE&&Object(_e.jsx)(Ge,{text:"Cancel",onClick:function(){return g(Tt.NONE)}})]}),Object(_e.jsx)(Ae,{children:"Export"}),C?Object(_e.jsxs)(je.a,{mr:"10px",width:"70%",children:[Object(_e.jsx)(Me,{name:r,onSuccess:function(){t.triggerMessage("Exported successfully!"),y(!1)},exportType:c.WORK}),Object(_e.jsx)(Ge,{text:"Cancel",onClick:function(){return y(!1)},margin:"10px 0 0 0"})]}):Object(_e.jsxs)(je.c,{children:[Object(_e.jsx)(Ge,{text:"Export",onClick:function(){y(!0)},margin:fe}),Object(_e.jsx)(Ge,{text:"Export to Player",onClick:function(){de.exportToPlayer().then((function(){return t.triggerMessage("Successfully exported!")}),t.errorAlert)},margin:fe})]})]}):Object(_e.jsxs)(Se,{children:[Object(_e.jsx)(Ce,{children:O}),Object(_e.jsx)(rt,{to:zt.WRITER_LIBRARY,bg:be,children:Object(_e.jsx)(ke,{children:"Go back to your library!"})})]})},Qt=Object(ue.a)(je.d)(Mt||(Mt=Object(l.a)(["\n  font-size: 16px;\n  line-height: 22px;\n"]))),Vt=Object(ue.a)(Qt)(qt||(qt=Object(l.a)(["\n  padding-left: 20px;\n  padding-bottom: 5px;\n"]))),Kt=function(e){var t=e.message,n=Object(o.useState)(),c=Object(u.a)(n,2),i=c[0],r=c[1],s=Object(o.useState)([]),a=Object(u.a)(s,2),d=a[0],l=a[1],b=Object(o.useState)([]),h=Object(u.a)(b,2),O=h[0],x=h[1],m=Object(o.useState)("Loading..."),p=Object(u.a)(m,2),f=p[0],g=p[1];Object(o.useEffect)((function(){var e=function(){de.quitStory().then((function(){}),t.errorAlert)};return window.addEventListener("unload",e),function(){return window.removeEventListener("unload",e)}})),Object(o.useEffect)((function(){de.getCurrentStory().then((function(e){""!==e.name?(r(e),0===d.length&&de.getCurrentChoice().then((function(e){return l((function(t){return[].concat(Object(j.a)(t),[e])}))}),t.errorAlert)):g("Oops! Looks like this story doesn't exist. Load a story from your library!")}),t.errorAlert)}),[t,d.length]);var S=function(){de.getCurrentStory().then((function(e){return r(e)}),t.errorAlert)},v=function(){de.getCurrentChoice().then((function(e){return l((function(t){return[].concat(Object(j.a)(t),[e])}))}),t.errorAlert)};return Object(_e.jsxs)(ge,{children:[function(){switch(i){case void 0:return Object(_e.jsx)(Ce,{children:f});default:var e=i.choices[i.choice].options;return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(Ce,{children:i.name}),d.map((function(e,t){return Object(_e.jsxs)("div",{children:[Object(_e.jsx)(Qt,{children:e}),t<O.length&&Object(_e.jsxs)(Vt,{children:["Chose: ",O[t]]})]},e+t)})),e.length>0&&Object(_e.jsxs)(je.c,{mt:10,children:[Object(_e.jsxs)(Qt,{my:"auto",mr:10,children:["Choose:"," "]}),i&&i.choices[i.choice].options.map((function(e){return Object(_e.jsx)(We,{onClick:function(){return n=e.decision,void(i&&(x((function(e){return[].concat(Object(j.a)(e),[i.decisions[n].description])})),de.choose(n).then(S,t.errorAlert),v()));var n},mr:"10px",children:i.decisions[e.decision].description},e.id)}))]})]})}}(),Object(_e.jsx)(Pe,{children:Object(_e.jsx)(je.b,{onClick:function(){de.restart().then((function(){S(),x((function(e){return[].concat(Object(j.a)(e),["Restarted the story"])})),v()}),t.errorAlert)},padding:"15px 25px",bg:Oe,children:"Start Over"})})]})},Ht=Object(ue.a)(je.a)(Yt||(Yt=Object(l.a)(["\n  position: absolute;\n  top: 20px;\n  left: 50%;\n  transform: translate(-50%, 0);\n  z-index: 4;\n"])));!function(e){e.HOME="/",e.PLAYER_LIBRARY="/player",e.WRITER_LIBRARY="/writer",e.PLAYER_PLAY="/player/play",e.WRITER_EDIT="/writer/edit"}(zt||(zt={}));var Gt={visible:!0,message:"This is a demo hosted on Github Pages. Some features are not supported. Please do not reload any pages.",warn:!1};var Jt=function(){var e=Object(o.useState)([Gt]),t=Object(u.a)(e,2),n=t[0],c=t[1],i=function(e){c((function(t){return[].concat(Object(j.a)(t),[{visible:!0,message:e,warn:!0}])})),n.length>5&&s(0)},r={triggerMessage:function(e){c((function(t){return[].concat(Object(j.a)(t),[{visible:!0,message:e,warn:!1}])})),n.length>5&&s(0)},triggerAlert:i,errorAlert:function(e){i(e.message)}},s=function(e){var t=Object(j.a)(n);t.splice(e,1),c(t)};return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsxs)(b.a,{basename:"/saga-frontend",children:[Object(_e.jsx)(ct,{}),Object(_e.jsxs)(h.c,{children:[Object(_e.jsx)(h.a,{path:zt.HOME,exact:!0,children:Object(_e.jsx)(bt,{message:r})}),Object(_e.jsx)(h.a,{path:zt.PLAYER_LIBRARY,exact:!0,children:Object(_e.jsx)(Je,{message:r})}),Object(_e.jsx)(h.a,{path:zt.WRITER_LIBRARY,exact:!0,children:Object(_e.jsx)(gt,{message:r})}),Object(_e.jsx)(h.a,{path:zt.PLAYER_PLAY,exact:!0,children:Object(_e.jsx)(Kt,{message:r})}),Object(_e.jsx)(h.a,{path:zt.WRITER_EDIT,exact:!0,children:Object(_e.jsx)(Ut,{message:r})})]})]}),Object(_e.jsx)(Ht,{children:n.map((function(e,t){return Object(_e.jsx)(xt,{visible:e.visible,message:e.message,warn:e.warn,onClose:function(){return s(t)}},t)}))})]})},Xt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,58)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),i(e),r(e),o(e)}))};d.a.render(Object(_e.jsx)(s.a.StrictMode,{children:Object(_e.jsx)(Jt,{})}),document.getElementById("root")),Xt()}},[[56,1,2]]]);
//# sourceMappingURL=main.544ae9eb.chunk.js.map