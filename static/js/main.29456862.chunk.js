(this["webpackJsonpsaga-frontend"]=this["webpackJsonpsaga-frontend"]||[]).push([[0],{45:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var c,r,i,o=n(1),s=n.n(o),a=n(36),u=n.n(a),j=(n(45),n(10)),d=n(3),b=n(4),l=n(18),h=n(9),O=n(37),x=n(32),m=n.n(x),p=n(38);!function(e){e[e.STORY=0]="STORY",e[e.WORK=1]="WORK"}(c||(c={})),function(e){e.SIMPLE="SIMPLE",e.CONSEQUENTIAL="CONSEQUENTIAL",e.DEPENDENT="DEPENDENT"}(r||(r={})),function(e){e.ADD="ADD",e.SET="SET"}(i||(i={}));var f,g,S,v,C,E,A,I,k,y,N,D,T,P,w,L,F,W,R,_,M,q,Y,B,U,z,Q,V,K,H="",G="",J=["A Magical Adventure","A Sci-Fi Adventure","A Nonfiction Adventure"],X=["A Magical Adventure","A Sci-Fi Adventure","A Nonfiction Adventure"],Z={name:"",statuses:[{name:"points",value:0}],choices:[{id:0,options:[{id:0,decision:0}]},{id:1,options:[{id:0,decision:1},{id:1,decision:2},{id:2,decision:3}]},{id:2,options:[{id:0,decision:4}]},{id:3,options:[]}],decisions:[{id:0,type:r.SIMPLE,description:"Next",threshold:0,outcome1Id:1,outcome2Id:0},{id:1,type:r.SIMPLE,description:"Iceland",threshold:0,outcome1Id:2,outcome2Id:0},{id:2,type:r.SIMPLE,description:"Venice",threshold:0,outcome1Id:2,outcome2Id:0},{id:3,type:r.SIMPLE,description:"Disneyland",threshold:0,outcome1Id:2,outcome2Id:0},{id:4,type:r.SIMPLE,description:"Next",threshold:0,outcome1Id:3,outcome2Id:0}],choice:0},$=Z,ee=Z,te=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.reject({message:"This is not supported in the demo."}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){return G="",Promise.resolve()},ce={getCurrentStoryName:function(){return Promise.resolve(H)},getCurrentChoice:function(){var e="";switch($.choice){case 0:e="This is a sample interactive story demo! Here you can see how players read their options and make decisions.";break;case 1:e="Try making a decision! Where will you go for vacation?";break;case 2:e="Nice decision! That's all for this demo!";break;case 3:e="Game over, no choices left."}return Promise.resolve(e)},getCurrentStory:function(){var e={name:H,statuses:$.statuses,choices:$.choices,decisions:$.decisions,choice:$.choice};return Promise.resolve(e)},getAllStoryNames:function(){return Promise.resolve(J)},exportStory:function(e,t){return Promise.reject({message:"This is not supported in the demo."})},exportStoryInProgress:function(e,t){return Promise.reject({message:"This is not supported in the demo."})},importStory:function(e){return te()},next:function(){return Promise.reject({message:"This is not supported in the demo."})},choose:function(e){return $={name:$.name,statuses:$.statuses,choices:$.choices,decisions:$.decisions,choice:$.decisions[e].outcome1Id},Promise.resolve()},loadStory:function(e){return H=e,Promise.resolve()},restart:function(){return $=Z,Promise.resolve()},quitStory:function(){return ne()},removeStory:function(e){return J.splice(J.indexOf(e),1),Promise.resolve()},getAllWorkNames:function(){return Promise.resolve(X)},getCurrentWorkName:function(){return Promise.resolve(G)},getCurrentWork:function(){var e={name:G,statuses:ee.statuses,choices:ee.choices,decisions:ee.decisions,choice:ee.choice};return Promise.resolve(e)},getCurrentWorkStoryName:function(){return""!==G?Promise.resolve(ee.name):Promise.reject({message:"No loaded story."})},getCurrentStatuses:function(){return""!==G?Promise.resolve(ee.statuses):Promise.reject({message:"No loaded story."})},getInitialChoice:function(){return""!==G?Promise.resolve(ee.choice):Promise.reject({message:"No loaded story."})},getCurrentChoices:function(){return""!==G?Promise.resolve(ee.choices):Promise.reject({message:"No loaded story."})},getCurrentDecisions:function(){return""!==G?Promise.resolve(ee.decisions):Promise.reject({message:"No loaded story."})},exportWork:function(e){return Promise.reject({message:"This is not supported in the demo."})},importWork:function(e){return Promise.reject({message:"This is not supported in the demo."})},exportToPlayer:function(){return Promise.reject({message:"This is not supported in the demo."})},loadWork:function(e){return G=e,Promise.resolve()},quitWork:function(){return ne()},removeWork:function(e){return X.splice(X.indexOf(e),1),Promise.resolve()},renameWork:function(e,t){return Promise.reject({message:"This is not supported in the demo."})},startNewWork:function(e){return Promise.reject({message:"This is not supported in the demo."})},setName:function(e){return e.length<1||(G=e,ee={name:e,statuses:ee.statuses,choices:ee.choices,decisions:ee.decisions,choice:ee.choice}),Promise.resolve()},addStatus:function(e,t){var n,c=[],r=!1,i=Object(O.a)(ee.statuses);try{for(i.s();!(n=i.n()).done;){var o=n.value;o.name===e?(c.push({name:e,value:t}),r=!0):c.push(o)}}catch(s){i.e(s)}finally{i.f()}return r?(ee={name:ee.name,statuses:c,choices:ee.choices,decisions:ee.decisions,choice:ee.choice},Promise.resolve()):(ee={name:ee.name,statuses:[].concat(Object(j.a)(ee.statuses),[{name:e,value:t}]),choices:ee.choices,decisions:ee.decisions,choice:ee.choice},Promise.resolve())},removeStatus:function(e){return Promise.reject({message:"This is not supported in the demo."})},addChoice:function(){return ee={name:ee.name,statuses:ee.statuses,choices:[].concat(Object(j.a)(ee.choices),[{id:ee.choices.length,options:[]}]),decisions:ee.decisions,choice:ee.choice},Promise.resolve()},setInitial:function(e){return ee={name:ee.name,statuses:ee.statuses,choices:[].concat(Object(j.a)(ee.choices),[{id:ee.choices.length,options:[]}]),decisions:ee.decisions,choice:e},Promise.resolve()},addSimpleDecision:function(e){return Promise.reject({message:"This is not supported in the demo."})},addConsequentialDecision:function(e){return Promise.reject({message:"This is not supported in the demo."})},addSimpleDependent:function(e){return Promise.reject({message:"This is not supported in the demo."})},addConsequentialDependent:function(e){return Promise.reject({message:"This is not supported in the demo."})},removeOption:function(e,t){return Promise.reject({message:"This is not supported in the demo."})},removeChoice:function(e){return Promise.reject({message:"This is not supported in the demo."})}},re=n(2),ie=n(5),oe="#4FC1E9",se="#00A8B5",ae="#5978ab",ue="#ff7373",je="#FFF",de="#000",be="#00171f",le="0 5px 5px 0",he=ie.a.div(f||(f=Object(b.a)(["\n  height: 90vh;\n  padding: 3vh 3vw;\n  overflow-y: auto;\n  box-sizing: border-box;\n"]))),Oe=Object(ie.a)(he)(g||(g=Object(b.a)(["\n  background: linear-gradient(45deg, "," 60%, #003042);\n  color: ",";\n"])),be,je),xe=Object(ie.a)(re.d)(S||(S=Object(b.a)(["\n  padding-top: 20px;\n  font-size: 48px;\n  font-weight: bold;\n  padding-bottom: 20px;\n"]))),me=Object(ie.a)(re.d)(v||(v=Object(b.a)(["\n  display: inline-block;\n"]))),pe=Object(ie.a)(re.d)(C||(C=Object(b.a)(["\n  font-weight: bold;\n"]))),fe=Object(ie.a)(re.d)(E||(E=Object(b.a)(["\n  font-size: 24px;\n  font-weight: bold;\n  padding: 15px 0 5px;\n"]))),ge=Object(ie.a)(re.d)(A||(A=Object(b.a)(["\n  font-size: 25px;\n  padding: 0 20px;\n"]))),Se=ie.a.div(I||(I=Object(b.a)(["\n  min-width: 450px;\n  min-height: 200px;\n  color: ",";\n  padding: 50px;\n  text-align: left;\n  line-height: 20px;\n"])),de),ve=Object(ie.a)(re.a)(k||(k=Object(b.a)(["\n  text-align: left;\n  font-size: 52px;\n  font-weight: bold;\n  margin-top: 30px;\n  margin-bottom: 50px;\n"]))),Ce=Object(ie.a)(re.a)(y||(y=Object(b.a)(["\n  text-align: center;\n  width: 100%;\n  font-size: 20px;\n  padding-top: 30px;\n"]))),Ee=Object(ie.a)(re.c)(N||(N=Object(b.a)(["\n  position: absolute;\n  bottom: 50px;\n  right: 50px;\n"]))),Ae=Object(ie.a)(re.c)(D||(D=Object(b.a)(["\n  position: absolute;\n  bottom: 20px;\n  right: 20px;\n"]))),Ie=Object(ie.a)(re.b)(T||(T=Object(b.a)(["\n  background: ",";\n"])),oe),ke=Object(ie.a)(re.b)(P||(P=Object(b.a)(["\n  background: ",";\n"])),se),ye=n(6),Ne=n(0),De=function(e){var t=e.name,n=e.onSuccess,r=e.exportType,i=Object(o.useState)(!1),s=Object(d.a)(i,2),a=s[0],u=s[1],j=Object(o.useState)(""),b=Object(d.a)(j,2),l=b[0],h=b[1],O=Object(o.useState)(),x=Object(d.a)(O,2),m=x[0],p=x[1],f=Object(o.useState)(!0),g=Object(d.a)(f,2),S=g[0],v=g[1],C=r===c.STORY;Object(o.useEffect)((function(){p("".concat(t,".txt"))}),[t]);var E=function(e){A("Could not export: "+e.message)},A=function(e){h(e),u(!0)};return Object(Ne.jsxs)(re.a,{children:[Object(Ne.jsxs)(re.d,{mb:20,children:["Exporting: ",t]}),Object(Ne.jsx)(ye.c,{children:"Path to export to"}),Object(Ne.jsx)(ye.b,{name:"path",defaultValue:m,placeholder:"".concat(t,".txt"),mb:20,onChange:function(e){return p(e.target.value)}}),C&&Object(Ne.jsxs)(ye.c,{mb:20,children:[Object(Ne.jsx)(ye.a,{id:"original",name:"original",onChange:function(){return v((function(e){return!e}))}}),"Export With Saved Progress"]}),Object(Ne.jsx)(re.b,{bg:oe,onClick:C?function(){m?S?ce.exportStory(m,t).then(n,E):ce.exportStoryInProgress(m,t).then(n,E):A("Export path is required.")}:function(){m?ce.exportWork(m).then(n,E):A("Export path is required.")},children:"Submit"}),a&&Object(Ne.jsx)(re.d,{color:ue,children:l})]})},Te=function(e){var t=e.onSuccess,n=e.importType,r=Object(o.useState)(!1),i=Object(d.a)(r,2),s=i[0],a=i[1],u=Object(o.useState)(""),j=Object(d.a)(u,2),b=j[0],l=j[1],h=Object(o.useState)(),O=Object(d.a)(h,2),x=O[0],m=O[1],p=function(e){l(e),a(!0)};return Object(Ne.jsxs)(Se,{children:[Object(Ne.jsx)(fe,{mb:20,children:"Import a story!"}),Object(Ne.jsx)(ye.c,{children:"Path of story file:"}),Object(Ne.jsx)(ye.b,{name:"path",placeholder:"./your-story.txt",mb:20,onChange:function(e){return m(e.target.value)}}),Object(Ne.jsx)(re.b,{bg:oe,onClick:function(){if(x){var e;switch(n){case c.STORY:e=ce.importStory(x);break;case c.WORK:e=ce.importWork(x)}e.then(t,(function(e){return p("Could not import: "+e.message)}))}else p("File path is required.")},children:"Submit"}),s&&Object(Ne.jsx)(re.d,{color:ue,children:b})]})},Pe=Object(ie.a)(re.b)(w||(w=Object(b.a)(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  color: ",";\n  opacity: 0.5;\n  width: 100vw;\n  height: 100vh;\n"])),de),we=ie.a.div(L||(L=Object(b.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: ",";\n  border: 2px solid ","20;\n  border-radius: 20;\n  max-height: 95vh;\n  overflow-y: auto;\n"])),je,de),Le=Object(ie.a)(re.b)(F||(F=Object(b.a)(["\n  background: ",";\n  position: absolute;\n  right: 0;\n"])),je),Fe=Object(ie.a)(re.d)(W||(W=Object(b.a)(["\n  color: ",";\n  font-size: 25px;\n  padding: 5px;\n"])),de),We=function(e){var t=e.visible,n=e.onClose,c=e.children;return Object(Ne.jsx)(Ne.Fragment,{children:t&&Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(Pe,{onClick:n}),Object(Ne.jsxs)(we,{children:[Object(Ne.jsx)(Le,{onClick:n,children:Object(Ne.jsx)(Fe,{children:"X"})}),c]})]})})},Re=Object(ie.a)(re.a)(R||(R=Object(b.a)(["\n  padding: 20px;\n  min-width: ",";\n  border: 2px solid ",";\n  border-radius: 5px;\n  margin-right: 20px;\n  margin-bottom: 10px;\n  box-shadow: 2px 3px 5px ",";\n"])),(function(e){return e.minWidth?e.minWidth:"200px"}),se,be),_e=Object(ie.a)(re.d)(_||(_=Object(b.a)(["\n  font-size: 19px;\n  font-weight: bold;\n  padding-top: 5px;\n  padding-bottom: 15px;\n"]))),Me=function(e){var t=e.title,n=e.minWidth,c=e.children;return Object(Ne.jsxs)(Re,{minWidth:n,children:[Object(Ne.jsx)(_e,{children:t}),c]})},qe=function(e){var t=e.onClick,n=e.text,c=e.margin;return Object(Ne.jsx)(Ne.Fragment,{children:Object(Ne.jsx)(re.b,{onClick:t,bg:ae,margin:c||"0",children:Object(Ne.jsx)(re.d,{color:je,children:n})})})},Ye=function(e){var t=e.message,n=Object(o.useState)([]),r=Object(d.a)(n,2),i=r[0],s=r[1],a=Object(o.useState)(!1),u=Object(d.a)(a,2),j=u[0],b=u[1],l=Object(o.useState)(!1),O=Object(d.a)(l,2),x=O[0],m=O[1],p=Object(o.useState)(),f=Object(d.a)(p,2),g=f[0],S=f[1],v=Object(o.useState)(!1),C=Object(d.a)(v,2),E=C[0],A=C[1],I=Object(h.f)();Object(o.useEffect)((function(){ce.getAllStoryNames().then((function(e){return s(e)}),(function(e){return window.alert(e.message)}))}));return Object(Ne.jsxs)(he,{children:[Object(Ne.jsx)(ve,{children:Object(Ne.jsx)(re.d,{children:"Play stories in your library!"})}),Object(Ne.jsxs)(re.c,{flexWrap:"wrap",children:[i.map((function(e){return Object(Ne.jsx)(Me,{title:e,children:function(){switch(j){case!1:return Object(Ne.jsxs)(re.c,{mb:"5px",children:[Object(Ne.jsx)(re.b,{onClick:function(){return n=e,void ce.loadStory(n).then((function(){return I.push(Tt.PLAYER_PLAY)}),t.errorAlert);var n},bg:oe,mr:"5px",children:"Play"}),Object(Ne.jsx)(qe,{text:"Export",onClick:function(){return t=e,m(!0),void S(t);var t}})]});case!0:return Object(Ne.jsx)(re.b,{onClick:function(){return n=e,void ce.removeStory(n).then((function(){}),(function(e){return t.triggerAlert("Could not delete: "+e.message)}));var n},bg:ue,children:"Delete"})}}()},e)})),0===i.length&&Object(Ne.jsx)(Ce,{children:Object(Ne.jsx)(re.d,{children:'You don\'t have any stories in your library. Import some by clicking "Manage Library." Then click "Import!"'})})]}),Object(Ne.jsxs)(Ee,{children:[Object(Ne.jsx)(ke,{onClick:function(){return A(!0)},mr:"10px",children:"Import"}),Object(Ne.jsx)(re.b,{onClick:function(){return b((function(e){return!e}))},padding:"15px 25px",bg:ae,children:j?"Stop Managing Library":"Manage Library"})]}),g&&Object(Ne.jsx)(We,{visible:x,onClose:function(){return m(!1)},children:Object(Ne.jsx)(Se,{children:Object(Ne.jsx)(De,{name:g,onSuccess:function(){t.triggerMessage("Exported successfully!"),m(!1)},exportType:c.STORY})})}),Object(Ne.jsx)(We,{visible:E,onClose:function(){return A(!1)},children:Object(Ne.jsx)(Te,{onSuccess:function(){A(!1),ce.getAllStoryNames().then((function(e){return s(e)}),t.errorAlert)},importType:c.STORY})})]})},Be=n(22),Ue=n(28),ze=["href"],Qe=Object(ie.a)(re.d)(M||(M=Object(b.a)(["\n  color: ",";\n  font-weight: bold;\n  font-size: 20px;\n"])),je),Ve=function(e){var t=e.href,n=Object(Ue.a)(e,ze),c=Object(h.f)();return Object(Ne.jsx)(Qe,Object(Be.a)(Object(Be.a)({},n),{},{onClick:function(){c.push(t)}}))},Ke=Object(ie.a)(re.c)(q||(q=Object(b.a)(["\n  height: 10vh;\n  padding: 20px 25px;\n  color: ",";\n  background-color: ",";\n  align-items: center;\n"])),oe,de),He=function(){return Object(Ne.jsxs)(Ke,{children:[Object(Ne.jsx)(Ve,{href:Tt.HOME,fontSize:25,color:oe,children:"Saga"}),Object(Ne.jsx)(re.a,{mx:"auto"}),Object(Ne.jsx)(Ve,{marginRight:4,href:Tt.PLAYER_LIBRARY,children:"Play"}),Object(Ne.jsx)(Ve,{href:Tt.WRITER_LIBRARY,children:"Write"})]})},Ge=["to"],Je=function(e){var t=e.to,n=Object(Ue.a)(e,Ge),c=Object(h.f)();return Object(Ne.jsx)(re.b,Object(Be.a)(Object(Be.a)({},n),{},{onClick:function(){c.push(t)}}))},Xe=ie.a.div(Y||(Y=Object(b.a)(["\n  padding-left: 40px;\n"]))),Ze=Object(ie.a)(re.a)(B||(B=Object(b.a)(["\n  padding-top: 18vh;\n  font-size: 52px;\n  font-weight: bold;\n  margin-bottom: 200px;\n"]))),$e=Object(ie.a)(re.d)(U||(U=Object(b.a)(["\n  padding-top: 5vh;\n  padding-left: 100px;\n"]))),et=Object(ie.a)(re.d)(z||(z=Object(b.a)(["\n  display: inline-block;\n  font-style: italic;\n"]))),tt=function(){return Object(Ne.jsx)(Oe,{children:Object(Ne.jsxs)(Xe,{children:[Object(Ne.jsxs)(Ze,{children:[Object(Ne.jsxs)(re.d,{children:["Welcome to ",Object(Ne.jsx)(me,{color:oe,children:"Saga"}),","]}),Object(Ne.jsxs)($e,{children:["where you can ",Object(Ne.jsx)(et,{color:oe,children:"play"})," and"," ",Object(Ne.jsx)(et,{color:se,children:"write"})," interactive stories."]})]}),Object(Ne.jsxs)(re.c,{height:100,children:[Object(Ne.jsx)(Je,{to:Tt.PLAYER_LIBRARY,bg:oe,children:Object(Ne.jsx)(ge,{children:"Play a story!"})}),Object(Ne.jsx)(re.a,{width:15}),Object(Ne.jsx)(Je,{to:Tt.WRITER_LIBRARY,bg:se,children:Object(Ne.jsx)(ge,{children:"Write a new masterpiece!"})})]})]})})},nt=Object(ie.a)(re.c)(Q||(Q=Object(b.a)(["\n  border: 1px solid ",";\n  border-radius: 20;\n  padding: 5px 0 5px 15px;\n  margin-bottom: 10px;\n"])),de),ct=Object(ie.a)(re.b)(V||(V=Object(b.a)(["\n  padding: 0;\n  background: 0;\n"]))),rt=function(e){var t=e.visible,n=e.message,c=e.warn,r=e.onClose;return Object(Ne.jsx)(Ne.Fragment,{children:t&&Object(Ne.jsx)(Ne.Fragment,{children:Object(Ne.jsxs)(nt,{bg:c?ue:je,children:[Object(Ne.jsx)(re.d,{my:"auto",children:n}),Object(Ne.jsx)(re.a,{mx:"auto"}),Object(Ne.jsx)(ct,{onClick:r,color:de,children:"X"})]})})})},it="Untitled",ot=function(e){var t=e.onSuccess,n=e.message,c=Object(o.useState)(it),r=Object(d.a)(c,2),i=r[0],s=r[1];return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(fe,{children:"Start your next story!"}),Object(Ne.jsx)(ye.b,{name:"name",defaultValue:it,placeholder:"Name of new work",onChange:function(e){return s(e.target.value)},my:"10px"}),Object(Ne.jsx)(Ie,{onClick:function(){ce.startNewWork(i).then(t,n.errorAlert)},children:"Create New Work"})]})},st=function(e){var t=e.currentName,n=e.onSuccess,c=e.message,r=Object(o.useState)(t),i=Object(d.a)(r,2),s=i[0],a=i[1];return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsxs)(fe,{children:["Rename ",t]}),Object(Ne.jsx)(ye.b,{name:"newName",defaultValue:t,placeholder:"New Name",onChange:function(e){return a(e.target.value)},my:"10px"}),Object(Ne.jsx)(Ie,{onClick:function(){ce.renameWork(t,s).then(n,c.errorAlert)},children:"Rename"})]})},at=function(e){var t=e.message,n=Object(o.useState)([]),r=Object(d.a)(n,2),i=r[0],s=r[1],a=Object(o.useState)(!1),u=Object(d.a)(a,2),j=u[0],b=u[1],l=Object(o.useState)(!1),O=Object(d.a)(l,2),x=O[0],m=O[1],p=Object(o.useState)(!1),f=Object(d.a)(p,2),g=f[0],S=f[1],v=Object(o.useState)(!1),C=Object(d.a)(v,2),E=C[0],A=C[1],I=Object(h.f)();Object(o.useEffect)((function(){ce.getAllWorkNames().then((function(e){return s(e)})).catch((function(e){return window.alert(e.message)}))}));var k=function(){ce.getAllWorkNames().then((function(e){return s(e)}),t.errorAlert)},y=function(){m(!1),k()};return Object(Ne.jsxs)(he,{children:[Object(Ne.jsx)(ve,{children:Object(Ne.jsx)(re.d,{children:"Write your next story!"})}),Object(Ne.jsxs)(re.c,{flexWrap:"wrap",children:[i.map((function(e){return Object(Ne.jsx)(Me,{title:e,children:function(){switch(j){case!1:return Object(Ne.jsx)(re.b,{onClick:function(){return n=e,void ce.loadWork(n).then((function(){return I.push(Tt.WRITER_EDIT)}),t.errorAlert);var n},bg:oe,mb:"5px",children:"Edit"});case!0:return Object(Ne.jsxs)(re.c,{children:[Object(Ne.jsx)(We,{visible:x,onClose:function(){return m(!1)},children:Object(Ne.jsx)(Se,{children:Object(Ne.jsx)(st,{currentName:e,onSuccess:y,message:t})})}),Object(Ne.jsx)(qe,{text:"Rename",onClick:function(){return m(!0)},margin:"0 5px 0 0"}),Object(Ne.jsx)(re.b,{onClick:function(){return n=e,void ce.removeWork(n).then(k,(function(e){return t.triggerAlert("Could not delete: "+e.message)}));var n},bg:ue,children:"Delete"})]})}}()},e)})),0===i.length&&Object(Ne.jsx)(Ce,{children:Object(Ne.jsx)(re.d,{children:"You don't have any works in your library. Create a new one!"})})]}),Object(Ne.jsxs)(Ee,{children:[Object(Ne.jsx)(ke,{onClick:function(){return S(!0)},children:"Start New Story"}),Object(Ne.jsx)(ke,{onClick:function(){return A(!0)},margin:"0 10px",children:"Import"}),Object(Ne.jsx)(re.b,{onClick:function(){return b((function(e){return!e}))},padding:"15px 25px",bg:ae,children:j?"Stop Managing Library":"Manage Library"})]}),Object(Ne.jsx)(We,{visible:g,onClose:function(){return S(!1)},children:Object(Ne.jsx)(Se,{children:Object(Ne.jsx)(ot,{onSuccess:function(){S(!1),k()},message:t})})}),Object(Ne.jsx)(We,{visible:E,onClose:function(){return A(!1)},children:Object(Ne.jsx)(Te,{onSuccess:function(){A(!1),k()},importType:c.WORK})})]})},ut=function(e){var t,n,c=e.decision;return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(pe,{children:"Type"}),Object(Ne.jsx)(re.d,{children:c.type.toString()}),Object(Ne.jsx)(pe,{children:"Description"}),Object(Ne.jsx)(re.d,{children:c.description}),Object(Ne.jsx)(pe,{children:"Outcome"}),function(){switch(c.type){case r.DEPENDENT:return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsxs)(re.d,{children:["if ",c.dependency," is below ",c.threshold,": Choice #",c.outcome1Id]}),Object(Ne.jsxs)(re.d,{children:["if ",c.dependency," is above ",c.threshold,": Choice #",c.outcome2Id]})]});default:return Object(Ne.jsxs)(re.d,{children:["Choice #",c.outcome1Id]})}}(),Object(Ne.jsx)(pe,{children:"Consequences"}),null===(t=c.consequences)||void 0===t?void 0:t.map((function(e,t){var n;switch(e.type){case i.ADD:n="Add ".concat(e.var," to ").concat(e.status);break;case i.SET:n="Set ".concat(e.status," to ").concat(e.var)}return Object(Ne.jsx)(re.d,{children:n},t)})),0===(null===(n=c.consequences)||void 0===n?void 0:n.length)&&Object(Ne.jsx)(re.d,{children:"None"})]})},jt=function(e){var t=e.choice,n=e.option,c=e.decision,r=e.onSuccess,i=e.message;return Object(Ne.jsxs)(Me,{title:"Option #".concat(n),children:[Object(Ne.jsx)(ut,{decision:c}),Object(Ne.jsx)(re.b,{onClick:function(){ce.removeOption(t,n).then(r,i.errorAlert)},mt:"10px",bg:ue,children:"Remove Option"})]})},dt=function(e){var t=e.onDescriptionChange,n=e.onOutcomeIdChange,c=e.choices;return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(pe,{children:"Description"}),Object(Ne.jsx)(ye.b,{name:"description",placeholder:"Description",my:"5px",onChange:function(e){return t(e.target.value)}}),Object(Ne.jsx)(pe,{children:"Outcome"}),Object(Ne.jsxs)(re.c,{alignItems:"center",children:[Object(Ne.jsx)(re.d,{mr:"5px",children:"Choice #"}),Object(Ne.jsx)(ye.d,{name:"outcomeId",onChange:function(e){n(Number(e.currentTarget.value))},my:"5px",minWidth:"50px",children:c.map((function(e){return Object(Ne.jsx)("option",{children:e.id},e.id)}))})]})]})},bt=function(e){var t=e.onSuccess,n=e.choiceId,c=e.choices,r=Object(o.useState)(),i=Object(d.a)(r,2),s=i[0],a=i[1],u=Object(o.useState)(0),j=Object(d.a)(u,2),b=j[0],l=j[1],h=Object(o.useState)(),O=Object(d.a)(h,2),x=O[0],m=O[1],p=Object(o.useState)(),f=Object(d.a)(p,2),g=f[0],S=f[1],v=function(e){m(e),S(!0)};return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(dt,{onDescriptionChange:a,onOutcomeIdChange:l,choices:c}),g&&Object(Ne.jsx)(re.d,{color:ue,children:x}),Object(Ne.jsx)(Ie,{onClick:function(){s?ce.addSimpleDecision({description:s,choiceId:n,outcomeId:b}).then(t,(function(e){return v(e.message)})):v("All fields are required!")},mr:"5px",children:"Submit"})]})},lt=function(e,t,n){var c=e.target.value;c.includes(".")?t():n(Number(c))},ht=function(e){var t=e.onChange,n=e.statuses,c=e.feedback,r=Object(o.useState)(i.ADD),s=Object(d.a)(r,2),a=s[0],u=s[1],j=Object(o.useState)(0),b=Object(d.a)(j,2),l=b[0],h=b[1],O=Object(o.useState)(n[0].name),x=Object(d.a)(O,2),m=x[0],p=x[1];Object(o.useEffect)((function(){m&&t("".concat(a," ").concat(l," ").concat(m))}),[t,a,l,m]);var f=function(){c.giveFeedback("Must be an integer!")},g=function(e){c.hideFeedback(),h(e)};return Object(Ne.jsxs)(re.c,{children:[Object(Ne.jsxs)(re.a,{minWidth:"150px",children:[Object(Ne.jsx)(pe,{children:"Type"}),Object(Ne.jsxs)(ye.d,{name:"choiceId",onChange:function(e){return u(e.currentTarget.value)},children:[Object(Ne.jsx)("option",{children:i.ADD}),Object(Ne.jsx)("option",{children:i.SET})]})]}),Object(Ne.jsxs)(re.a,{mx:"10px",minWidth:"150px",children:[Object(Ne.jsx)(pe,{children:a===i.ADD?"Amount to Add":"Number to Set To"}),Object(Ne.jsx)(ye.b,{name:"val",placeholder:"0",type:"number",value:l,onChange:function(e){lt(e,f,g)}})]}),Object(Ne.jsxs)(re.a,{minWidth:"150px",children:[Object(Ne.jsx)(pe,{children:"Status to Impact"}),Object(Ne.jsx)(ye.d,{name:"choiceId",onChange:function(e){return p(e.currentTarget.value)},children:n.map((function(e){return Object(Ne.jsx)("option",{children:e.name},e.name)}))})]})]})},Ot=function(e){var t=e.onSuccess,n=e.choiceId,c=e.choices,r=e.statuses,i=Object(o.useState)(),s=Object(d.a)(i,2),a=s[0],u=s[1],b=Object(o.useState)(0),l=Object(d.a)(b,2),h=l[0],O=l[1],x=Object(o.useState)([]),m=Object(d.a)(x,2),p=m[0],f=m[1],g=Object(o.useState)(),S=Object(d.a)(g,2),v=S[0],C=S[1],E=Object(o.useState)(),A=Object(d.a)(E,2),I=A[0],k=A[1],y=Object(o.useState)(),N=Object(d.a)(y,2),D=N[0],T=N[1],P={giveFeedback:function(e){k(e),T(!0)},hideFeedback:function(){return T(!1)}};return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(dt,{onDescriptionChange:u,onOutcomeIdChange:O,choices:c}),Object(Ne.jsx)(pe,{children:"Consequences"}),p.map((function(e,t){return Object(Ne.jsx)(re.d,{children:e},t)})),Object(Ne.jsxs)(re.c,{alignItems:"flex-end",mt:"5px",children:[Object(Ne.jsx)(ht,{onChange:C,statuses:r,feedback:P}),Object(Ne.jsx)(Ie,{onClick:function(){v?(f((function(e){return[].concat(Object(j.a)(e),[v])})),C(void 0)):P.giveFeedback("All consequence fields are required!")},margin:"0 10px 0 10px",children:"Add"})]}),Object(Ne.jsx)("br",{}),D&&Object(Ne.jsx)(re.d,{color:ue,children:I}),Object(Ne.jsx)(Ie,{onClick:function(){a?ce.addConsequentialDecision({description:a,choiceId:n,outcomeId:h,consequences:p}).then(t,(function(e){return P.giveFeedback(e.message)})):P.giveFeedback("All fields are required!")},mr:"5px",children:"Submit"})]})},xt=function(e){var t=e.onDescriptionChange,n=e.onDependencyChange,c=e.onThresholdChange,r=e.onOutcomeBelowIdChange,i=e.onOutcomeMeetsIdChange,o=e.choices,s=e.statuses,a=e.feedback,u=function(){a.giveFeedback("Must be an integer!")},j=function(e){a.hideFeedback(),c(e)};return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(pe,{children:"Description"}),Object(Ne.jsx)(ye.b,{name:"description",placeholder:"Description",my:"5px",onChange:function(e){return t(e.target.value)}}),Object(Ne.jsx)(pe,{children:"Status the decision is dependent on"}),Object(Ne.jsx)(ye.d,{name:"dependency",onChange:function(e){return n(e.currentTarget.value)},children:s.map((function(e){return Object(Ne.jsx)("option",{children:e.name},e.name)}))}),Object(Ne.jsx)(pe,{children:"Status Value Threshold"}),Object(Ne.jsx)(ye.b,{name:"threshold",defaultValue:0,placeholder:"0",type:"number",onChange:function(e){lt(e,u,j)}}),Object(Ne.jsx)(pe,{children:"Outcome If Status Is Below Threshold"}),Object(Ne.jsxs)(re.c,{alignItems:"center",children:[Object(Ne.jsx)(re.d,{mr:"5px",children:"Choice #"}),Object(Ne.jsx)(ye.d,{name:"outcomeBelowId",onChange:function(e){r(Number(e.currentTarget.value))},my:"5px",minWidth:"50px",children:o.map((function(e){return Object(Ne.jsx)("option",{children:e.id},e.id)}))})]}),Object(Ne.jsx)(pe,{children:"Outcome If Status Meets Threshold"}),Object(Ne.jsxs)(re.c,{alignItems:"center",children:[Object(Ne.jsx)(re.d,{mr:"5px",children:"Choice #"}),Object(Ne.jsx)(ye.d,{name:"outcomeMeetsId",onChange:function(e){i(Number(e.currentTarget.value))},my:"5px",minWidth:"50px",children:o.map((function(e){return Object(Ne.jsx)("option",{children:e.id},e.id)}))})]})]})},mt=function(e){var t=e.onSuccess,n=e.choiceId,c=e.choices,r=e.statuses,i=Object(o.useState)(),s=Object(d.a)(i,2),a=s[0],u=s[1],j=Object(o.useState)(r[0].name),b=Object(d.a)(j,2),l=b[0],h=b[1],O=Object(o.useState)(0),x=Object(d.a)(O,2),m=x[0],p=x[1],f=Object(o.useState)(0),g=Object(d.a)(f,2),S=g[0],v=g[1],C=Object(o.useState)(0),E=Object(d.a)(C,2),A=E[0],I=E[1],k=Object(o.useState)(),y=Object(d.a)(k,2),N=y[0],D=y[1],T=Object(o.useState)(),P=Object(d.a)(T,2),w=P[0],L=P[1],F={giveFeedback:function(e){D(e),L(!0)},hideFeedback:function(){return L(!1)}};return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(xt,{onDescriptionChange:u,onDependencyChange:h,onThresholdChange:p,onOutcomeBelowIdChange:v,onOutcomeMeetsIdChange:I,choices:c,statuses:r,feedback:F}),w&&Object(Ne.jsx)(re.d,{color:ue,children:N}),Object(Ne.jsx)(Ie,{onClick:function(){a?ce.addSimpleDependent({description:a,choiceId:n,dependency:l,threshold:m,outcomeBelowId:S,outcomeMeetsId:A}).then(t,(function(e){return F.giveFeedback(e.message)})):F.giveFeedback("All fields are required!")},mr:"5px",children:"Submit"})]})},pt=function(e){var t=e.onSuccess,n=e.choiceId,c=e.choices,r=e.statuses,i=Object(o.useState)(),s=Object(d.a)(i,2),a=s[0],u=s[1],b=Object(o.useState)(r[0].name),l=Object(d.a)(b,2),h=l[0],O=l[1],x=Object(o.useState)(0),m=Object(d.a)(x,2),p=m[0],f=m[1],g=Object(o.useState)(0),S=Object(d.a)(g,2),v=S[0],C=S[1],E=Object(o.useState)(0),A=Object(d.a)(E,2),I=A[0],k=A[1],y=Object(o.useState)([]),N=Object(d.a)(y,2),D=N[0],T=N[1],P=Object(o.useState)(),w=Object(d.a)(P,2),L=w[0],F=w[1],W=Object(o.useState)(),R=Object(d.a)(W,2),_=R[0],M=R[1],q=Object(o.useState)(),Y=Object(d.a)(q,2),B=Y[0],U=Y[1],z={giveFeedback:function(e){M(e),U(!0)},hideFeedback:function(){return U(!1)}};return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(xt,{onDescriptionChange:u,onDependencyChange:O,onThresholdChange:f,onOutcomeBelowIdChange:C,onOutcomeMeetsIdChange:k,choices:c,statuses:r,feedback:z}),Object(Ne.jsx)(pe,{children:"Consequences"}),D.map((function(e,t){return Object(Ne.jsx)(re.d,{children:e},t)})),Object(Ne.jsxs)(re.c,{alignItems:"flex-end",mt:"5px",children:[Object(Ne.jsx)(ht,{onChange:F,statuses:r,feedback:z}),Object(Ne.jsx)(Ie,{onClick:function(){L?(T((function(e){return[].concat(Object(j.a)(e),[L])})),F(void 0)):z.giveFeedback("All consequence fields are required!")},margin:"0 10px 0 10px",children:"Add"})]}),Object(Ne.jsx)("br",{}),B&&Object(Ne.jsx)(re.d,{color:ue,children:_}),Object(Ne.jsx)(Ie,{onClick:function(){a?ce.addConsequentialDependent({description:a,choiceId:n,dependency:h,threshold:p,outcomeBelowId:v,outcomeMeetsId:I,consequences:D}).then(t,(function(e){return z.giveFeedback(e.message)})):z.giveFeedback("All fields are required!")},mr:"5px",children:"Submit"})]})};!function(e){e[e.ADD_SIMPLE=0]="ADD_SIMPLE",e[e.ADD_CONSEQUENTIAL=1]="ADD_CONSEQUENTIAL",e[e.ADD_SIMPLE_DEPENDENT=2]="ADD_SIMPLE_DEPENDENT",e[e.ADD_CONSEQUENTIAL_DEPENDENT=3]="ADD_CONSEQUENTIAL_DEPENDENT",e[e.NONE=4]="NONE"}(K||(K={}));var ft,gt,St=function(e){var t=e.choice,n=e.choices,c=e.decisions,r=e.statuses,i=e.onSuccess,s=e.message,a=Object(o.useState)(!1),u=Object(d.a)(a,2),j=u[0],b=u[1],l=t.options.length>0,h=Object(o.useState)(K.NONE),O=Object(d.a)(h,2),x=O[0],m=O[1],p=function(){i(),m(K.NONE)};return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsxs)(Me,{title:"Choice #".concat(t.id),minWidth:"350px",children:[t.options.map((function(e){var t=c[e.decision];return Object(Ne.jsx)(re.d,{children:"Option #".concat(e.id,": ").concat(t.description," => Choice #").concat(t.outcome1Id," ").concat(t.outcome2Id>-1?"or #".concat(t.outcome2Id):"")},e.id)})),!l&&Object(Ne.jsx)(re.d,{children:"No options"}),Object(Ne.jsx)(re.a,{textAlign:"right",mt:"15px",mb:"-10px",children:Object(Ne.jsx)(qe,{text:"Edit",onClick:function(){return b(!0)}})})]}),Object(Ne.jsx)(We,{visible:j,onClose:function(){return b(!1)},children:Object(Ne.jsxs)(Se,{children:[Object(Ne.jsxs)(fe,{children:["Edit Choice #",t.id]}),Object(Ne.jsx)(re.a,{width:"80vw",children:Object(Ne.jsxs)(re.c,{mt:"20px",flexWrap:"wrap",children:[t.options.map((function(e){return Object(Ne.jsx)(jt,{choice:t.id,option:e.id,decision:c[e.decision],onSuccess:i,message:s},e.id)})),!l&&Object(Ne.jsx)(re.d,{children:"No options"})]})}),Object(Ne.jsx)(re.a,{children:function(){switch(x){case K.ADD_SIMPLE:return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(fe,{children:"Add Simple Option"}),Object(Ne.jsx)(bt,{onSuccess:p,choiceId:t.id,choices:n}),Object(Ne.jsx)(qe,{text:"Cancel",onClick:function(){return m(K.NONE)}})]});case K.ADD_CONSEQUENTIAL:return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(fe,{children:"Add Consequential Option"}),Object(Ne.jsx)(Ot,{onSuccess:p,choiceId:t.id,choices:n,statuses:r}),Object(Ne.jsx)(qe,{text:"Cancel",onClick:function(){return m(K.NONE)}})]});case K.ADD_SIMPLE_DEPENDENT:return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(fe,{children:"Add Simple Dependent Decision"}),Object(Ne.jsx)(mt,{onSuccess:p,choiceId:t.id,choices:n,statuses:r}),Object(Ne.jsx)(qe,{text:"Cancel",onClick:function(){return m(K.NONE)}})]});case K.ADD_CONSEQUENTIAL_DEPENDENT:return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(fe,{children:"Add Consequential Dependent Decision"}),Object(Ne.jsx)(pt,{onSuccess:p,choiceId:t.id,choices:n,statuses:r}),Object(Ne.jsx)(qe,{text:"Cancel",onClick:function(){return m(K.NONE)}})]});case K.NONE:default:return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(pe,{mb:"5px",children:"Add Option"}),Object(Ne.jsx)(qe,{text:"Add Simple Option",margin:le,onClick:function(){return m(K.ADD_SIMPLE)}}),Object(Ne.jsx)(qe,{text:"Add Consequential Option",margin:le,onClick:function(){return m(K.ADD_CONSEQUENTIAL)}}),Object(Ne.jsx)(qe,{text:"Add Simple Dependent Option",margin:le,onClick:function(){return m(K.ADD_SIMPLE_DEPENDENT)}}),Object(Ne.jsx)(qe,{text:"Add Consequential Dependent Option",margin:le,onClick:function(){return m(K.ADD_CONSEQUENTIAL_DEPENDENT)}})]})}}()}),Object(Ne.jsx)(re.a,{textAlign:"right",mt:"10px",children:Object(Ne.jsx)(re.b,{onClick:function(){ce.removeChoice(t.id).then(i,s.errorAlert)},bg:ue,children:"Remove Choice"})})]})})]})},vt=Object(ie.a)(qe)(ft||(ft=Object(b.a)(["\n  display: inline-block;\n"]))),Ct=function(e){var t=e.message,n=e.title,c=e.onFinish,r=Object(o.useState)(!1),i=Object(d.a)(r,2),s=i[0],a=i[1],u=Object(o.useState)(n),j=Object(d.a)(u,2),b=j[0],l=j[1];return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(fe,{display:"inline-block",mr:"15px",children:"Story Title:"}),s?Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(ye.b,{name:"name",defaultValue:n,placeholder:"Untitled",display:"inline-block",width:"40%",onChange:function(e){return l(e.target.value)}}),Object(Ne.jsx)(Ie,{onClick:function(){ce.setName(b).then((function(){c(),a(!1)}),t.errorAlert)},display:"inline-block",ml:"15px",mr:"8px",children:"Submit"})]}):Object(Ne.jsx)(fe,{display:"inline-block",mr:"15px",children:n}),Object(Ne.jsx)(vt,{onClick:function(){a((function(e){return!e}))},text:s?"Cancel":"Change Title"})]})},Et=function(e){var t=e.updateName,n=e.onSuccess,c=Object(o.useState)(),r=Object(d.a)(c,2),i=r[0],s=r[1],a=Object(o.useState)(0),u=Object(d.a)(a,2),j=u[0],b=u[1],l=Object(o.useState)(),h=Object(d.a)(l,2),O=h[0],x=h[1],m=Object(o.useState)(),p=Object(d.a)(m,2),f=p[0],g=p[1];Object(o.useEffect)((function(){t&&s(t)}),[t]);var S=function(e){x(e),g(!0)},v=function(){S("Must be an integer!")},C=function(e){g(!1),b(e)};return Object(Ne.jsxs)(Ne.Fragment,{children:[!t&&Object(Ne.jsx)(ye.b,{name:"name",placeholder:"Status Name",onChange:function(e){return s(e.target.value)},mb:"7px"}),Object(Ne.jsx)(ye.b,{name:"val",defaultValue:0,placeholder:"0",type:"number",onChange:function(e){lt(e,v,C)},mb:"7px"}),f&&Object(Ne.jsx)(re.d,{color:ue,children:O}),Object(Ne.jsx)(Ie,{onClick:function(){i?ce.addStatus(i,j).then(n,(function(e){return S(e.message)})):S("All fields are required!")},mr:"5px",children:"Submit"})]})},At=function(e){var t=e.status,n=e.updateStory,c=e.message,r=Object(o.useState)(!1),i=Object(d.a)(r,2),s=i[0],a=i[1];return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsxs)(Me,{title:t.name,children:[Object(Ne.jsxs)(re.d,{children:["Initial Value: ",t.value]}),Object(Ne.jsx)(re.a,{textAlign:"right",mt:"15px",mb:"-10px",children:Object(Ne.jsx)(qe,{text:"Edit",onClick:function(){return a(!0)}})})]}),Object(Ne.jsx)(We,{visible:s,onClose:function(){return a(!1)},children:Object(Ne.jsxs)(Se,{children:[Object(Ne.jsxs)(fe,{children:["Update Status: ",t.name]}),Object(Ne.jsx)(pe,{my:"10px",children:"Update Initial Value"}),Object(Ne.jsx)(Et,{updateName:t.name,onSuccess:n}),Object(Ne.jsx)("br",{}),Object(Ne.jsx)(Ae,{children:Object(Ne.jsx)(re.b,{onClick:function(){ce.removeStatus(t.name).then(null,c.errorAlert)},bg:ue,children:"Remove Status"})})]})})]})},It=function(e){var t=e.choices,n=e.onSuccess,c=e.message,r=Object(o.useState)(-1),i=Object(d.a)(r,2),s=i[0],a=i[1];return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(pe,{children:"Initial Choice"}),Object(Ne.jsxs)(re.c,{alignItems:"center",children:[Object(Ne.jsx)(re.d,{mr:"5px",children:"Choice #"}),Object(Ne.jsx)(ye.d,{name:"choice",onChange:function(e){a(Number(e.currentTarget.value))},my:"5px",minWidth:"50px",children:t.map((function(e){return Object(Ne.jsx)("option",{children:e.id},e.id)}))})]}),Object(Ne.jsx)(Ie,{onClick:function(){ce.setInitial(s).then(n,c.errorAlert)},mr:"5px",children:"Set Initial Choice"})]})};!function(e){e[e.ADD_STATUS=0]="ADD_STATUS",e[e.SET_INITIAL=1]="SET_INITIAL",e[e.NONE=2]="NONE"}(gt||(gt={}));var kt,yt,Nt,Dt,Tt,Pt={name:"",statuses:[],choices:[],decisions:[],choice:-1},wt=function(e){var t=e.message,n=Object(o.useState)(),r=Object(d.a)(n,2),i=r[0],s=r[1],a=Object(o.useState)(Pt),u=Object(d.a)(a,2),j=u[0],b=u[1],l=Object(o.useState)("Loading..."),h=Object(d.a)(l,2),O=h[0],x=h[1],m=Object(o.useState)(gt.NONE),p=Object(d.a)(m,2),f=p[0],g=p[1],S=Object(o.useState)(!1),v=Object(d.a)(S,2),C=v[0],E=v[1];Object(o.useEffect)((function(){var e=function(){ce.quitWork().then((function(){}),t.errorAlert)};return window.addEventListener("unload",e),function(){return window.removeEventListener("unload",e)}})),Object(o.useEffect)((function(){ce.getCurrentWork().then((function(e){""!==e.name?(b(e),ce.getCurrentWorkName().then((function(e){return s(e)}),t.errorAlert)):(s(void 0),x("Oops! Looks like you haven't loaded a story to edit!"))}),t.errorAlert)}),[t]);var A=function(){ce.getCurrentStatuses().then((function(e){return b((function(t){return{name:t.name,statuses:e,choices:t.choices,decisions:t.decisions,choice:t.choice}}))}),t.errorAlert),g(gt.NONE)},I=function(){ce.getInitialChoice().then((function(e){return b((function(t){return{name:t.name,statuses:t.statuses,choices:t.choices,decisions:t.decisions,choice:e}}))}),t.errorAlert),g(gt.NONE)},k=function(){ce.getCurrentChoices().then((function(e){ce.getCurrentDecisions().then((function(t){b((function(n){return{name:n.name,statuses:n.statuses,choices:e,decisions:t,choice:n.choice}}))}),t.errorAlert)}),t.errorAlert),g(gt.NONE)},y=function(){ce.addChoice().then(k,t.errorAlert)};return i?Object(Ne.jsxs)(he,{children:[Object(Ne.jsx)(xe,{children:"Story Editor"}),Object(Ne.jsxs)(fe,{children:["Work: ",i]}),Object(Ne.jsx)(Ct,{title:j.name,message:t,onFinish:function(){ce.getCurrentWork().then((function(e){return b(e)}),t.errorAlert)}}),Object(Ne.jsx)(fe,{children:"Statuses"}),Object(Ne.jsx)(re.c,{flexWrap:"wrap",children:j.statuses.map((function(e){return Object(Ne.jsx)(At,{status:e,updateStory:A,message:t},e.name)}))}),Object(Ne.jsx)(fe,{children:"Choices"}),Object(Ne.jsx)(re.c,{flexWrap:"wrap",children:j.choices.map((function(e){return Object(Ne.jsx)(St,{choice:e,choices:j.choices,decisions:j.decisions,statuses:j.statuses,onSuccess:k,message:t},e.id)}))}),Object(Ne.jsxs)(fe,{children:["Initial Choice: ",j.choice]}),Object(Ne.jsx)(fe,{children:"Edit"}),Object(Ne.jsxs)(re.a,{children:[function(){switch(f){case gt.ADD_STATUS:return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(fe,{children:"Add Status"}),Object(Ne.jsx)(Et,{onSuccess:A})]});case gt.SET_INITIAL:return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(fe,{children:"Set Initial Choice"}),Object(Ne.jsx)(It,{choices:j.choices,onSuccess:I,message:t})]});case gt.NONE:default:return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(qe,{text:"Add Status",margin:le,onClick:function(){return g(gt.ADD_STATUS)}}),Object(Ne.jsx)(qe,{text:"Add Choice",margin:le,onClick:y}),Object(Ne.jsx)(qe,{text:"Set Initial Choice",margin:le,onClick:function(){return g(gt.SET_INITIAL)}})]})}}(),f!==gt.NONE&&Object(Ne.jsx)(qe,{text:"Cancel",onClick:function(){return g(gt.NONE)}})]}),Object(Ne.jsx)(fe,{children:"Export"}),C?Object(Ne.jsxs)(re.a,{minWidth:"400px",mr:"10px",width:"50%",children:[Object(Ne.jsx)(De,{name:i,onSuccess:function(){t.triggerMessage("Exported successfully!"),E(!1)},exportType:c.WORK}),Object(Ne.jsx)(qe,{text:"Cancel",onClick:function(){return E(!1)},margin:"10px 0 0 0"})]}):Object(Ne.jsxs)(re.c,{children:[Object(Ne.jsx)(qe,{text:"Export",onClick:function(){E(!0)},margin:le}),Object(Ne.jsx)(qe,{text:"Export to Player",onClick:function(){ce.exportToPlayer().then((function(){return t.triggerMessage("Successfully exported!")}),t.errorAlert)},margin:le})]})]}):Object(Ne.jsxs)(he,{children:[Object(Ne.jsx)(xe,{children:O}),Object(Ne.jsx)(Je,{to:Tt.WRITER_LIBRARY,bg:se,children:Object(Ne.jsx)(ge,{children:"Go back to your library!"})})]})},Lt=Object(ie.a)(re.a)(kt||(kt=Object(b.a)(["\n  position: absolute;\n  bottom: 50px;\n  right: 50px;\n"]))),Ft=Object(ie.a)(re.d)(yt||(yt=Object(b.a)(["\n  font-size: 16px;\n  line-height: 22px;\n"]))),Wt=Object(ie.a)(Ft)(Nt||(Nt=Object(b.a)(["\n  padding-left: 20px;\n  padding-bottom: 5px;\n"]))),Rt=function(e){var t=e.message,n=Object(o.useState)(),c=Object(d.a)(n,2),r=c[0],i=c[1],s=Object(o.useState)([]),a=Object(d.a)(s,2),u=a[0],b=a[1],l=Object(o.useState)([]),h=Object(d.a)(l,2),O=h[0],x=h[1],m=Object(o.useState)("Loading..."),p=Object(d.a)(m,2),f=p[0],g=p[1];Object(o.useEffect)((function(){var e=function(){ce.quitStory().then((function(){}),t.errorAlert)};return window.addEventListener("unload",e),function(){return window.removeEventListener("unload",e)}})),Object(o.useEffect)((function(){ce.getCurrentStory().then((function(e){""!==e.name?(i(e),0===u.length&&ce.getCurrentChoice().then((function(e){return b((function(t){return[].concat(Object(j.a)(t),[e])}))}),t.errorAlert)):g("Oops! Looks like this story doesn't exist. Load a story from your library!")}),t.errorAlert)}),[t,u.length]);var S=function(){ce.getCurrentStory().then((function(e){return i(e)}),t.errorAlert)},v=function(){ce.getCurrentChoice().then((function(e){return b((function(t){return[].concat(Object(j.a)(t),[e])}))}),t.errorAlert)};return Object(Ne.jsxs)(he,{children:[function(){switch(r){case void 0:return Object(Ne.jsx)(xe,{children:f});default:var e=r.choices[r.choice].options;return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsx)(xe,{children:r.name}),u.map((function(e,t){return Object(Ne.jsxs)("div",{children:[Object(Ne.jsx)(Ft,{children:e}),t<O.length&&Object(Ne.jsxs)(Wt,{children:["Chose: ",O[t]]})]},e+t)})),e.length>0&&Object(Ne.jsxs)(re.c,{mt:10,children:[Object(Ne.jsxs)(Ft,{my:"auto",mr:10,children:["Choose:"," "]}),r&&r.choices[r.choice].options.map((function(e){return Object(Ne.jsx)(Ie,{onClick:function(){return n=e.decision,void(r&&(x((function(e){return[].concat(Object(j.a)(e),[r.decisions[n].description])})),ce.choose(n).then(S,t.errorAlert),v()));var n},mr:"10px",children:r.decisions[e.decision].description},e.id)}))]})]})}}(),Object(Ne.jsx)(Lt,{children:Object(Ne.jsx)(re.b,{onClick:function(){ce.restart().then((function(){S(),x((function(e){return[].concat(Object(j.a)(e),["Restarted the story"])})),v()}),t.errorAlert)},padding:"15px 25px",bg:ue,children:"Start Over"})})]})},_t=Object(ie.a)(re.a)(Dt||(Dt=Object(b.a)(["\n  position: absolute;\n  top: 20px;\n  left: 50%;\n  transform: translate(-50%, 0);\n"])));!function(e){e.HOME="/",e.PLAYER_LIBRARY="/player",e.WRITER_LIBRARY="/writer",e.PLAYER_PLAY="/player/play",e.WRITER_EDIT="/writer/edit"}(Tt||(Tt={}));var Mt=function(){var e=Object(o.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],r=function(e){c((function(t){return[].concat(Object(j.a)(t),[{visible:!0,message:e,warn:!0}])})),n.length>5&&s(0)},i={triggerMessage:function(e){c((function(t){return[].concat(Object(j.a)(t),[{visible:!0,message:e,warn:!1}])})),n.length>5&&s(0)},triggerAlert:r,errorAlert:function(e){r(e.message)}},s=function(e){var t=Object(j.a)(n);t.splice(e,1),c(t)};return Object(Ne.jsxs)(Ne.Fragment,{children:[Object(Ne.jsxs)(l.a,{basename:"/saga-frontend",children:[Object(Ne.jsx)(He,{}),Object(Ne.jsxs)(h.c,{children:[Object(Ne.jsx)(h.a,{path:Tt.HOME,exact:!0,children:Object(Ne.jsx)(tt,{message:i})}),Object(Ne.jsx)(h.a,{path:Tt.PLAYER_LIBRARY,exact:!0,children:Object(Ne.jsx)(Ye,{message:i})}),Object(Ne.jsx)(h.a,{path:Tt.WRITER_LIBRARY,exact:!0,children:Object(Ne.jsx)(at,{message:i})}),Object(Ne.jsx)(h.a,{path:Tt.PLAYER_PLAY,exact:!0,children:Object(Ne.jsx)(Rt,{message:i})}),Object(Ne.jsx)(h.a,{path:Tt.WRITER_EDIT,exact:!0,children:Object(Ne.jsx)(wt,{message:i})})]})]}),Object(Ne.jsx)(_t,{children:n.map((function(e,t){return Object(Ne.jsx)(rt,{visible:e.visible,message:e.message,warn:e.warn,onClose:function(){return s(t)}},t)}))})]})},qt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,58)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),i(e),o(e)}))};u.a.render(Object(Ne.jsx)(s.a.StrictMode,{children:Object(Ne.jsx)(Mt,{})}),document.getElementById("root")),qt()}},[[56,1,2]]]);
//# sourceMappingURL=main.29456862.chunk.js.map