{"version":3,"sources":["client/types.ts","client/client.ts","components/choiceCard/index.tsx","themes.ts","forms/exportForm/index.tsx","forms/importForm/index.tsx","components/popupWindow/index.tsx","components/boxCard/index.tsx","components/softButton/index.tsx","pages/player/index.tsx","components/navLink/index.tsx","components/navBar/index.tsx","components/linkButton/index.tsx","pages/home/index.tsx","components/alert/index.tsx","forms/startWorkForm/index.tsx","forms/renameWorkForm/index.tsx","pages/writer/index.tsx","components/decisionDescription/index.tsx","components/optionCard/index.tsx","components/simpleDecisionInputs/index.tsx","forms/addSimpleDecisionForm/index.tsx","forms/utils.ts","components/consequenceInput/index.tsx","forms/addConsequentialDecisionForm/index.tsx","components/dependentDecisionInputs/index.tsx","forms/addSimpleDependentDecisionForm/index.tsx","forms/addConsequentialDependentDecisionForm/index.tsx","pages/workEditor/index.tsx","forms/titleForm/index.tsx","forms/addStatusForm/index.tsx","components/statusCard/index.tsx","forms/setInitialChoiceForm/index.tsx","App.tsx","pages/storyPlayer/index.tsx","reportWebVitals.ts","index.tsx"],"names":["ApplicationTypes","DecisionTypes","StatusUpdateTypes","SwitchFormTypes","loadedPlayerName","loadedEditorName","allPlayerNames","allEditorNames","defaultStory","name","statuses","value","choices","id","options","decision","decisions","type","SIMPLE","description","threshold","outcome1Id","outcome2Id","choice","loadedPlayerStory","loadedEditorStory","importFromPath","a","Promise","reject","message","quit","resolve","Client","getCurrentStoryName","getCurrentChoice","getCurrentStory","loaded","getAllStoryNames","exportStory","path","exportStoryInProgress","importStory","next","choose","loadStory","restart","quitStory","removeStory","splice","indexOf","getAllWorkNames","getCurrentWorkName","getCurrentWork","getCurrentWorkStoryName","getCurrentStatuses","getInitialChoice","getCurrentChoices","getCurrentDecisions","exportWork","importWork","exportToPlayer","loadWork","quitWork","removeWork","renameWork","newName","startNewWork","setName","length","addStatus","val","res","existed","status","push","removeStatus","addChoice","setInitial","addSimpleDecision","addConsequentialDecision","addSimpleDependent","addConsequentialDependent","removeOption","option","removeChoice","PRIMARY","SECONDARY","TERTIARY","WARN","WHITE","BLACK","SOFT_BLACK","ACTION_BUTTON_MARGIN","PageContainer","styled","div","BlackPageContainer","StoryTitle","Text","InlineText","StrongText","Header","ButtonLabel","FormContainer","TitleBox","Box","EmptyLibrary","MidFlexElement","EndFlexElement","BottomFlex","Flex","BottomCornerFlex","PrimaryButton","Button","SecondaryButton","ExportForm","onSuccess","exportType","useState","errorVisible","setErrorVisible","errorMessage","setErrorMessage","setPath","exportOriginal","setExportOriginal","STORY","useEffect","handleError","err","showError","mb","defaultValue","placeholder","onChange","e","target","prev","bg","onClick","then","color","ImportForm","importType","importPath","setImportPath","promise","WORK","CloseBackground","ViewWindow","CloseButton","ButtonText","PopupWindow","visible","onClose","children","StoryCard","props","minWidth","CardHeader","BoxCard","title","SoftButton","text","margin","Player","library","setLibrary","manageLibrary","setManageLibrary","exportVisible","setExportVisible","exportName","setExportName","importVisible","setImportVisible","history","useHistory","window","alert","updateLibrary","errorAlert","flexWrap","map","Routes","PLAYER_PLAY","mr","triggerAlert","triggerMessage","padding","LinkText","NavLink","href","rest","NavFlex","NavBar","HOME","fontSize","mx","marginRight","PLAYER_LIBRARY","WRITER_LIBRARY","LinkButton","to","HomePageContainer","GreetingDescription","Italic","ButtonFlex","Home","my","width","Banner","Alert","warn","DEFAULT_NAME","StartWorkForm","RenameWorkForm","currentName","setNewName","Writer","renameVisible","setRenameVisible","startVisible","setStartVisible","catch","onRenameSuccess","WRITER_EDIT","DecisionDescription","toString","DEPENDENT","dependency","consequences","cons","i","ADD","var","SET","OptionCard","mt","SimpleDecisionInputs","onDescriptionChange","onOutcomeIdChange","alignItems","Number","currentTarget","AddSimpleDecisionForm","choiceId","setDescription","outcomeId","setOutcomeId","feedback","setFeedback","showFeedback","setShowFeedback","triggerFeedback","msg","validateInteger","onInvalid","onValid","targetValue","includes","ConsequenceInput","setType","setVal","showIntegerError","giveFeedback","changeVal","hideFeedback","AddConsequentialDecisionForm","setConsequences","currentConsequence","setCurrentConsequence","feedbackHandler","str","undefined","DependentDecisionInputs","onDependencyChange","onThresholdChange","onOutcomeBelowIdChange","onOutcomeMeetsIdChange","changeThreshold","AddSimpleDependentDecisionForm","setDependency","setThreshold","outcomeBelowId","setOutcomeBelowId","outcomeMeetsId","setOutcomeMeetsId","AddConsequentialDependentDecisionForm","ChoiceCard","editing","setEditing","hasOptions","NONE","currentForm","setCurrentForm","onFormSuccess","textAlign","ADD_SIMPLE","ADD_CONSEQUENTIAL","ADD_SIMPLE_DEPENDENT","ADD_CONSEQUENTIAL_DEPENDENT","InlineSoftButton","TitleForm","onFinish","titleRequest","setTitleRequest","display","ml","AddStatusForm","updateName","StatusCard","updateStory","SetInitialChoiceForm","setChoice","noStory","WorkEditor","workName","setWorkName","work","setWork","noWorkMessage","setNoWorkMessage","handleQuit","addEventListener","removeEventListener","updateStatuses","updateInitialChoice","updateChoicesAndDecisions","dRes","onAddChoice","ADD_STATUS","SET_INITIAL","BottomBox","ScriptText","DecisionText","StoryPlayer","story","setStory","prevChoices","setPrevChoices","prevDecisions","setPrevDecisions","noStoryMessage","setNoStoryMessage","getCurrentDescription","storyOptions","opt","Top","ghPagesDisclaimer","App","alerts","setAlerts","deleteAlert","copyAlerts","basename","process","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.c38554f0.chunk.js","sourcesContent":["export interface ErrorResponse {\n  readonly message: string;\n}\n\nexport enum ApplicationTypes {\n  STORY,\n  WORK,\n}\n\nexport interface ApiClient {\n  readonly getCurrentStoryName: () => Promise<string>;\n  readonly getCurrentChoice: () => Promise<string>;\n  readonly getCurrentStory: () => Promise<Story>;\n  readonly getAllStoryNames: () => Promise<string[]>;\n  readonly exportStory: (path: string, name: string) => Promise<void>;\n  readonly exportStoryInProgress: (path: string, name: string) => Promise<void>;\n  readonly importStory: (path: string) => Promise<void>;\n  readonly next: () => Promise<void>;\n  readonly choose: (decision: number) => Promise<void>;\n  readonly loadStory: (name: string) => Promise<void>;\n  readonly restart: () => Promise<void>;\n  readonly quitStory: () => Promise<void>;\n  readonly removeStory: (name: string) => Promise<void>;\n  readonly getAllWorkNames: () => Promise<string[]>;\n  readonly getCurrentWorkName: () => Promise<string>;\n  readonly getCurrentWork: () => Promise<Story>;\n  readonly getCurrentWorkStoryName: () => Promise<string>;\n  readonly getCurrentStatuses: () => Promise<StoryStatus[]>;\n  readonly getInitialChoice: () => Promise<number>;\n  readonly getCurrentChoices: () => Promise<Choice[]>;\n  readonly getCurrentDecisions: () => Promise<Decision[]>;\n  readonly exportWork: (path: string) => Promise<void>;\n  readonly importWork: (path: string) => Promise<void>;\n  readonly exportToPlayer: () => Promise<void>;\n  readonly loadWork: (name: string) => Promise<void>;\n  readonly quitWork: () => Promise<void>;\n  readonly removeWork: (name: string) => Promise<void>;\n  readonly renameWork: (name: string, newName: string) => Promise<void>;\n  readonly startNewWork: (name: string) => Promise<void>;\n  readonly setName: (name: string) => Promise<void>;\n  readonly addStatus: (name: string, val: number) => Promise<void>;\n  readonly removeStatus: (name: string) => Promise<void>;\n  readonly addChoice: () => Promise<void>;\n  readonly setInitial: (choice: number) => Promise<void>;\n  readonly addSimpleDecision: (\n    decision: AddSimpleDecisionRequest\n  ) => Promise<void>;\n  readonly addConsequentialDecision: (\n    decision: AddConsequentialDecisionRequest\n  ) => Promise<void>;\n  readonly addSimpleDependent: (\n    decision: AddSimpleDependentRequest\n  ) => Promise<void>;\n  readonly addConsequentialDependent: (\n    decision: AddConsequentialDependentRequest\n  ) => Promise<void>;\n  readonly removeOption: (choice: number, option: number) => Promise<void>;\n  readonly removeChoice: (choice: number) => Promise<void>;\n}\n\nexport interface Story {\n  readonly name: string;\n  readonly statuses: StoryStatus[];\n  readonly choices: Choice[];\n  readonly decisions: Decision[];\n  readonly choice: number;\n}\n\nexport interface StoryStatus {\n  readonly name: string;\n  readonly value: number;\n}\n\nexport interface Choice {\n  readonly id: number;\n  readonly options: Option[];\n}\n\nexport interface Option {\n  readonly id: number;\n  readonly decision: number;\n}\n\nexport interface Decision {\n  readonly id: number;\n  readonly type: DecisionTypes;\n  readonly description: string;\n  readonly dependency?: string;\n  readonly threshold: number;\n  readonly outcome1Id: number;\n  readonly outcome2Id: number;\n  readonly consequences?: StatusUpdate[];\n}\n\nexport interface StatusUpdate {\n  readonly type: StatusUpdateTypes;\n  readonly var: number;\n  readonly status: string;\n}\n\nexport enum DecisionTypes {\n  SIMPLE = \"SIMPLE\",\n  CONSEQUENTIAL = \"CONSEQUENTIAL\",\n  DEPENDENT = \"DEPENDENT\",\n}\n\nexport enum StatusUpdateTypes {\n  ADD = \"ADD\",\n  SET = \"SET\",\n}\n\nexport interface AddSimpleDecisionRequest {\n  readonly description: string;\n  readonly choiceId: number;\n  readonly outcomeId: number;\n}\n\nexport interface AddConsequentialDecisionRequest\n  extends AddSimpleDecisionRequest {\n  readonly consequences: string[];\n}\n\nexport interface AddSimpleDependentRequest {\n  readonly description: string;\n  readonly choiceId: number;\n  readonly dependency: string;\n  readonly threshold: number;\n  readonly outcomeBelowId: number;\n  readonly outcomeMeetsId: number;\n}\n\nexport interface AddConsequentialDependentRequest\n  extends AddSimpleDependentRequest {\n  readonly consequences: string[];\n}\n","import {\n  AddConsequentialDecisionRequest,\n  AddConsequentialDependentRequest,\n  AddSimpleDecisionRequest,\n  AddSimpleDependentRequest,\n  ApiClient,\n  Choice,\n  Decision,\n  DecisionTypes,\n  Story,\n  StoryStatus,\n} from \"./types\";\n\nlet loadedPlayerName: string = \"\";\nlet loadedEditorName: string = \"\";\nconst allPlayerNames: string[] = [\n  \"A Magical Adventure\",\n  \"A Sci-Fi Adventure\",\n  \"A Nonfiction Adventure\",\n];\nconst allEditorNames: string[] = [\n  \"A Magical Adventure\",\n  \"A Sci-Fi Adventure\",\n  \"A Nonfiction Adventure\",\n];\n\nconst defaultStory: Story = {\n  name: \"\",\n  statuses: [\n    {\n      name: \"points\",\n      value: 0,\n    },\n  ],\n  choices: [\n    {\n      id: 0,\n      options: [\n        {\n          id: 0,\n          decision: 0,\n        },\n      ],\n    },\n    {\n      id: 1,\n      options: [\n        {\n          id: 0,\n          decision: 1,\n        },\n        {\n          id: 1,\n          decision: 2,\n        },\n        {\n          id: 2,\n          decision: 3,\n        },\n      ],\n    },\n    {\n      id: 2,\n      options: [\n        {\n          id: 0,\n          decision: 4,\n        },\n      ],\n    },\n    {\n      id: 3,\n      options: [],\n    },\n  ],\n  decisions: [\n    {\n      id: 0,\n      type: DecisionTypes.SIMPLE,\n      description: \"Next\",\n      threshold: 0,\n      outcome1Id: 1,\n      outcome2Id: 0,\n    },\n    {\n      id: 1,\n      type: DecisionTypes.SIMPLE,\n      description: \"Iceland\",\n      threshold: 0,\n      outcome1Id: 2,\n      outcome2Id: 0,\n    },\n    {\n      id: 2,\n      type: DecisionTypes.SIMPLE,\n      description: \"Venice\",\n      threshold: 0,\n      outcome1Id: 2,\n      outcome2Id: 0,\n    },\n    {\n      id: 3,\n      type: DecisionTypes.SIMPLE,\n      description: \"Disneyland\",\n      threshold: 0,\n      outcome1Id: 2,\n      outcome2Id: 0,\n    },\n    {\n      id: 4,\n      type: DecisionTypes.SIMPLE,\n      description: \"Next\",\n      threshold: 0,\n      outcome1Id: 3,\n      outcome2Id: 0,\n    },\n  ],\n  choice: 0,\n};\n\nlet loadedPlayerStory: Story = defaultStory;\nlet loadedEditorStory: Story = defaultStory;\n\nconst importFromPath = async (): Promise<void> => {\n  return Promise.reject({ message: \"This is not supported in the demo.\" });\n};\n\nconst quit = (): Promise<void> => {\n  loadedEditorName = \"\";\n  return Promise.resolve();\n};\n\n// PLAYER\n\nconst getCurrentStoryName = (): Promise<string> => {\n  return Promise.resolve(loadedPlayerName);\n};\n\nconst getCurrentChoice = (): Promise<string> => {\n  let description = \"\";\n\n  switch (loadedPlayerStory.choice) {\n    case 0:\n      description =\n        \"This is a sample interactive story demo! Here you can see how players read their options and make decisions.\";\n      break;\n    case 1:\n      description = \"Try making a decision! Where will you go for vacation?\";\n      break;\n    case 2:\n      description = \"Nice decision! That's all for this demo!\";\n      break;\n    case 3:\n      description = \"Game over, no choices left.\";\n      break;\n  }\n\n  return Promise.resolve(description);\n};\n\nconst getCurrentStory = (): Promise<Story> => {\n  const loaded: Story = {\n    name: loadedPlayerName,\n    statuses: loadedPlayerStory.statuses,\n    choices: loadedPlayerStory.choices,\n    decisions: loadedPlayerStory.decisions,\n    choice: loadedPlayerStory.choice,\n  };\n  return Promise.resolve(loaded);\n};\n\nconst getAllStoryNames = (): Promise<string[]> => {\n  return Promise.resolve(allPlayerNames);\n};\n\nconst exportStory = (path: string, name: string): Promise<void> => {\n  return Promise.reject({ message: \"This is not supported in the demo.\" });\n};\n\nconst exportStoryInProgress = (path: string, name: string): Promise<void> => {\n  return Promise.reject({ message: \"This is not supported in the demo.\" });\n};\n\nconst importStory = (path: string): Promise<void> => {\n  return importFromPath();\n};\n\nconst next = (): Promise<void> => {\n  return Promise.reject({ message: \"This is not supported in the demo.\" });\n};\n\nconst choose = (decision: number): Promise<void> => {\n  loadedPlayerStory = {\n    name: loadedPlayerStory.name,\n    statuses: loadedPlayerStory.statuses,\n    choices: loadedPlayerStory.choices,\n    decisions: loadedPlayerStory.decisions,\n    choice: loadedPlayerStory.decisions[decision].outcome1Id,\n  };\n  return Promise.resolve();\n};\n\nconst loadStory = (name: string): Promise<void> => {\n  loadedPlayerName = name;\n  return Promise.resolve();\n};\n\nconst restart = (): Promise<void> => {\n  loadedPlayerStory = defaultStory;\n  return Promise.resolve();\n};\n\nconst quitStory = (): Promise<void> => {\n  return quit();\n};\n\nconst removeStory = (name: string): Promise<void> => {\n  allPlayerNames.splice(allPlayerNames.indexOf(name), 1);\n  return Promise.resolve();\n};\n\n// WRITER\n\nconst getAllWorkNames = (): Promise<string[]> => {\n  return Promise.resolve(allEditorNames);\n};\n\nconst getCurrentWorkName = (): Promise<string> => {\n  return Promise.resolve(loadedEditorName);\n};\n\nconst getCurrentWork = (): Promise<Story> => {\n  const loaded: Story = {\n    name: loadedEditorName,\n    statuses: loadedEditorStory.statuses,\n    choices: loadedEditorStory.choices,\n    decisions: loadedEditorStory.decisions,\n    choice: loadedEditorStory.choice,\n  };\n\n  return Promise.resolve(loaded);\n};\n\nconst getCurrentWorkStoryName = (): Promise<string> => {\n  if (loadedEditorName !== \"\") {\n    return Promise.resolve(loadedEditorStory.name);\n  } else {\n    return Promise.reject({ message: \"No loaded story.\" });\n  }\n};\n\nconst getCurrentStatuses = (): Promise<StoryStatus[]> => {\n  if (loadedEditorName !== \"\") {\n    return Promise.resolve(loadedEditorStory.statuses);\n  } else {\n    return Promise.reject({ message: \"No loaded story.\" });\n  }\n};\n\nconst getInitialChoice = (): Promise<number> => {\n  if (loadedEditorName !== \"\") {\n    return Promise.resolve(loadedEditorStory.choice);\n  } else {\n    return Promise.reject({ message: \"No loaded story.\" });\n  }\n};\n\nconst getCurrentChoices = (): Promise<Choice[]> => {\n  if (loadedEditorName !== \"\") {\n    return Promise.resolve(loadedEditorStory.choices);\n  } else {\n    return Promise.reject({ message: \"No loaded story.\" });\n  }\n};\n\nconst getCurrentDecisions = (): Promise<Decision[]> => {\n  if (loadedEditorName !== \"\") {\n    return Promise.resolve(loadedEditorStory.decisions);\n  } else {\n    return Promise.reject({ message: \"No loaded story.\" });\n  }\n};\n\nconst exportWork = (path: string): Promise<void> => {\n  return Promise.reject({ message: \"This is not supported in the demo.\" });\n};\n\nconst importWork = (path: string): Promise<void> => {\n  return Promise.reject({ message: \"This is not supported in the demo.\" });\n};\n\nconst exportToPlayer = (): Promise<void> => {\n  return Promise.reject({ message: \"This is not supported in the demo.\" });\n};\n\nconst loadWork = (name: string): Promise<void> => {\n  loadedEditorName = name;\n  return Promise.resolve();\n};\n\nconst quitWork = (): Promise<void> => {\n  return quit();\n};\n\nconst removeWork = (name: string): Promise<void> => {\n  allEditorNames.splice(allEditorNames.indexOf(name), 1);\n  return Promise.resolve();\n};\n\nconst renameWork = (name: string, newName: string): Promise<void> => {\n  return Promise.reject({ message: \"This is not supported in the demo.\" });\n};\n\nconst startNewWork = (name: string): Promise<void> => {\n  return Promise.reject({ message: \"This is not supported in the demo.\" });\n};\n\nconst setName = (name: string): Promise<void> => {\n  if (name.length < 1) {\n    return Promise.resolve();\n  }\n\n  loadedEditorName = name;\n  loadedEditorStory = {\n    name: name,\n    statuses: loadedEditorStory.statuses,\n    choices: loadedEditorStory.choices,\n    decisions: loadedEditorStory.decisions,\n    choice: loadedEditorStory.choice,\n  };\n  return Promise.resolve();\n};\n\nconst addStatus = (name: string, val: number): Promise<void> => {\n  let res = [];\n  let existed = false;\n  for (let status of loadedEditorStory.statuses) {\n    if (status.name === name) {\n      res.push({ name, value: val });\n      existed = true;\n    } else {\n      res.push(status);\n    }\n  }\n  if (existed) {\n    loadedEditorStory = {\n      name: loadedEditorStory.name,\n      statuses: res,\n      choices: loadedEditorStory.choices,\n      decisions: loadedEditorStory.decisions,\n      choice: loadedEditorStory.choice,\n    };\n    return Promise.resolve();\n  } else {\n    loadedEditorStory = {\n      name: loadedEditorStory.name,\n      statuses: [...loadedEditorStory.statuses, { name, value: val }],\n      choices: loadedEditorStory.choices,\n      decisions: loadedEditorStory.decisions,\n      choice: loadedEditorStory.choice,\n    };\n    return Promise.resolve();\n  }\n};\n\nconst removeStatus = (name: string): Promise<void> => {\n  return Promise.reject({ message: \"This is not supported in the demo.\" });\n};\n\nconst addChoice = (): Promise<void> => {\n  loadedEditorStory = {\n    name: loadedEditorStory.name,\n    statuses: loadedEditorStory.statuses,\n    choices: [\n      ...loadedEditorStory.choices,\n      { id: loadedEditorStory.choices.length, options: [] },\n    ],\n    decisions: loadedEditorStory.decisions,\n    choice: loadedEditorStory.choice,\n  };\n  return Promise.resolve();\n};\n\nconst setInitial = (choice: number): Promise<void> => {\n  loadedEditorStory = {\n    name: loadedEditorStory.name,\n    statuses: loadedEditorStory.statuses,\n    choices: [\n      ...loadedEditorStory.choices,\n      { id: loadedEditorStory.choices.length, options: [] },\n    ],\n    decisions: loadedEditorStory.decisions,\n    choice: choice,\n  };\n  return Promise.resolve();\n};\n\nconst addSimpleDecision = (\n  decision: AddSimpleDecisionRequest\n): Promise<void> => {\n  return Promise.reject({ message: \"This is not supported in the demo.\" });\n};\n\nconst addConsequentialDecision = (\n  decision: AddConsequentialDecisionRequest\n): Promise<void> => {\n  return Promise.reject({ message: \"This is not supported in the demo.\" });\n};\n\nconst addSimpleDependent = (\n  decision: AddSimpleDependentRequest\n): Promise<void> => {\n  return Promise.reject({ message: \"This is not supported in the demo.\" });\n};\n\nconst addConsequentialDependent = (\n  decision: AddConsequentialDependentRequest\n): Promise<void> => {\n  return Promise.reject({ message: \"This is not supported in the demo.\" });\n};\n\nconst removeOption = (choice: number, option: number): Promise<void> => {\n  return Promise.reject({ message: \"This is not supported in the demo.\" });\n};\n\nconst removeChoice = (choice: number): Promise<void> => {\n  return Promise.reject({ message: \"This is not supported in the demo.\" });\n};\n\nconst Client: ApiClient = {\n  getCurrentStoryName,\n  getCurrentChoice,\n  getCurrentStory,\n  getAllStoryNames,\n  exportStory,\n  exportStoryInProgress,\n  importStory,\n  next,\n  choose,\n  loadStory,\n  restart,\n  quitStory,\n  removeStory,\n  getAllWorkNames,\n  getCurrentWorkName,\n  getCurrentWork,\n  getCurrentWorkStoryName,\n  getCurrentStatuses,\n  getInitialChoice,\n  getCurrentChoices,\n  getCurrentDecisions,\n  exportWork,\n  importWork,\n  exportToPlayer,\n  loadWork,\n  quitWork,\n  removeWork,\n  renameWork,\n  startNewWork,\n  setName,\n  addStatus,\n  removeStatus,\n  addChoice,\n  setInitial,\n  addSimpleDecision,\n  addConsequentialDecision,\n  addSimpleDependent,\n  addConsequentialDependent,\n  removeOption,\n  removeChoice,\n};\n\nexport default Client;\n","import React, { useState } from \"react\";\nimport { Choice, Decision, StoryStatus } from \"../../client/types\";\nimport { Box, Button, Flex, Text } from \"rebass\";\nimport BoxCard from \"../boxCard\";\nimport SoftButton from \"../softButton\";\nimport { Messenger } from \"../../App\";\nimport Client from \"../../client/client\";\nimport { ACTION_BUTTON_MARGIN, WARN } from \"../../themes\";\nimport PopupWindow from \"../popupWindow\";\nimport { FormContainer, Header, StrongText } from \"../../themes\";\nimport OptionCard from \"../optionCard\";\nimport AddSimpleDecisionForm from \"../../forms/addSimpleDecisionForm\";\nimport AddConsequentialDecisionForm from \"../../forms/addConsequentialDecisionForm\";\nimport AddSimpleDependentDecisionForm from \"../../forms/addSimpleDependentDecisionForm\";\nimport AddConsequentialDependentDecisionForm from \"../../forms/addConsequentialDependentDecisionForm\";\n\nenum SwitchFormTypes {\n  ADD_SIMPLE,\n  ADD_CONSEQUENTIAL,\n  ADD_SIMPLE_DEPENDENT,\n  ADD_CONSEQUENTIAL_DEPENDENT,\n  NONE,\n}\n\ninterface ChoiceCardProps {\n  readonly choice: Choice;\n  readonly choices: Choice[];\n  readonly decisions: Decision[];\n  readonly statuses: StoryStatus[];\n  readonly onSuccess: () => void;\n  readonly message: Messenger;\n}\n\nconst ChoiceCard: React.FC<ChoiceCardProps> = ({\n  choice,\n  choices,\n  decisions,\n  statuses,\n  onSuccess,\n  message,\n}) => {\n  const [editing, setEditing] = useState(false);\n  const hasOptions = choice.options.length > 0;\n  const [currentForm, setCurrentForm] = useState<SwitchFormTypes>(\n    SwitchFormTypes.NONE\n  );\n\n  const onFormSuccess = (): void => {\n    onSuccess();\n    setCurrentForm(SwitchFormTypes.NONE);\n  };\n\n  const onRemoveChoice = (): void => {\n    Client.removeChoice(choice.id).then(onSuccess, message.errorAlert);\n  };\n\n  return (\n    <>\n      <BoxCard title={`Choice #${choice.id}`} minWidth={\"350px\"}>\n        {choice.options.map((option) => {\n          const decision: Decision = decisions[option.decision];\n          return (\n            <Text key={option.id}>{`Option #${option.id}: ${\n              decision.description\n            } => Choice #${decision.outcome1Id} ${\n              decision.outcome2Id > -1 ? `or #${decision.outcome2Id}` : \"\"\n            }`}</Text>\n          );\n        })}\n        {!hasOptions && <Text>No options</Text>}\n        <Box textAlign={\"right\"} mt={\"15px\"} mb={\"-10px\"}>\n          <SoftButton text={\"Edit\"} onClick={() => setEditing(true)} />\n        </Box>\n      </BoxCard>\n\n      <PopupWindow visible={editing} onClose={() => setEditing(false)}>\n        <FormContainer>\n          <Header>Edit Choice #{choice.id}</Header>\n          <Box width={\"80vw\"}>\n            <Flex mt={\"20px\"} flexWrap={\"wrap\"}>\n              {choice.options.map((option) => {\n                return (\n                  <OptionCard\n                    key={option.id}\n                    choice={choice.id}\n                    option={option.id}\n                    decision={decisions[option.decision]}\n                    onSuccess={onSuccess}\n                    message={message}\n                  />\n                );\n              })}\n              {!hasOptions && <Text>No options</Text>}\n            </Flex>\n          </Box>\n\n          <Box>\n            {(() => {\n              switch (currentForm) {\n                case SwitchFormTypes.ADD_SIMPLE:\n                  return (\n                    <>\n                      <Header>Add Simple Option</Header>\n                      <AddSimpleDecisionForm\n                        onSuccess={onFormSuccess}\n                        choiceId={choice.id}\n                        choices={choices}\n                      />\n                      <SoftButton\n                        text={\"Cancel\"}\n                        onClick={() => setCurrentForm(SwitchFormTypes.NONE)}\n                      />\n                    </>\n                  );\n                case SwitchFormTypes.ADD_CONSEQUENTIAL:\n                  return (\n                    <>\n                      <Header>Add Consequential Option</Header>\n                      <AddConsequentialDecisionForm\n                        onSuccess={onFormSuccess}\n                        choiceId={choice.id}\n                        choices={choices}\n                        statuses={statuses}\n                      />\n                      <SoftButton\n                        text={\"Cancel\"}\n                        onClick={() => setCurrentForm(SwitchFormTypes.NONE)}\n                      />\n                    </>\n                  );\n                case SwitchFormTypes.ADD_SIMPLE_DEPENDENT:\n                  return (\n                    <>\n                      <Header>Add Simple Dependent Decision</Header>\n                      <AddSimpleDependentDecisionForm\n                        onSuccess={onFormSuccess}\n                        choiceId={choice.id}\n                        choices={choices}\n                        statuses={statuses}\n                      />\n                      <SoftButton\n                        text={\"Cancel\"}\n                        onClick={() => setCurrentForm(SwitchFormTypes.NONE)}\n                      />\n                    </>\n                  );\n                case SwitchFormTypes.ADD_CONSEQUENTIAL_DEPENDENT:\n                  return (\n                    <>\n                      <Header>Add Consequential Dependent Decision</Header>\n                      <AddConsequentialDependentDecisionForm\n                        onSuccess={onFormSuccess}\n                        choiceId={choice.id}\n                        choices={choices}\n                        statuses={statuses}\n                      />\n                      <SoftButton\n                        text={\"Cancel\"}\n                        onClick={() => setCurrentForm(SwitchFormTypes.NONE)}\n                      />\n                    </>\n                  );\n                case SwitchFormTypes.NONE:\n                default:\n                  return (\n                    <>\n                      <StrongText mb={\"5px\"}>Add Option</StrongText>\n                      <SoftButton\n                        text={\"Add Simple Option\"}\n                        margin={ACTION_BUTTON_MARGIN}\n                        onClick={() =>\n                          setCurrentForm(SwitchFormTypes.ADD_SIMPLE)\n                        }\n                      />\n                      <SoftButton\n                        text={\"Add Consequential Option\"}\n                        margin={ACTION_BUTTON_MARGIN}\n                        onClick={() =>\n                          setCurrentForm(SwitchFormTypes.ADD_CONSEQUENTIAL)\n                        }\n                      />\n                      <SoftButton\n                        text={\"Add Simple Dependent Option\"}\n                        margin={ACTION_BUTTON_MARGIN}\n                        onClick={() =>\n                          setCurrentForm(SwitchFormTypes.ADD_SIMPLE_DEPENDENT)\n                        }\n                      />\n                      <SoftButton\n                        text={\"Add Consequential Dependent Option\"}\n                        margin={ACTION_BUTTON_MARGIN}\n                        onClick={() =>\n                          setCurrentForm(\n                            SwitchFormTypes.ADD_CONSEQUENTIAL_DEPENDENT\n                          )\n                        }\n                      />\n                    </>\n                  );\n              }\n            })()}\n          </Box>\n\n          <Box textAlign={\"right\"} mt={\"10px\"}>\n            <Button onClick={onRemoveChoice} bg={WARN}>\n              Remove Choice\n            </Button>\n          </Box>\n        </FormContainer>\n      </PopupWindow>\n    </>\n  );\n};\n\nexport default ChoiceCard;\n","import styled from \"@emotion/styled\";\nimport { Box, Button, Flex, Text } from \"rebass\";\n\nexport const PRIMARY = \"#4FC1E9\";\nexport const SECONDARY = \"#00A8B5\";\nexport const TERTIARY = \"#5978ab\";\nexport const WARN = \"#ff7373\";\nexport const WHITE = \"#FFF\";\nexport const BLACK = \"#000\";\nexport const SOFT_BLACK = \"#00171f\";\n\nexport const ACTION_BUTTON_MARGIN = \"0 5px 5px 0\";\n\nexport const PageContainer = styled.div`\n  height: 90vh;\n  padding: 20px 40px 100px;\n  overflow-y: auto;\n  box-sizing: border-box;\n\n  @media only screen and (max-width: 813px) {\n    padding: 20px 20px 60px;\n  }\n`;\n\nexport const BlackPageContainer = styled(PageContainer)`\n  background: linear-gradient(45deg, ${SOFT_BLACK} 60%, #003042);\n  color: ${WHITE};\n`;\n\nexport const StoryTitle = styled(Text)`\n  padding-top: 20px;\n  font-size: 48px;\n  font-weight: bold;\n  padding-bottom: 20px;\n`;\n\nexport const InlineText = styled(Text)`\n  display: inline-block;\n`;\n\nexport const StrongText = styled(Text)`\n  font-weight: bold;\n`;\n\nexport const Header = styled(Text)`\n  font-size: 24px;\n  font-weight: bold;\n  padding: 15px 0 5px;\n`;\n\nexport const ButtonLabel = styled(Text)`\n  font-size: 25px;\n  padding: 0 20px;\n\n  @media only screen and (max-width: 813px) {\n    font-size: 20px;\n  }\n`;\n\nexport const FormContainer = styled.div`\n  width: 60vw;\n  min-height: 200px;\n  color: ${BLACK};\n  padding: 50px;\n  text-align: left;\n  line-height: 20px;\n`;\n\nexport const TitleBox = styled(Box)`\n  text-align: left;\n  font-size: 52px;\n  font-weight: bold;\n  margin-top: 30px;\n  margin-bottom: 50px;\n`;\n\nexport const EmptyLibrary = styled(Box)`\n  text-align: center;\n  width: 100%;\n  font-size: 20px;\n  padding-top: 30px;\n`;\n\nexport const MidFlexElement = styled(Box)`\n  margin: 0 10px;\n\n  @media only screen and (max-width: 813px) {\n    margin: 0;\n  }\n`;\n\nexport const EndFlexElement = styled(Box)`\n  margin-left: 10px;\n\n  @media only screen and (max-width: 813px) {\n    margin: 10px 0 0 0;\n  }\n`;\n\nexport const BottomFlex = styled(Flex)`\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  background: ${SOFT_BLACK};\n  padding: 10px 20px;\n  width: 100%;\n  justify-content: flex-end;\n\n  @media only screen and (max-width: 813px) {\n    padding: 5px;\n  }\n`;\n\nexport const BottomCornerFlex = styled(Flex)`\n  position: absolute;\n  bottom: 20px;\n  right: 20px;\n`;\n\nexport const PrimaryButton = styled(Button)`\n  background: ${PRIMARY};\n`;\n\nexport const SecondaryButton = styled(Button)`\n  background: ${SECONDARY};\n`;\n","import React, { useEffect, useState } from \"react\";\nimport Client from \"../../client/client\";\nimport { Box, Button, Text } from \"rebass\";\nimport { Checkbox, Input, Label } from \"@rebass/forms\";\nimport { PRIMARY, WARN } from \"../../themes\";\nimport { ApplicationTypes, ErrorResponse } from \"../../client/types\";\n\ninterface ExportFormProps {\n  readonly name: string;\n  readonly onSuccess: () => void;\n  readonly exportType: ApplicationTypes;\n}\n\nconst ExportForm: React.FC<ExportFormProps> = ({\n  name,\n  onSuccess,\n  exportType,\n}) => {\n  // Error message\n  const [errorVisible, setErrorVisible] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  // Export Form\n  const [path, setPath] = useState<string>();\n  const [exportOriginal, setExportOriginal] = useState(true);\n\n  const exportStory: boolean = exportType === ApplicationTypes.STORY;\n\n  useEffect(() => {\n    setPath(`${name}.txt`);\n  }, [name]);\n\n  const handleStoryExport = (): void => {\n    if (!path) {\n      showError(\"Export path is required.\");\n    } else if (exportOriginal) {\n      Client.exportStory(path, name).then(onSuccess, handleError);\n    } else {\n      Client.exportStoryInProgress(path, name).then(onSuccess, handleError);\n    }\n  };\n\n  const handleWorkExport = (): void => {\n    if (!path) {\n      showError(\"Export path is required.\");\n    } else {\n      Client.exportWork(path).then(onSuccess, handleError);\n    }\n  };\n\n  const handleError = (err: ErrorResponse): void => {\n    showError(\"Could not export: \" + err.message);\n  };\n\n  const showError = (message: string): void => {\n    setErrorMessage(message);\n    setErrorVisible(true);\n  };\n\n  return (\n    <Box>\n      <Text mb={20}>Exporting: {name}</Text>\n      <Label>Path to export to</Label>\n      <Input\n        name={\"path\"}\n        defaultValue={path}\n        placeholder={`${name}.txt`}\n        mb={20}\n        onChange={(e) => setPath(e.target.value)}\n      />\n      {exportStory && (\n        <Label mb={20}>\n          <Checkbox\n            id={\"original\"}\n            name={\"original\"}\n            onChange={() => setExportOriginal((prev) => !prev)}\n          />\n          Export With Saved Progress\n        </Label>\n      )}\n      <Button\n        bg={PRIMARY}\n        onClick={exportStory ? handleStoryExport : handleWorkExport}\n      >\n        Submit\n      </Button>\n      {errorVisible && <Text color={WARN}>{errorMessage}</Text>}\n    </Box>\n  );\n};\n\nexport default ExportForm;\n","import React, { useState } from \"react\";\nimport Client from \"../../client/client\";\nimport { Button, Text } from \"rebass\";\nimport { Input, Label } from \"@rebass/forms\";\nimport { PRIMARY, WARN } from \"../../themes\";\nimport { ApplicationTypes, ErrorResponse } from \"../../client/types\";\nimport { FormContainer, Header } from \"../../themes\";\n\ninterface ImportFormProps {\n  readonly onSuccess: () => void;\n  readonly importType: ApplicationTypes;\n}\n\nconst ImportForm: React.FC<ImportFormProps> = ({ onSuccess, importType }) => {\n  // Error message\n  const [errorVisible, setErrorVisible] = useState(false);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  // Import Form\n  const [importPath, setImportPath] = useState<string>();\n\n  const handleImport = (): void => {\n    if (!importPath) {\n      showError(\"File path is required.\");\n    } else {\n      let promise;\n      switch (importType) {\n        case ApplicationTypes.STORY:\n          promise = Client.importStory(importPath);\n          break;\n        case ApplicationTypes.WORK:\n          promise = Client.importWork(importPath);\n      }\n      promise.then(onSuccess, (err: ErrorResponse) =>\n        showError(\"Could not import: \" + err.message)\n      );\n    }\n  };\n\n  const showError = (message: string): void => {\n    setErrorMessage(message);\n    setErrorVisible(true);\n  };\n\n  return (\n    <FormContainer>\n      <Header mb={20}>Import a story!</Header>\n      <Label>Path of story file:</Label>\n      <Input\n        name={\"path\"}\n        placeholder={`./your-story.txt`}\n        mb={20}\n        onChange={(e) => setImportPath(e.target.value)}\n      />\n      <Button bg={PRIMARY} onClick={handleImport}>\n        Submit\n      </Button>\n      {errorVisible && <Text color={WARN}>{errorMessage}</Text>}\n    </FormContainer>\n  );\n};\n\nexport default ImportForm;\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\nimport { Button, Text } from \"rebass\";\nimport { BLACK, WHITE } from \"../../themes\";\n\nconst CloseBackground = styled(Button)`\n  position: absolute;\n  left: 0;\n  top: 0;\n  color: ${BLACK};\n  opacity: 0.5;\n  width: 100vw;\n  height: 100vh;\n`;\n\nconst ViewWindow = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: ${WHITE};\n  border: 2px solid ${BLACK}20;\n  border-radius: 20;\n  max-height: 95vh;\n  max-width: 95vw;\n  overflow-y: auto;\n`;\n\nconst CloseButton = styled(Button)`\n  background: ${WHITE};\n  position: absolute;\n  right: 0;\n`;\n\nconst ButtonText = styled(Text)`\n  color: ${BLACK};\n  font-size: 25px;\n  padding: 5px;\n`;\n\ninterface PopupWindowProps {\n  readonly visible: boolean;\n  readonly onClose: () => void;\n}\n\nconst PopupWindow: React.FC<PopupWindowProps> = ({\n  visible,\n  onClose,\n  children,\n}) => {\n  return (\n    <>\n      {visible && (\n        <>\n          <CloseBackground onClick={onClose} />\n          <ViewWindow>\n            <CloseButton onClick={onClose}>\n              <ButtonText>X</ButtonText>\n            </CloseButton>\n            {children}\n          </ViewWindow>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default PopupWindow;\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\nimport { Box, Text } from \"rebass\";\nimport { SECONDARY, SOFT_BLACK } from \"../../themes\";\n\ninterface StoryCardProps {\n  minWidth?: string;\n}\n\nexport const StoryCard = styled(Box)`\n  padding: 20px;\n  min-width: ${(props: StoryCardProps) =>\n    props.minWidth ? props.minWidth : `200px`};\n  border: 2px solid ${SECONDARY};\n  border-radius: 5px;\n  margin-right: 20px;\n  margin-bottom: 10px;\n  box-shadow: 2px 3px 5px ${SOFT_BLACK};\n`;\n\nexport const CardHeader = styled(Text)`\n  font-size: 19px;\n  font-weight: bold;\n  padding-top: 5px;\n  padding-bottom: 15px;\n`;\n\ninterface CardProps {\n  readonly title: string;\n  readonly minWidth?: string;\n}\n\nconst BoxCard: React.FC<CardProps> = ({ title, minWidth, children }) => {\n  return (\n    <StoryCard minWidth={minWidth}>\n      <CardHeader>{title}</CardHeader>\n      {children}\n    </StoryCard>\n  );\n};\n\nexport default BoxCard;\n","import React from \"react\";\nimport { Button, Text } from \"rebass\";\nimport { TERTIARY, WHITE } from \"../../themes\";\n\ninterface SoftButtonProps {\n  readonly onClick?: () => void;\n  readonly text: string;\n  readonly margin?: string;\n}\n\nconst SoftButton: React.FC<SoftButtonProps> = ({ onClick, text, margin }) => {\n  return (\n    <>\n      <Button onClick={onClick} bg={TERTIARY} margin={margin ? margin : \"0\"}>\n        <Text color={WHITE}>{text}</Text>\n      </Button>\n    </>\n  );\n};\n\nexport default SoftButton;\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Client from \"../../client/client\";\nimport { Button, Flex, Text } from \"rebass\";\nimport {\n  BottomFlex,\n  EmptyLibrary,\n  FormContainer,\n  PageContainer,\n  SecondaryButton,\n  TitleBox,\n} from \"../../themes\";\nimport { PRIMARY, TERTIARY, WARN } from \"../../themes\";\nimport ExportForm from \"../../forms/exportForm\";\nimport ImportForm from \"../../forms/importForm\";\nimport PopupWindow from \"../../components/popupWindow\";\nimport { ErrorHandlerProps, Routes } from \"../../App\";\nimport { ApplicationTypes, ErrorResponse } from \"../../client/types\";\nimport BoxCard from \"../../components/boxCard\";\nimport SoftButton from \"../../components/softButton\";\n\nconst Player: React.FC<ErrorHandlerProps> = ({ message }) => {\n  const [library, setLibrary] = useState<string[]>([]);\n  const [manageLibrary, setManageLibrary] = useState(false);\n  // Export Form\n  const [exportVisible, setExportVisible] = useState(false);\n  const [exportName, setExportName] = useState<string>();\n  // Import Form\n  const [importVisible, setImportVisible] = useState(false);\n\n  const history = useHistory();\n\n  useEffect(() => {\n    Client.getAllStoryNames().then(\n      (res) => setLibrary(res),\n      (err: ErrorResponse) => window.alert(err.message)\n    );\n  });\n\n  const updateLibrary = (): void => {\n    Client.getAllStoryNames().then(\n      (res) => setLibrary(res),\n      message.errorAlert\n    );\n  };\n\n  const onClickExport = (name: string): void => {\n    setExportVisible(true);\n    setExportName(name);\n  };\n\n  const onImportSuccess = (): void => {\n    setImportVisible(false);\n    updateLibrary();\n  };\n\n  const onExportSuccess = (): void => {\n    message.triggerMessage(\"Exported successfully!\");\n    setExportVisible(false);\n  };\n\n  const onDelete = (name: string): void => {\n    Client.removeStory(name).then(updateLibrary, (err: ErrorResponse) =>\n      message.triggerAlert(\"Could not delete: \" + err.message)\n    );\n  };\n\n  const loadStory = (name: string): void => {\n    Client.loadStory(name).then(\n      () => history.push(Routes.PLAYER_PLAY),\n      message.errorAlert\n    );\n  };\n\n  return (\n    <>\n      <PageContainer>\n        <TitleBox>\n          <Text>Play stories in your library!</Text>\n        </TitleBox>\n        <Flex flexWrap={\"wrap\"}>\n          {library.map((title) => {\n            return (\n              <BoxCard key={title} title={title}>\n                {(() => {\n                  switch (manageLibrary) {\n                    case false:\n                      return (\n                        <Flex mb={\"5px\"}>\n                          <Button\n                            onClick={() => loadStory(title)}\n                            mr={\"5px\"}\n                            bg={PRIMARY}\n                          >\n                            Play\n                          </Button>\n                          <SoftButton\n                            text={\"Export\"}\n                            onClick={() => onClickExport(title)}\n                          />\n                        </Flex>\n                      );\n                    case true:\n                      return (\n                        <Button onClick={() => onDelete(title)} bg={WARN}>\n                          Delete\n                        </Button>\n                      );\n                  }\n                })()}\n              </BoxCard>\n            );\n          })}\n          {library.length === 0 && (\n            <EmptyLibrary>\n              <Text>\n                You don't have any stories in your library. Import some by\n                clicking \"Manage Library.\" Then click \"Import!\"\n              </Text>\n            </EmptyLibrary>\n          )}\n        </Flex>\n\n        {exportName && (\n          <PopupWindow\n            visible={exportVisible}\n            onClose={() => setExportVisible(false)}\n          >\n            <FormContainer>\n              <ExportForm\n                name={exportName}\n                onSuccess={onExportSuccess}\n                exportType={ApplicationTypes.STORY}\n              />\n            </FormContainer>\n          </PopupWindow>\n        )}\n\n        <PopupWindow\n          visible={importVisible}\n          onClose={() => setImportVisible(false)}\n        >\n          <ImportForm\n            onSuccess={onImportSuccess}\n            importType={ApplicationTypes.STORY}\n          />\n        </PopupWindow>\n      </PageContainer>\n\n      <BottomFlex>\n        <SecondaryButton onClick={() => setImportVisible(true)} mr={\"10px\"}>\n          Import\n        </SecondaryButton>\n        <Button\n          onClick={() => setManageLibrary((prev) => !prev)}\n          padding={\"15px 25px\"}\n          bg={TERTIARY}\n        >\n          {manageLibrary ? \"Stop Managing Library\" : \"Manage Library\"}\n        </Button>\n      </BottomFlex>\n    </>\n  );\n};\n\nexport default Player;\n","import React from \"react\";\nimport { Text } from \"rebass\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"@emotion/styled\";\nimport { WHITE } from \"../../themes\";\n\nconst LinkText = styled(Text)`\n  color: ${WHITE};\n  font-weight: bold;\n  font-size: 20px;\n`;\n\nconst NavLink: React.FC<any> = ({ href, ...rest }) => {\n  const history = useHistory();\n  return (\n    <LinkText\n      {...rest}\n      onClick={() => {\n        history.push(href);\n      }}\n    />\n  );\n};\n\nexport default NavLink;\n","import React from \"react\";\nimport { Flex, Box } from \"rebass\";\nimport { BLACK, PRIMARY } from \"../../themes\";\nimport { Routes } from \"../../App\";\nimport styled from \"@emotion/styled\";\nimport NavLink from \"../navLink\";\n\nconst NavFlex = styled(Flex)`\n  height: 10vh;\n  padding: 20px 25px;\n  color: ${PRIMARY};\n  background-color: ${BLACK};\n  align-items: center;\n`;\n\nconst NavBar: React.FC = () => {\n  return (\n    <NavFlex>\n      <NavLink href={Routes.HOME} fontSize={25} color={PRIMARY}>\n        Saga\n      </NavLink>\n      <Box mx=\"auto\" />\n      <NavLink marginRight={4} href={Routes.PLAYER_LIBRARY}>\n        Play\n      </NavLink>\n      <NavLink href={Routes.WRITER_LIBRARY}>Write</NavLink>\n    </NavFlex>\n  );\n};\n\nexport default NavBar;\n","import React from \"react\";\nimport { Button } from \"rebass\";\nimport { useHistory } from \"react-router-dom\";\n\nconst LinkButton: React.FC<any> = ({ to, ...rest }) => {\n  const history = useHistory();\n  return (\n    <Button\n      {...rest}\n      onClick={() => {\n        history.push(to);\n      }}\n    />\n  );\n};\n\nexport default LinkButton;\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\nimport { Box, Flex, Text } from \"rebass\";\nimport { ButtonLabel, InlineText, BlackPageContainer } from \"../../themes\";\nimport { SECONDARY, PRIMARY } from \"../../themes\";\nimport LinkButton from \"../../components/linkButton\";\nimport { ErrorHandlerProps, Routes } from \"../../App\";\n\nconst HomePageContainer = styled(Flex)`\n  padding: 20vh 80px 80px 40px;\n  height: 100%;\n  flex-direction: column;\n  justify-content: center;\n\n  @media only screen and (max-width: 813px) {\n    padding: 5px;\n  }\n`;\n\nconst TitleBox = styled(Box)`\n  font-size: 52px;\n  font-weight: bold;\n\n  @media only screen and (max-width: 813px) {\n    margin-bottom: 50px;\n  }\n`;\n\nconst GreetingDescription = styled(Text)`\n  padding-left: 100px;\n\n  @media only screen and (max-width: 813px) {\n    font-size: 42px;\n    padding-left: 0;\n  }\n`;\n\nconst Italic = styled(Text)`\n  display: inline-block;\n  font-style: italic;\n`;\n\nconst ButtonFlex = styled(Flex)`\n  height: 100px;\n\n  @media only screen and (max-width: 813px) {\n    height: 75px;\n  }\n`;\n\nconst Home: React.FC<ErrorHandlerProps> = () => {\n  return (\n    <BlackPageContainer>\n      <HomePageContainer>\n        <TitleBox>\n          <Text>\n            Welcome to <InlineText color={PRIMARY}>Saga</InlineText>,\n          </Text>\n          <GreetingDescription>\n            where you can <Italic color={PRIMARY}>play</Italic> and{\" \"}\n            <Italic color={SECONDARY}>write</Italic> interactive stories.\n          </GreetingDescription>\n        </TitleBox>\n        <Box my={\"auto\"} />\n        <ButtonFlex>\n          <LinkButton to={Routes.PLAYER_LIBRARY} bg={PRIMARY}>\n            <ButtonLabel>Play a story!</ButtonLabel>\n          </LinkButton>\n          <Box width={15} />\n          <LinkButton to={Routes.WRITER_LIBRARY} bg={SECONDARY}>\n            <ButtonLabel>Write a new masterpiece!</ButtonLabel>\n          </LinkButton>\n        </ButtonFlex>\n      </HomePageContainer>\n    </BlackPageContainer>\n  );\n};\n\nexport default Home;\n","import React from \"react\";\nimport styled from \"@emotion/styled\";\nimport { Box, Button, Flex, Text } from \"rebass\";\nimport { BLACK, WARN, WHITE } from \"../../themes\";\n\nconst Banner = styled(Flex)`\n  border: 1px solid ${BLACK};\n  border-radius: 20;\n  padding: 5px 0 5px 15px;\n  margin-bottom: 10px;\n`;\n\nconst CloseButton = styled(Button)`\n  padding: 0;\n  background: 0;\n`;\n\nexport interface AlertMessage {\n  readonly visible: boolean;\n  readonly message: string;\n  readonly warn: boolean;\n}\n\ninterface AlertProps extends AlertMessage {\n  readonly onClose: () => void;\n}\n\nconst Alert: React.FC<AlertProps> = ({ visible, message, warn, onClose }) => {\n  return (\n    <>\n      {visible && (\n        <>\n          <Banner bg={warn ? WARN : WHITE}>\n            <Text my={\"auto\"}>{message}</Text>\n            <Box mx={\"auto\"} />\n            <CloseButton onClick={onClose} color={BLACK}>\n              X\n            </CloseButton>\n          </Banner>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default Alert;\n","import React, { useState } from \"react\";\nimport { ErrorHandlerProps } from \"../../App\";\nimport Client from \"../../client/client\";\nimport { Input } from \"@rebass/forms\";\nimport { Header, PrimaryButton } from \"../../themes\";\n\nconst DEFAULT_NAME = \"Untitled\";\n\ninterface StartWorkFormProps extends ErrorHandlerProps {\n  readonly onSuccess: () => void;\n}\n\nconst StartWorkForm: React.FC<StartWorkFormProps> = ({\n  onSuccess,\n  message,\n}) => {\n  const [name, setName] = useState<string>(DEFAULT_NAME);\n\n  const onStartWork = (): void => {\n    Client.startNewWork(name).then(onSuccess, message.errorAlert);\n  };\n\n  return (\n    <>\n      <Header>Start your next story!</Header>\n      <Input\n        name={\"name\"}\n        defaultValue={DEFAULT_NAME}\n        placeholder={\"Name of new work\"}\n        onChange={(e) => setName(e.target.value)}\n        my={\"10px\"}\n      />\n      <PrimaryButton onClick={onStartWork}>Create New Work</PrimaryButton>\n    </>\n  );\n};\n\nexport default StartWorkForm;\n","import React, { useState } from \"react\";\nimport { ErrorHandlerProps } from \"../../App\";\nimport { Header, PrimaryButton } from \"../../themes\";\nimport Client from \"../../client/client\";\nimport { Input } from \"@rebass/forms\";\n\ninterface RenameWorkFormProps extends ErrorHandlerProps {\n  readonly currentName: string;\n  readonly onSuccess: () => void;\n}\n\nconst RenameWorkForm: React.FC<RenameWorkFormProps> = ({\n  currentName,\n  onSuccess,\n  message,\n}) => {\n  const [newName, setNewName] = useState<string>(currentName);\n\n  const onRename = (): void => {\n    Client.renameWork(currentName, newName).then(onSuccess, message.errorAlert);\n  };\n\n  return (\n    <>\n      <Header>Rename {currentName}</Header>\n      <Input\n        name={\"newName\"}\n        defaultValue={currentName}\n        placeholder={\"New Name\"}\n        onChange={(e) => setNewName(e.target.value)}\n        my={\"10px\"}\n      />\n      <PrimaryButton onClick={onRename}>Rename</PrimaryButton>\n    </>\n  );\n};\n\nexport default RenameWorkForm;\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Client from \"../../client/client\";\nimport { Button, Flex, Text } from \"rebass\";\nimport {\n  BottomFlex,\n  EmptyLibrary,\n  FormContainer,\n  PageContainer,\n  SecondaryButton,\n  TitleBox,\n} from \"../../themes\";\nimport { PRIMARY, TERTIARY, WARN } from \"../../themes\";\nimport ImportForm from \"../../forms/importForm\";\nimport PopupWindow from \"../../components/popupWindow\";\nimport { ErrorHandlerProps, Routes } from \"../../App\";\nimport { ApplicationTypes, ErrorResponse } from \"../../client/types\";\nimport BoxCard from \"../../components/boxCard\";\nimport StartWorkForm from \"../../forms/startWorkForm\";\nimport RenameWorkForm from \"../../forms/renameWorkForm\";\nimport SoftButton from \"../../components/softButton\";\n\nconst Writer: React.FC<ErrorHandlerProps> = ({ message }) => {\n  const [library, setLibrary] = useState<string[]>([]);\n  const [manageLibrary, setManageLibrary] = useState(false);\n  // Form visibility\n  const [renameVisible, setRenameVisible] = useState(false);\n  const [startVisible, setStartVisible] = useState(false);\n  const [importVisible, setImportVisible] = useState(false);\n\n  const history = useHistory();\n\n  useEffect(() => {\n    Client.getAllWorkNames()\n      .then((res) => setLibrary(res))\n      .catch((err) => window.alert(err.message));\n  });\n\n  const updateLibrary = (): void => {\n    Client.getAllWorkNames().then((res) => setLibrary(res), message.errorAlert);\n  };\n\n  const onRenameSuccess = (): void => {\n    setRenameVisible(false);\n    updateLibrary();\n  };\n\n  const onStartNewSuccess = (): void => {\n    setStartVisible(false);\n    updateLibrary();\n  };\n\n  const onImportSuccess = (): void => {\n    setImportVisible(false);\n    updateLibrary();\n  };\n\n  const onDelete = (name: string): void => {\n    Client.removeWork(name).then(updateLibrary, (err: ErrorResponse) =>\n      message.triggerAlert(\"Could not delete: \" + err.message)\n    );\n  };\n\n  const loadWork = (name: string): void => {\n    Client.loadWork(name).then(\n      () => history.push(Routes.WRITER_EDIT),\n      message.errorAlert\n    );\n  };\n\n  return (\n    <PageContainer>\n      <TitleBox>\n        <Text>Write your next story!</Text>\n      </TitleBox>\n      <Flex flexWrap={\"wrap\"}>\n        {library.map((title) => {\n          return (\n            <BoxCard key={title} title={title}>\n              {(() => {\n                switch (manageLibrary) {\n                  case false:\n                    return (\n                      <Button\n                        onClick={() => loadWork(title)}\n                        bg={PRIMARY}\n                        mb={\"5px\"}\n                      >\n                        Edit\n                      </Button>\n                    );\n                  case true:\n                    return (\n                      <Flex>\n                        <PopupWindow\n                          visible={renameVisible}\n                          onClose={() => setRenameVisible(false)}\n                        >\n                          <FormContainer>\n                            <RenameWorkForm\n                              currentName={title}\n                              onSuccess={onRenameSuccess}\n                              message={message}\n                            />\n                          </FormContainer>\n                        </PopupWindow>\n                        <SoftButton\n                          text={\"Rename\"}\n                          onClick={() => setRenameVisible(true)}\n                          margin={\"0 5px 0 0\"}\n                        />\n                        <Button onClick={() => onDelete(title)} bg={WARN}>\n                          Delete\n                        </Button>\n                      </Flex>\n                    );\n                }\n              })()}\n            </BoxCard>\n          );\n        })}\n        {library.length === 0 && (\n          <EmptyLibrary>\n            <Text>\n              You don't have any works in your library. Create a new one!\n            </Text>\n          </EmptyLibrary>\n        )}\n      </Flex>\n\n      <BottomFlex>\n        <SecondaryButton onClick={() => setStartVisible(true)}>\n          Start New\n        </SecondaryButton>\n        <SecondaryButton\n          onClick={() => setImportVisible(true)}\n          margin={\"0 10px\"}\n        >\n          Import\n        </SecondaryButton>\n        <Button\n          onClick={() => setManageLibrary((prev) => !prev)}\n          padding={\"15px 25px\"}\n          bg={TERTIARY}\n        >\n          {manageLibrary ? \"Stop Managing Library\" : \"Manage Library\"}\n        </Button>\n      </BottomFlex>\n\n      <PopupWindow\n        visible={startVisible}\n        onClose={() => setStartVisible(false)}\n      >\n        <FormContainer>\n          <StartWorkForm onSuccess={onStartNewSuccess} message={message} />\n        </FormContainer>\n      </PopupWindow>\n\n      <PopupWindow\n        visible={importVisible}\n        onClose={() => setImportVisible(false)}\n      >\n        <ImportForm\n          onSuccess={onImportSuccess}\n          importType={ApplicationTypes.WORK}\n        />\n      </PopupWindow>\n    </PageContainer>\n  );\n};\n\nexport default Writer;\n","import React from \"react\";\nimport { Decision, DecisionTypes, StatusUpdateTypes } from \"../../client/types\";\nimport { Text } from \"rebass\";\nimport { StrongText } from \"../../themes\";\n\ninterface DecisionDescriptionProps {\n  readonly decision: Decision;\n}\n\nconst DecisionDescription: React.FC<DecisionDescriptionProps> = ({\n  decision,\n}) => {\n  return (\n    <>\n      <StrongText>Type</StrongText>\n      <Text>{decision.type.toString()}</Text>\n      <StrongText>Description</StrongText>\n      <Text>{decision.description}</Text>\n      <StrongText>Outcome</StrongText>\n      {(() => {\n        switch (decision.type) {\n          case DecisionTypes.DEPENDENT:\n            return (\n              <>\n                <Text>\n                  if {decision.dependency} is below {decision.threshold}: Choice\n                  #{decision.outcome1Id}\n                </Text>\n                <Text>\n                  if {decision.dependency} is above {decision.threshold}: Choice\n                  #{decision.outcome2Id}\n                </Text>\n              </>\n            );\n          default:\n            return <Text>Choice #{decision.outcome1Id}</Text>;\n        }\n      })()}\n      <StrongText>Consequences</StrongText>\n      {decision.consequences?.map((cons, i) => {\n        let text: string;\n        switch (cons.type) {\n          case StatusUpdateTypes.ADD:\n            text = `Add ${cons.var} to ${cons.status}`;\n            break;\n          case StatusUpdateTypes.SET:\n            text = `Set ${cons.status} to ${cons.var}`;\n            break;\n        }\n        return <Text key={i}>{text}</Text>;\n      })}\n      {decision.consequences?.length === 0 && <Text>None</Text>}\n    </>\n  );\n};\n\nexport default DecisionDescription;\n","import React from \"react\";\nimport { Decision } from \"../../client/types\";\nimport BoxCard from \"../boxCard\";\nimport DecisionDescription from \"../decisionDescription\";\nimport { Button } from \"rebass\";\nimport Client from \"../../client/client\";\nimport { ErrorHandlerProps } from \"../../App\";\nimport { WARN } from \"../../themes\";\n\ninterface OptionCardProps extends ErrorHandlerProps {\n  readonly choice: number;\n  readonly option: number;\n  readonly decision: Decision;\n  readonly onSuccess: () => void;\n}\n\nconst OptionCard: React.FC<OptionCardProps> = ({\n  choice,\n  option,\n  decision,\n  onSuccess,\n  message,\n}) => {\n  const onRemove = (): void => {\n    Client.removeOption(choice, option).then(onSuccess, message.errorAlert);\n  };\n\n  return (\n    <BoxCard title={`Option #${option}`}>\n      <DecisionDescription decision={decision} />\n      <Button onClick={onRemove} mt={\"10px\"} bg={WARN}>\n        Remove Option\n      </Button>\n    </BoxCard>\n  );\n};\n\nexport default OptionCard;\n","import React, { ChangeEvent } from \"react\";\nimport { Choice } from \"../../client/types\";\nimport { Input, Select } from \"@rebass/forms\";\nimport { Flex, Text } from \"rebass\";\nimport { StrongText } from \"../../themes\";\n\ninterface SimpleDecisionInputsProps {\n  readonly onDescriptionChange: (description: string) => void;\n  readonly onOutcomeIdChange: (outcomeId: number) => void;\n  readonly choices: Choice[];\n}\n\nconst SimpleDecisionInputs: React.FC<SimpleDecisionInputsProps> = ({\n  onDescriptionChange,\n  onOutcomeIdChange,\n  choices,\n}) => {\n  const onOutcomeSelect = (e: ChangeEvent<HTMLSelectElement>): void => {\n    onOutcomeIdChange(Number(e.currentTarget.value));\n  };\n\n  return (\n    <>\n      <StrongText>Description</StrongText>\n      <Input\n        name={\"description\"}\n        placeholder={\"Description\"}\n        my={\"5px\"}\n        onChange={(e) => onDescriptionChange(e.target.value)}\n      />\n\n      <StrongText>Outcome</StrongText>\n      <Flex alignItems={\"center\"}>\n        <Text mr={\"5px\"}>Choice #</Text>\n        <Select\n          name=\"outcomeId\"\n          onChange={onOutcomeSelect}\n          my={\"5px\"}\n          minWidth={\"50px\"}\n        >\n          {choices.map((choice) => (\n            <option key={choice.id}>{choice.id}</option>\n          ))}\n        </Select>\n      </Flex>\n    </>\n  );\n};\n\nexport default SimpleDecisionInputs;\n","import React from \"react\";\nimport { Choice, ErrorResponse } from \"../../client/types\";\nimport Client from \"../../client/client\";\nimport { Text } from \"rebass\";\nimport { WARN } from \"../../themes\";\nimport { useState } from \"react\";\nimport SimpleDecisionInputs from \"../../components/simpleDecisionInputs\";\nimport { PrimaryButton } from \"../../themes\";\n\ninterface AddSimpleDecisionFormProps {\n  readonly onSuccess: () => void;\n  readonly choiceId: number;\n  readonly choices: Choice[];\n}\n\nconst AddSimpleDecisionForm: React.FC<AddSimpleDecisionFormProps> = ({\n  onSuccess,\n  choiceId,\n  choices,\n}) => {\n  const [description, setDescription] = useState<string>();\n  const [outcomeId, setOutcomeId] = useState<number>(0);\n  // Feedback\n  const [feedback, setFeedback] = useState<string>();\n  const [showFeedback, setShowFeedback] = useState<boolean>();\n\n  const triggerFeedback = (msg: string) => {\n    setFeedback(msg);\n    setShowFeedback(true);\n  };\n\n  const onSubmit = (): void => {\n    if (description) {\n      Client.addSimpleDecision({ description, choiceId, outcomeId }).then(\n        onSuccess,\n        (err: ErrorResponse) => triggerFeedback(err.message)\n      );\n    } else {\n      triggerFeedback(\"All fields are required!\");\n    }\n  };\n\n  return (\n    <>\n      <SimpleDecisionInputs\n        onDescriptionChange={setDescription}\n        onOutcomeIdChange={setOutcomeId}\n        choices={choices}\n      />\n      {showFeedback && <Text color={WARN}>{feedback}</Text>}\n      <PrimaryButton onClick={onSubmit} mr={\"5px\"}>\n        Submit\n      </PrimaryButton>\n    </>\n  );\n};\n\nexport default AddSimpleDecisionForm;\n","import { ChangeEvent } from \"react\";\n\nexport const validateInteger = (\n  e: ChangeEvent<HTMLInputElement>,\n  onInvalid: () => void,\n  onValid: (val: number) => void\n): void => {\n  const targetValue: string = e.target.value;\n  if (targetValue.includes(\".\")) {\n    onInvalid();\n  } else {\n    onValid(Number(targetValue));\n  }\n};\n\nexport interface Feedback {\n  readonly giveFeedback: (msg: string) => void;\n  readonly hideFeedback: () => void;\n}\n","import React, { ChangeEvent, useEffect, useState } from \"react\";\nimport { Input, Select } from \"@rebass/forms\";\nimport { Box, Flex } from \"rebass\";\nimport { MidFlexElement, StrongText } from \"../../themes\";\nimport { StatusUpdateTypes, StoryStatus } from \"../../client/types\";\nimport { Feedback, validateInteger } from \"../../forms/utils\";\n\ninterface ConsequenceInputProps {\n  readonly onChange: (consequence: string) => void;\n  readonly statuses: StoryStatus[];\n  readonly feedback: Feedback;\n}\n\nconst ConsequenceInput: React.FC<ConsequenceInputProps> = ({\n  onChange,\n  statuses,\n  feedback,\n}) => {\n  const [type, setType] = useState<string>(StatusUpdateTypes.ADD);\n  const [val, setVal] = useState<number>(0);\n  const [name, setName] = useState<string>(statuses[0].name);\n\n  useEffect(() => {\n    if (name) {\n      onChange(`${type} ${val} ${name}`);\n    }\n  }, [onChange, type, val, name]);\n\n  const showIntegerError = (): void => {\n    feedback.giveFeedback(\"Must be an integer!\");\n  };\n\n  const changeVal = (val: number): void => {\n    feedback.hideFeedback();\n    setVal(val);\n  };\n\n  const onValInputChange = (e: ChangeEvent<HTMLInputElement>): void => {\n    validateInteger(e, showIntegerError, changeVal);\n  };\n\n  return (\n    <Flex flexWrap={\"wrap\"}>\n      <Box minWidth={\"150px\"}>\n        <StrongText>Type</StrongText>\n        <Select\n          name=\"choiceId\"\n          onChange={(e) => setType(e.currentTarget.value)}\n        >\n          <option>{StatusUpdateTypes.ADD}</option>\n          <option>{StatusUpdateTypes.SET}</option>\n        </Select>\n      </Box>\n      <MidFlexElement minWidth={\"150px\"}>\n        <StrongText>\n          {type === StatusUpdateTypes.ADD\n            ? \"Amount to Add\"\n            : \"Number to Set To\"}\n        </StrongText>\n        <Input\n          name={\"val\"}\n          placeholder={\"0\"}\n          type={\"number\"}\n          value={val}\n          onChange={onValInputChange}\n        />\n      </MidFlexElement>\n      <Box minWidth={\"150px\"}>\n        <StrongText>Status to Impact</StrongText>\n        <Select\n          name=\"choiceId\"\n          onChange={(e) => setName(e.currentTarget.value)}\n        >\n          {statuses.map((status: StoryStatus) => {\n            return <option key={status.name}>{status.name}</option>;\n          })}\n        </Select>\n      </Box>\n    </Flex>\n  );\n};\n\nexport default ConsequenceInput;\n","import React from \"react\";\nimport { Choice, ErrorResponse, StoryStatus } from \"../../client/types\";\nimport Client from \"../../client/client\";\nimport { Flex, Text } from \"rebass\";\nimport { WARN } from \"../../themes\";\nimport { useState } from \"react\";\nimport SimpleDecisionInputs from \"../../components/simpleDecisionInputs\";\nimport ConsequenceInput from \"../../components/consequenceInput\";\nimport { EndFlexElement, PrimaryButton, StrongText } from \"../../themes\";\nimport { Feedback } from \"../utils\";\n\ninterface AddConsequentialDecisionProps {\n  readonly onSuccess: () => void;\n  readonly choiceId: number;\n  readonly choices: Choice[];\n  readonly statuses: StoryStatus[];\n}\n\nconst AddConsequentialDecisionForm: React.FC<AddConsequentialDecisionProps> = ({\n  onSuccess,\n  choiceId,\n  choices,\n  statuses,\n}) => {\n  const [description, setDescription] = useState<string>();\n  const [outcomeId, setOutcomeId] = useState<number>(0);\n  const [consequences, setConsequences] = useState<string[]>([]);\n  const [currentConsequence, setCurrentConsequence] = useState<string>();\n  // Feedback\n  const [feedback, setFeedback] = useState<string>();\n  const [showFeedback, setShowFeedback] = useState<boolean>();\n\n  const feedbackHandler: Feedback = {\n    giveFeedback: (msg: string) => {\n      setFeedback(msg);\n      setShowFeedback(true);\n    },\n    hideFeedback: () => setShowFeedback(false),\n  };\n\n  const onAddConsequence = (): void => {\n    if (currentConsequence) {\n      setConsequences((prev) => [...prev, currentConsequence]);\n      setCurrentConsequence(undefined);\n    } else {\n      feedbackHandler.giveFeedback(\"All consequence fields are required!\");\n    }\n  };\n\n  const onSubmit = (): void => {\n    if (description) {\n      Client.addConsequentialDecision({\n        description,\n        choiceId,\n        outcomeId,\n        consequences,\n      }).then(onSuccess, (err: ErrorResponse) =>\n        feedbackHandler.giveFeedback(err.message)\n      );\n    } else {\n      feedbackHandler.giveFeedback(\"All fields are required!\");\n    }\n  };\n\n  return (\n    <>\n      <SimpleDecisionInputs\n        onDescriptionChange={setDescription}\n        onOutcomeIdChange={setOutcomeId}\n        choices={choices}\n      />\n      <StrongText>Consequences</StrongText>\n      {consequences.map((str, i) => {\n        return <Text key={i}>{str}</Text>;\n      })}\n      <Flex alignItems={\"flex-end\"} flexWrap={\"wrap\"} mt={\"5px\"}>\n        <ConsequenceInput\n          onChange={setCurrentConsequence}\n          statuses={statuses}\n          feedback={feedbackHandler}\n        />\n        <EndFlexElement>\n          <PrimaryButton onClick={onAddConsequence}>Add</PrimaryButton>\n        </EndFlexElement>\n      </Flex>\n      <br />\n      {showFeedback && <Text color={WARN}>{feedback}</Text>}\n      <PrimaryButton onClick={onSubmit} mr={\"5px\"}>\n        Submit\n      </PrimaryButton>\n    </>\n  );\n};\n\nexport default AddConsequentialDecisionForm;\n","import React, { ChangeEvent } from \"react\";\nimport { Choice, StoryStatus } from \"../../client/types\";\nimport { Input, Select } from \"@rebass/forms\";\nimport { Flex, Text } from \"rebass\";\nimport { StrongText } from \"../../themes\";\nimport { Feedback, validateInteger } from \"../../forms/utils\";\n\ninterface DependentDecisionInputProps {\n  readonly onDescriptionChange: (description: string) => void;\n  readonly onDependencyChange: (dependency: string) => void;\n  readonly onThresholdChange: (threshold: number) => void;\n  readonly onOutcomeBelowIdChange: (belowId: number) => void;\n  readonly onOutcomeMeetsIdChange: (meetsId: number) => void;\n  readonly choices: Choice[];\n  readonly statuses: StoryStatus[];\n  readonly feedback: Feedback;\n}\n\nconst DependentDecisionInputs: React.FC<DependentDecisionInputProps> = ({\n  onDescriptionChange,\n  onDependencyChange,\n  onThresholdChange,\n  onOutcomeBelowIdChange,\n  onOutcomeMeetsIdChange,\n  choices,\n  statuses,\n  feedback,\n}) => {\n  const onOutcomeBelowSelect = (e: ChangeEvent<HTMLSelectElement>): void => {\n    onOutcomeBelowIdChange(Number(e.currentTarget.value));\n  };\n\n  const onOutcomeMeetsSelect = (e: ChangeEvent<HTMLSelectElement>): void => {\n    onOutcomeMeetsIdChange(Number(e.currentTarget.value));\n  };\n\n  const showIntegerError = (): void => {\n    feedback.giveFeedback(\"Must be an integer!\");\n  };\n\n  const changeThreshold = (val: number): void => {\n    feedback.hideFeedback();\n    onThresholdChange(val);\n  };\n\n  const onThresholdInputChange = (e: ChangeEvent<HTMLInputElement>): void => {\n    validateInteger(e, showIntegerError, changeThreshold);\n  };\n\n  return (\n    <>\n      <StrongText>Description</StrongText>\n      <Input\n        name={\"description\"}\n        placeholder={\"Description\"}\n        my={\"5px\"}\n        onChange={(e) => onDescriptionChange(e.target.value)}\n      />\n\n      <StrongText>Status the decision is dependent on</StrongText>\n      <Select\n        name={\"dependency\"}\n        onChange={(e) => onDependencyChange(e.currentTarget.value)}\n      >\n        {statuses.map((status: StoryStatus) => {\n          return <option key={status.name}>{status.name}</option>;\n        })}\n      </Select>\n\n      <StrongText>Status Value Threshold</StrongText>\n      <Input\n        name={\"threshold\"}\n        defaultValue={0}\n        placeholder={\"0\"}\n        type={\"number\"}\n        onChange={onThresholdInputChange}\n      />\n\n      <StrongText>Outcome If Status Is Below Threshold</StrongText>\n      <Flex alignItems={\"center\"}>\n        <Text mr={\"5px\"}>Choice #</Text>\n        <Select\n          name=\"outcomeBelowId\"\n          onChange={onOutcomeBelowSelect}\n          my={\"5px\"}\n          minWidth={\"50px\"}\n        >\n          {choices.map((choice) => (\n            <option key={choice.id}>{choice.id}</option>\n          ))}\n        </Select>\n      </Flex>\n\n      <StrongText>Outcome If Status Meets Threshold</StrongText>\n      <Flex alignItems={\"center\"}>\n        <Text mr={\"5px\"}>Choice #</Text>\n        <Select\n          name=\"outcomeMeetsId\"\n          onChange={onOutcomeMeetsSelect}\n          my={\"5px\"}\n          minWidth={\"50px\"}\n        >\n          {choices.map((choice) => (\n            <option key={choice.id}>{choice.id}</option>\n          ))}\n        </Select>\n      </Flex>\n    </>\n  );\n};\n\nexport default DependentDecisionInputs;\n","import React from \"react\";\nimport { Choice, ErrorResponse, StoryStatus } from \"../../client/types\";\nimport Client from \"../../client/client\";\nimport { Text } from \"rebass\";\nimport { WARN } from \"../../themes\";\nimport { useState } from \"react\";\nimport DependentDecisionInputs from \"../../components/dependentDecisionInputs\";\nimport { Feedback } from \"../utils\";\nimport { PrimaryButton } from \"../../themes\";\n\ninterface AddSimpleDependentDecisionFormProps {\n  readonly onSuccess: () => void;\n  readonly choiceId: number;\n  readonly choices: Choice[];\n  readonly statuses: StoryStatus[];\n}\n\nconst AddSimpleDependentDecisionForm: React.FC<AddSimpleDependentDecisionFormProps> =\n  ({ onSuccess, choiceId, choices, statuses }) => {\n    const [description, setDescription] = useState<string>();\n    const [dependency, setDependency] = useState<string>(statuses[0].name);\n    const [threshold, setThreshold] = useState<number>(0);\n    const [outcomeBelowId, setOutcomeBelowId] = useState<number>(0);\n    const [outcomeMeetsId, setOutcomeMeetsId] = useState<number>(0);\n    // Feedback\n    const [feedback, setFeedback] = useState<string>();\n    const [showFeedback, setShowFeedback] = useState<boolean>();\n\n    const feedbackHandler: Feedback = {\n      giveFeedback: (msg: string) => {\n        setFeedback(msg);\n        setShowFeedback(true);\n      },\n      hideFeedback: () => setShowFeedback(false),\n    };\n\n    const onSubmit = (): void => {\n      if (description) {\n        Client.addSimpleDependent({\n          description,\n          choiceId,\n          dependency,\n          threshold,\n          outcomeBelowId,\n          outcomeMeetsId,\n        }).then(onSuccess, (err: ErrorResponse) =>\n          feedbackHandler.giveFeedback(err.message)\n        );\n      } else {\n        feedbackHandler.giveFeedback(\"All fields are required!\");\n      }\n    };\n\n    return (\n      <>\n        <DependentDecisionInputs\n          onDescriptionChange={setDescription}\n          onDependencyChange={setDependency}\n          onThresholdChange={setThreshold}\n          onOutcomeBelowIdChange={setOutcomeBelowId}\n          onOutcomeMeetsIdChange={setOutcomeMeetsId}\n          choices={choices}\n          statuses={statuses}\n          feedback={feedbackHandler}\n        />\n        {showFeedback && <Text color={WARN}>{feedback}</Text>}\n        <PrimaryButton onClick={onSubmit} mr={\"5px\"}>\n          Submit\n        </PrimaryButton>\n      </>\n    );\n  };\n\nexport default AddSimpleDependentDecisionForm;\n","import React from \"react\";\nimport { Choice, ErrorResponse, StoryStatus } from \"../../client/types\";\nimport Client from \"../../client/client\";\nimport { Flex, Text } from \"rebass\";\nimport { WARN } from \"../../themes\";\nimport { useState } from \"react\";\nimport DependentDecisionInputs from \"../../components/dependentDecisionInputs\";\nimport { Feedback } from \"../utils\";\nimport { EndFlexElement, PrimaryButton, StrongText } from \"../../themes\";\nimport ConsequenceInput from \"../../components/consequenceInput\";\n\ninterface AddConsequentialDependentDecisionFormProps {\n  readonly onSuccess: () => void;\n  readonly choiceId: number;\n  readonly choices: Choice[];\n  readonly statuses: StoryStatus[];\n}\n\nconst AddConsequentialDependentDecisionForm: React.FC<AddConsequentialDependentDecisionFormProps> =\n  ({ onSuccess, choiceId, choices, statuses }) => {\n    const [description, setDescription] = useState<string>();\n    const [dependency, setDependency] = useState<string>(statuses[0].name);\n    const [threshold, setThreshold] = useState<number>(0);\n    const [outcomeBelowId, setOutcomeBelowId] = useState<number>(0);\n    const [outcomeMeetsId, setOutcomeMeetsId] = useState<number>(0);\n    const [consequences, setConsequences] = useState<string[]>([]);\n    const [currentConsequence, setCurrentConsequence] = useState<string>();\n    // Feedback\n    const [feedback, setFeedback] = useState<string>();\n    const [showFeedback, setShowFeedback] = useState<boolean>();\n\n    const feedbackHandler: Feedback = {\n      giveFeedback: (msg: string) => {\n        setFeedback(msg);\n        setShowFeedback(true);\n      },\n      hideFeedback: () => setShowFeedback(false),\n    };\n\n    const onAddConsequence = (): void => {\n      if (currentConsequence) {\n        setConsequences((prev) => [...prev, currentConsequence]);\n        setCurrentConsequence(undefined);\n      } else {\n        feedbackHandler.giveFeedback(\"All consequence fields are required!\");\n      }\n    };\n\n    const onSubmit = (): void => {\n      if (description) {\n        Client.addConsequentialDependent({\n          description,\n          choiceId,\n          dependency,\n          threshold,\n          outcomeBelowId,\n          outcomeMeetsId,\n          consequences,\n        }).then(onSuccess, (err: ErrorResponse) =>\n          feedbackHandler.giveFeedback(err.message)\n        );\n      } else {\n        feedbackHandler.giveFeedback(\"All fields are required!\");\n      }\n    };\n\n    return (\n      <>\n        <DependentDecisionInputs\n          onDescriptionChange={setDescription}\n          onDependencyChange={setDependency}\n          onThresholdChange={setThreshold}\n          onOutcomeBelowIdChange={setOutcomeBelowId}\n          onOutcomeMeetsIdChange={setOutcomeMeetsId}\n          choices={choices}\n          statuses={statuses}\n          feedback={feedbackHandler}\n        />\n        <StrongText>Consequences</StrongText>\n        {consequences.map((str, i) => {\n          return <Text key={i}>{str}</Text>;\n        })}\n        <Flex alignItems={\"flex-end\"} flexWrap={\"wrap\"} mt={\"5px\"}>\n          <ConsequenceInput\n            onChange={setCurrentConsequence}\n            statuses={statuses}\n            feedback={feedbackHandler}\n          />\n          <EndFlexElement>\n            <PrimaryButton onClick={onAddConsequence}>Add</PrimaryButton>\n          </EndFlexElement>\n        </Flex>\n        <br />\n        {showFeedback && <Text color={WARN}>{feedback}</Text>}\n        <PrimaryButton onClick={onSubmit} mr={\"5px\"}>\n          Submit\n        </PrimaryButton>\n      </>\n    );\n  };\n\nexport default AddConsequentialDependentDecisionForm;\n","import React, { useEffect, useState } from \"react\";\nimport Client from \"../../client/client\";\nimport {\n  ApplicationTypes,\n  Choice,\n  Decision,\n  Story,\n  StoryStatus,\n} from \"../../client/types\";\nimport { Box, Flex } from \"rebass\";\nimport { ErrorHandlerProps, Routes } from \"../../App\";\nimport ChoiceCard from \"../../components/choiceCard\";\nimport TitleForm from \"../../forms/titleForm\";\nimport StatusCard from \"../../components/statusCard\";\nimport SoftButton from \"../../components/softButton\";\nimport { ButtonLabel, Header, PageContainer, StoryTitle } from \"../../themes\";\nimport AddStatusForm from \"../../forms/addStatusForm\";\nimport LinkButton from \"../../components/linkButton\";\nimport { ACTION_BUTTON_MARGIN, SECONDARY } from \"../../themes\";\nimport ExportForm from \"../../forms/exportForm\";\nimport SetInitialChoiceForm from \"../../forms/setInitialChoiceForm\";\n\nenum SwitchFormTypes {\n  ADD_STATUS,\n  SET_INITIAL,\n  NONE,\n}\n\nconst noStory: Story = {\n  name: \"\",\n  statuses: [],\n  choices: [],\n  decisions: [],\n  choice: -1,\n};\n\nconst WorkEditor: React.FC<ErrorHandlerProps> = ({ message }) => {\n  const [workName, setWorkName] = useState<string>();\n  const [work, setWork] = useState<Story>(noStory);\n  const [noWorkMessage, setNoWorkMessage] = useState(\"Loading...\");\n  const [currentForm, setCurrentForm] = useState<SwitchFormTypes>(\n    SwitchFormTypes.NONE\n  );\n  // Export Work Form\n  const [exportVisible, setExportVisible] = useState(false);\n\n  useEffect(() => {\n    const handleQuit = (): void => {\n      Client.quitWork().then(() => {}, message.errorAlert);\n    };\n\n    window.addEventListener(\"unload\", handleQuit);\n    return () => window.removeEventListener(\"unload\", handleQuit);\n  });\n\n  useEffect(() => {\n    const handleLoaded = (res: Story): void => {\n      if (res.name !== \"\") {\n        setWork(res);\n        Client.getCurrentWorkName().then(\n          (res: string) => setWorkName(res),\n          message.errorAlert\n        );\n      } else {\n        setWorkName(undefined);\n        setNoWorkMessage(\n          \"Oops! Looks like you haven't loaded a story to edit!\"\n        );\n      }\n    };\n\n    Client.getCurrentWork().then(handleLoaded, message.errorAlert);\n  }, [message]);\n\n  const getCurrentWork = (): void => {\n    Client.getCurrentWork().then(\n      (res: Story) => setWork(res),\n      message.errorAlert\n    );\n  };\n\n  const updateStatuses = (): void => {\n    Client.getCurrentStatuses().then(\n      (res: StoryStatus[]) =>\n        setWork((prev) => {\n          return {\n            name: prev.name,\n            statuses: res,\n            choices: prev.choices,\n            decisions: prev.decisions,\n            choice: prev.choice,\n          };\n        }),\n      message.errorAlert\n    );\n    setCurrentForm(SwitchFormTypes.NONE);\n  };\n\n  const updateInitialChoice = (): void => {\n    Client.getInitialChoice().then(\n      (res: number) =>\n        setWork((prev) => {\n          return {\n            name: prev.name,\n            statuses: prev.statuses,\n            choices: prev.choices,\n            decisions: prev.decisions,\n            choice: res,\n          };\n        }),\n      message.errorAlert\n    );\n    setCurrentForm(SwitchFormTypes.NONE);\n  };\n\n  const updateChoicesAndDecisions = (): void => {\n    Client.getCurrentChoices().then((res: Choice[]) => {\n      Client.getCurrentDecisions().then((dRes: Decision[]) => {\n        setWork((prev) => {\n          return {\n            name: prev.name,\n            statuses: prev.statuses,\n            choices: res,\n            decisions: dRes,\n            choice: prev.choice,\n          };\n        });\n      }, message.errorAlert);\n    }, message.errorAlert);\n    setCurrentForm(SwitchFormTypes.NONE);\n  };\n\n  const exportToPlayer = (): void => {\n    Client.exportToPlayer().then(\n      () => message.triggerMessage(\"Successfully exported!\"),\n      message.errorAlert\n    );\n  };\n\n  const onClickExport = (): void => {\n    setExportVisible(true);\n  };\n\n  const onExportSuccess = (): void => {\n    message.triggerMessage(\"Exported successfully!\");\n    setExportVisible(false);\n  };\n\n  const onAddChoice = (): void => {\n    Client.addChoice().then(updateChoicesAndDecisions, message.errorAlert);\n  };\n\n  if (!workName) {\n    return (\n      <PageContainer>\n        <StoryTitle>{noWorkMessage}</StoryTitle>\n        <LinkButton to={Routes.WRITER_LIBRARY} bg={SECONDARY}>\n          <ButtonLabel>Go back to your library!</ButtonLabel>\n        </LinkButton>\n      </PageContainer>\n    );\n  } else {\n    return (\n      <PageContainer>\n        <StoryTitle>Story Editor</StoryTitle>\n        <Header>Work: {workName}</Header>\n        <TitleForm\n          title={work.name}\n          message={message}\n          onFinish={getCurrentWork}\n        />\n        <Header>Statuses</Header>\n        <Flex flexWrap={\"wrap\"}>\n          {work.statuses.map((status: StoryStatus) => {\n            return (\n              <StatusCard\n                key={status.name}\n                status={status}\n                updateStory={updateStatuses}\n                message={message}\n              />\n            );\n          })}\n        </Flex>\n\n        <Header>Choices</Header>\n        <Flex flexWrap={\"wrap\"}>\n          {work.choices.map((choice: Choice) => {\n            return (\n              <ChoiceCard\n                key={choice.id}\n                choice={choice}\n                choices={work.choices}\n                decisions={work.decisions}\n                statuses={work.statuses}\n                onSuccess={updateChoicesAndDecisions}\n                message={message}\n              />\n            );\n          })}\n        </Flex>\n        <Header>Initial Choice: {work.choice}</Header>\n\n        <Header>Edit</Header>\n        <Box>\n          {(() => {\n            switch (currentForm) {\n              case SwitchFormTypes.ADD_STATUS:\n                return (\n                  <>\n                    <Header>Add Status</Header>\n                    <AddStatusForm onSuccess={updateStatuses} />\n                  </>\n                );\n              case SwitchFormTypes.SET_INITIAL:\n                return (\n                  <>\n                    <Header>Set Initial Choice</Header>\n                    <SetInitialChoiceForm\n                      choices={work.choices}\n                      onSuccess={updateInitialChoice}\n                      message={message}\n                    />\n                  </>\n                );\n              case SwitchFormTypes.NONE:\n              default:\n                return (\n                  <>\n                    <SoftButton\n                      text={\"Add Status\"}\n                      margin={ACTION_BUTTON_MARGIN}\n                      onClick={() => setCurrentForm(SwitchFormTypes.ADD_STATUS)}\n                    />\n                    <SoftButton\n                      text={\"Add Choice\"}\n                      margin={ACTION_BUTTON_MARGIN}\n                      onClick={onAddChoice}\n                    />\n                    <SoftButton\n                      text={\"Set Initial Choice\"}\n                      margin={ACTION_BUTTON_MARGIN}\n                      onClick={() =>\n                        setCurrentForm(SwitchFormTypes.SET_INITIAL)\n                      }\n                    />\n                  </>\n                );\n            }\n          })()}\n          {currentForm !== SwitchFormTypes.NONE && (\n            <SoftButton\n              text={\"Cancel\"}\n              onClick={() => setCurrentForm(SwitchFormTypes.NONE)}\n            />\n          )}\n        </Box>\n        <Header>Export</Header>\n        {!exportVisible ? (\n          <Flex>\n            <SoftButton\n              text={\"Export\"}\n              onClick={onClickExport}\n              margin={ACTION_BUTTON_MARGIN}\n            />\n            <SoftButton\n              text={\"Export to Player\"}\n              onClick={exportToPlayer}\n              margin={ACTION_BUTTON_MARGIN}\n            />\n          </Flex>\n        ) : (\n          <Box mr={\"10px\"} width={\"70%\"}>\n            <ExportForm\n              name={workName}\n              onSuccess={onExportSuccess}\n              exportType={ApplicationTypes.WORK}\n            />\n            <SoftButton\n              text={\"Cancel\"}\n              onClick={() => setExportVisible(false)}\n              margin={\"10px 0 0 0\"}\n            />\n          </Box>\n        )}\n      </PageContainer>\n    );\n  }\n};\n\nexport default WorkEditor;\n","import React, { useState } from \"react\";\nimport Client from \"../../client/client\";\nimport styled from \"@emotion/styled\";\nimport { ErrorHandlerProps } from \"../../App\";\nimport { Input } from \"@rebass/forms\";\nimport SoftButton from \"../../components/softButton\";\nimport { Header, PrimaryButton } from \"../../themes\";\n\nconst InlineSoftButton = styled(SoftButton)`\n  display: inline-block;\n`;\n\ninterface TitleFormProps extends ErrorHandlerProps {\n  readonly title: string;\n  readonly onFinish: () => void;\n}\n\nconst TitleForm: React.FC<TitleFormProps> = ({ message, title, onFinish }) => {\n  const [editing, setEditing] = useState(false);\n  const [titleRequest, setTitleRequest] = useState<string>(title);\n\n  const editTitle = (): void => {\n    Client.setName(titleRequest).then(() => {\n      onFinish();\n      setEditing(false);\n    }, message.errorAlert);\n  };\n\n  const toggleEditing = (): void => {\n    setEditing((prev) => !prev);\n  };\n\n  return (\n    <>\n      <Header display={\"inline-block\"} mr={\"15px\"}>\n        Story Title:\n      </Header>\n      {editing ? (\n        <>\n          <Input\n            name={\"name\"}\n            defaultValue={title}\n            placeholder={`Untitled`}\n            display={\"inline-block\"}\n            width={\"40%\"}\n            onChange={(e) => setTitleRequest(e.target.value)}\n          />\n          <PrimaryButton\n            onClick={editTitle}\n            display={\"inline-block\"}\n            ml={\"15px\"}\n            mr={\"8px\"}\n          >\n            Submit\n          </PrimaryButton>\n        </>\n      ) : (\n        <Header display={\"inline-block\"} mr={\"15px\"}>\n          {title}\n        </Header>\n      )}\n      <InlineSoftButton\n        onClick={toggleEditing}\n        text={editing ? \"Cancel\" : \"Change Title\"}\n      />\n    </>\n  );\n};\n\nexport default TitleForm;\n","import React, { ChangeEvent, useEffect, useState } from \"react\";\nimport { Input } from \"@rebass/forms\";\nimport Client from \"../../client/client\";\nimport { Text } from \"rebass\";\nimport { WARN } from \"../../themes\";\nimport { validateInteger } from \"../utils\";\nimport { ErrorResponse } from \"../../client/types\";\nimport { PrimaryButton } from \"../../themes\";\n\ninterface AddStatusFormProps {\n  readonly updateName?: string;\n  readonly onSuccess: () => void;\n}\n\nconst AddStatusForm: React.FC<AddStatusFormProps> = ({\n  updateName,\n  onSuccess,\n}) => {\n  const [name, setName] = useState<string>();\n  const [val, setVal] = useState<number>(0);\n  // Feedback\n  const [feedback, setFeedback] = useState<string>();\n  const [showFeedback, setShowFeedback] = useState<boolean>();\n\n  useEffect(() => {\n    if (updateName) {\n      setName(updateName);\n    }\n  }, [updateName]);\n\n  const triggerFeedback = (msg: string) => {\n    setFeedback(msg);\n    setShowFeedback(true);\n  };\n\n  const showIntegerError = (): void => {\n    triggerFeedback(\"Must be an integer!\");\n  };\n\n  const changeVal = (val: number): void => {\n    setShowFeedback(false);\n    setVal(val);\n  };\n\n  const onValInputChange = (e: ChangeEvent<HTMLInputElement>): void => {\n    validateInteger(e, showIntegerError, changeVal);\n  };\n\n  const onAdd = (): void => {\n    if (name) {\n      Client.addStatus(name, val).then(onSuccess, (err: ErrorResponse) =>\n        triggerFeedback(err.message)\n      );\n    } else {\n      triggerFeedback(\"All fields are required!\");\n    }\n  };\n\n  return (\n    <>\n      {!updateName && (\n        <Input\n          name={\"name\"}\n          placeholder={\"Status Name\"}\n          onChange={(e) => setName(e.target.value)}\n          mb={\"7px\"}\n        />\n      )}\n      <Input\n        name={\"val\"}\n        defaultValue={0}\n        placeholder={\"0\"}\n        type={\"number\"}\n        onChange={onValInputChange}\n        mb={\"7px\"}\n      />\n      {showFeedback && <Text color={WARN}>{feedback}</Text>}\n      <PrimaryButton onClick={onAdd} mr={\"5px\"}>\n        Submit\n      </PrimaryButton>\n    </>\n  );\n};\n\nexport default AddStatusForm;\n","import React, { useState } from \"react\";\nimport { Box, Button, Text } from \"rebass\";\nimport { StoryStatus } from \"../../client/types\";\nimport BoxCard from \"../boxCard\";\nimport { ErrorHandlerProps } from \"../../App\";\nimport SoftButton from \"../softButton\";\nimport Client from \"../../client/client\";\nimport AddStatusForm from \"../../forms/addStatusForm\";\nimport { WARN } from \"../../themes\";\nimport PopupWindow from \"../popupWindow\";\nimport {\n  BottomCornerFlex,\n  FormContainer,\n  Header,\n  StrongText,\n} from \"../../themes\";\n\ninterface StatusCardProps extends ErrorHandlerProps {\n  readonly status: StoryStatus;\n  readonly updateStory: () => void;\n}\n\nconst StatusCard: React.FC<StatusCardProps> = ({\n  status,\n  updateStory,\n  message,\n}) => {\n  const [editing, setEditing] = useState(false);\n\n  const onClickRemove = (): void => {\n    Client.removeStatus(status.name).then(null, message.errorAlert);\n  };\n\n  return (\n    <>\n      <BoxCard title={status.name}>\n        <Text>Initial Value: {status.value}</Text>\n        <Box textAlign={\"right\"} mt={\"15px\"} mb={\"-10px\"}>\n          <SoftButton text={\"Edit\"} onClick={() => setEditing(true)} />\n        </Box>\n      </BoxCard>\n\n      <PopupWindow visible={editing} onClose={() => setEditing(false)}>\n        <FormContainer>\n          <Header>Update Status: {status.name}</Header>\n          <StrongText my={\"10px\"}>Update Initial Value</StrongText>\n          <AddStatusForm updateName={status.name} onSuccess={updateStory} />\n          <br />\n          <BottomCornerFlex>\n            <Button onClick={onClickRemove} bg={WARN}>\n              Remove Status\n            </Button>\n          </BottomCornerFlex>\n        </FormContainer>\n      </PopupWindow>\n    </>\n  );\n};\n\nexport default StatusCard;\n","import React, { ChangeEvent, useState } from \"react\";\nimport { ErrorHandlerProps } from \"../../App\";\nimport Client from \"../../client/client\";\nimport { Select } from \"@rebass/forms\";\nimport { Choice } from \"../../client/types\";\nimport { PrimaryButton, StrongText } from \"../../themes\";\nimport { Flex, Text } from \"rebass\";\n\ninterface SetInitialChoiceFormProps extends ErrorHandlerProps {\n  readonly choices: Choice[];\n  readonly onSuccess: () => void;\n}\n\nconst SetInitialChoiceForm: React.FC<SetInitialChoiceFormProps> = ({\n  choices,\n  onSuccess,\n  message,\n}) => {\n  const [choice, setChoice] = useState(-1);\n\n  const onChoiceSelect = (e: ChangeEvent<HTMLSelectElement>): void => {\n    setChoice(Number(e.currentTarget.value));\n  };\n\n  const onSetInitial = (): void => {\n    Client.setInitial(choice).then(onSuccess, message.errorAlert);\n  };\n\n  return (\n    <>\n      <StrongText>Initial Choice</StrongText>\n      <Flex alignItems={\"center\"}>\n        <Text mr={\"5px\"}>Choice #</Text>\n        <Select\n          name=\"choice\"\n          onChange={onChoiceSelect}\n          my={\"5px\"}\n          minWidth={\"50px\"}\n        >\n          {choices.map((choice) => (\n            <option key={choice.id}>{choice.id}</option>\n          ))}\n        </Select>\n      </Flex>\n      <PrimaryButton onClick={onSetInitial} mr={\"5px\"}>\n        Set Initial Choice\n      </PrimaryButton>\n    </>\n  );\n};\n\nexport default SetInitialChoiceForm;\n","import React, { useState } from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport Player from \"./pages/player\";\nimport NavBar from \"./components/navBar\";\nimport Home from \"./pages/home\";\nimport Alert, { AlertMessage } from \"./components/alert\";\nimport Writer from \"./pages/writer\";\nimport styled from \"@emotion/styled\";\nimport { Box } from \"rebass\";\nimport { ErrorResponse } from \"./client/types\";\nimport WorkEditor from \"./pages/workEditor\";\nimport StoryPlayer from \"./pages/storyPlayer\";\n\nconst Top = styled(Box)`\n  position: absolute;\n  top: 20px;\n  left: 50%;\n  transform: translate(-50%, 0);\n`;\n\nexport enum Routes {\n  HOME = \"/\",\n  PLAYER_LIBRARY = \"/player\",\n  WRITER_LIBRARY = \"/writer\",\n  PLAYER_PLAY = \"/player/play\",\n  WRITER_EDIT = \"/writer/edit\",\n}\n\nexport interface Messenger {\n  readonly triggerMessage: (message: string) => void;\n  readonly triggerAlert: (message: string) => void;\n  readonly errorAlert: (err: ErrorResponse) => void;\n}\n\nexport interface ErrorHandlerProps {\n  readonly message: Messenger;\n}\n\nconst ghPagesDisclaimer: AlertMessage = {\n  visible: true,\n  message:\n    \"This is a demo hosted on Github Pages. Some features are not supported. Please do not reload any pages.\",\n  warn: false,\n};\n\nfunction App() {\n  // Alerts\n  const [alerts, setAlerts] = useState<AlertMessage[]>([ghPagesDisclaimer]);\n\n  const triggerMessage = (message: string): void => {\n    setAlerts((prev) => [\n      ...prev,\n      { visible: true, message: message, warn: false },\n    ]);\n    if (alerts.length > 5) {\n      deleteAlert(0);\n    }\n  };\n\n  const triggerAlert = (message: string): void => {\n    setAlerts((prev) => [\n      ...prev,\n      { visible: true, message: message, warn: true },\n    ]);\n    if (alerts.length > 5) {\n      deleteAlert(0);\n    }\n  };\n\n  const errorAlert = (err: ErrorResponse): void => {\n    triggerAlert(err.message);\n  };\n\n  const message: Messenger = {\n    triggerMessage,\n    triggerAlert,\n    errorAlert,\n  };\n\n  const deleteAlert = (i: number): void => {\n    const copyAlerts = [...alerts];\n    copyAlerts.splice(i, 1);\n    setAlerts(copyAlerts);\n  };\n\n  return (\n    <>\n      <Router basename={process.env.PUBLIC_URL}>\n        <NavBar />\n        <Switch>\n          <Route path={Routes.HOME} exact>\n            <Home message={message} />\n          </Route>\n          <Route path={Routes.PLAYER_LIBRARY} exact>\n            <Player message={message} />\n          </Route>\n          <Route path={Routes.WRITER_LIBRARY} exact>\n            <Writer message={message} />\n          </Route>\n          <Route path={Routes.PLAYER_PLAY} exact>\n            <StoryPlayer message={message} />\n          </Route>\n          <Route path={Routes.WRITER_EDIT} exact>\n            <WorkEditor message={message} />\n          </Route>\n        </Switch>\n      </Router>\n\n      <Top>\n        {alerts.map((alert, i) => {\n          return (\n            <Alert\n              key={i}\n              visible={alert.visible}\n              message={alert.message}\n              warn={alert.warn}\n              onClose={() => deleteAlert(i)}\n            />\n          );\n        })}\n      </Top>\n    </>\n  );\n}\n\nexport default App;\n","import React, { useEffect, useState } from \"react\";\nimport Client from \"../../client/client\";\nimport { Option, Story } from \"../../client/types\";\nimport { Box, Button, Flex, Text } from \"rebass\";\nimport styled from \"@emotion/styled\";\nimport { WARN } from \"../../themes\";\nimport { ErrorHandlerProps } from \"../../App\";\nimport { PageContainer, PrimaryButton, StoryTitle } from \"../../themes\";\n\nconst BottomBox = styled(Box)`\n  position: absolute;\n  bottom: 50px;\n  right: 50px;\n`;\n\nconst ScriptText = styled(Text)`\n  font-size: 16px;\n  line-height: 22px;\n`;\n\nconst DecisionText = styled(ScriptText)`\n  padding-left: 20px;\n  padding-bottom: 5px;\n`;\n\nconst StoryPlayer: React.FC<ErrorHandlerProps> = ({ message }) => {\n  const [story, setStory] = useState<Story>();\n  const [prevChoices, setPrevChoices] = useState<string[]>([]);\n  const [prevDecisions, setPrevDecisions] = useState<string[]>([]);\n  const [noStoryMessage, setNoStoryMessage] = useState(\"Loading...\");\n\n  useEffect(() => {\n    const handleQuit = (): void => {\n      Client.quitStory().then(() => {}, message.errorAlert);\n    };\n\n    window.addEventListener(\"unload\", handleQuit);\n    return () => window.removeEventListener(\"unload\", handleQuit);\n  });\n\n  useEffect(() => {\n    const effectGetCurrentDescription = (): void => {\n      Client.getCurrentChoice().then(\n        (res) => setPrevChoices((prev) => [...prev, res]),\n        message.errorAlert\n      );\n    };\n\n    const handleLoaded = (res: Story) => {\n      if (res.name !== \"\") {\n        setStory(res);\n        if (prevChoices.length === 0) {\n          effectGetCurrentDescription();\n        }\n      } else {\n        setNoStoryMessage(\n          \"Oops! Looks like this story doesn't exist. Load a story from your library!\"\n        );\n      }\n    };\n\n    Client.getCurrentStory().then(handleLoaded, message.errorAlert);\n  }, [message, prevChoices.length]);\n\n  const getCurrentStory = (): void => {\n    Client.getCurrentStory().then((res) => setStory(res), message.errorAlert);\n  };\n\n  const getCurrentDescription = (): void => {\n    Client.getCurrentChoice().then(\n      (res) => setPrevChoices((prev) => [...prev, res]),\n      message.errorAlert\n    );\n  };\n\n  const choose = (decision: number): void => {\n    if (story) {\n      setPrevDecisions((prev) => [\n        ...prev,\n        story.decisions[decision].description,\n      ]);\n      Client.choose(decision).then(getCurrentStory, message.errorAlert);\n      getCurrentDescription();\n    }\n  };\n\n  const onRestart = (): void => {\n    const afterRestart = (): void => {\n      getCurrentStory();\n      setPrevDecisions((prev) => [...prev, \"Restarted the story\"]);\n      getCurrentDescription();\n    };\n    Client.restart().then(afterRestart, message.errorAlert);\n  };\n\n  return (\n    <PageContainer>\n      {(() => {\n        switch (story) {\n          case undefined:\n            return <StoryTitle>{noStoryMessage}</StoryTitle>;\n          default:\n            const storyOptions: Option[] = story.choices[story.choice].options;\n            return (\n              <>\n                <StoryTitle>{story.name}</StoryTitle>\n                {prevChoices.map((str, i) => {\n                  return (\n                    <div key={str + i}>\n                      <ScriptText>{str}</ScriptText>\n                      {i < prevDecisions.length && (\n                        <DecisionText>Chose: {prevDecisions[i]}</DecisionText>\n                      )}\n                    </div>\n                  );\n                })}\n                {storyOptions.length > 0 && (\n                  <Flex mt={10}>\n                    <ScriptText my={\"auto\"} mr={10}>\n                      Choose:{\" \"}\n                    </ScriptText>\n                    {story &&\n                      story.choices[story.choice].options.map((opt) => {\n                        return (\n                          <PrimaryButton\n                            key={opt.id}\n                            onClick={() => choose(opt.decision)}\n                            mr={\"10px\"}\n                          >\n                            {story.decisions[opt.decision].description}\n                          </PrimaryButton>\n                        );\n                      })}\n                  </Flex>\n                )}\n              </>\n            );\n        }\n      })()}\n\n      <BottomBox>\n        <Button onClick={onRestart} padding={\"15px 25px\"} bg={WARN}>\n          Start Over\n        </Button>\n      </BottomBox>\n    </PageContainer>\n  );\n};\n\nexport default StoryPlayer;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}